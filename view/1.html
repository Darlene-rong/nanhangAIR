<!-- WDPCYBS 导入Date类 取 时间毫秒数 作为 cybs的sessionid（指纹设备参数）-->


<!-- WDPCYBS 导入Date类 取 时间毫秒数 作为 cybs的sessionid（指纹设备参数）-->






<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=EDGE">
  <meta name="WT.tx_t" content="1" />
  <meta name="WT.al_flnum" content="" />
  <meta name="WT.temptx_i" content="支付号" />
  <meta name="WT.tx_u" content="" />
  <meta name="WT.tx_i" content="GO1912230068226" />
  <meta name="WT.tx_s" content="10" />
  <META name="WT.si_n" content="机票预订-国内" />
  <META name="WT.si_p" content="支付订单" />
  <META name="WT.saletype" content="" />
  <META name="WT.tx_mark" content="" />

  <title>南航统一收银台</title>
  <link rel="stylesheet" href="/upp_payment/pay/common/css/common.css?version=1.1">
  <link rel="Stylesheet" href="/upp_payment/pay/common/css/jquery.autocomplete.css?version=1.0" />
  <link rel="stylesheet" href="/upp_payment/pay/common/css/tip.css?version=1.0">
  <link rel="stylesheet" href="/upp_payment/pay/common/css/response.css?version=1.0">
  <link rel="stylesheet" href="/upp_payment/pay/common/css/pay.css?version=1.33">
  <link rel="stylesheet" href="/upp_payment/pay/common/css/wxsm.css?version=1.0">
  <link rel="stylesheet" href="/upp_payment/pay/common/css/myBalance.css?version=1.1">
  <link rel="stylesheet" href="/upp_payment/pay/common/css/fep.css?version=1.1">
  <link rel="stylesheet" href="/upp_payment/pay/common/css/voucher.css?version=1.5">
  <script src="/upp_payment/pay/common/js/jquery-1.8.3.js" type="text/javascript"></script>
  <script src="/upp_payment/pay/common/js/poshytip.js" type="text/javascript"></script>
  <script src="/upp_payment/pay/common/js/jquery.autocomplete.js" type="text/javascript"></script>
  <script type="text/javascript" src="/upp_payment/pay/js/bootstrap-datepicker.js"></script>
  <script type="text/javascript" src="/upp_payment/pay/common/js/jquery.qtip-1.0.0-rc3.min.js"></script>
  <script src="/upp_payment/pay/js/cardNumBin.js?version=1.2" type="text/javascript"></script>
  <script src="/upp_payment/pay/js/mileage.js?version=1.2" type="text/javascript"></script>
  <script src="/upp_payment/themes/scripts/md5.js" language="javascript"></script>
  <!-- RSA -->
  <script src="/upp_payment/themes/scripts/rsa/jsbn.js" language="javascript"></script>
  <script src="/upp_payment/themes/scripts/rsa/prng4.js" language="javascript"></script>
  <script src="/upp_payment/themes/scripts/rsa/rng.js" language="javascript"></script>
  <script src="/upp_payment/themes/scripts/rsa/rsa.js" language="javascript"></script>
  <!-- RSA -->
  <script type="text/javascript">
    var root = "/upp_payment";
    var merAppId = '101';
    var ffpNo = '';
    var ffpName = "";
    var ffpCertNo = '';
    var ffpMobile = '';
    var WalletRegisterNowMSG = '开通南航钱包余额支付';
    var WalletWhyBalanceMSG = '什么是钱包余额';
    var WalletBalanceMSG = '余额';
    var walletRmb = '元';
    var WalletVoucherMSG = '可用代金券';
    var WalletUseVoucher = '使用代金券';
    var WalletTicketMSG = '张';
    var WalletWhyBalanceMSG = '什么是钱包余额';
    var WalletSelectedMSG = '已勾选代金券';
    var WalletTicketMSG = '张';
    var WalletMoneyMSG = '金额';
    var WalletYuanMSG = '元';
    var WalletBalanceLack = '余额不足，无法进行支付，请进行充值';
    var vouchersRuleMSG = "当您支付勾选“使用代金券”时，优先使用代金券的金额；如有多张代金券，可以同时使用。若代金券金额不足以支付订单时，自动加上钱包账户余额；如仍不足以支付订单，请先通过充值余额后再支付。";
    var WalletPaymentPasswordMSG = '支付密码';
    var WalletPayPwd = '请输入支付密码';
    var WalletpayForgotPwd = '忘记密码？';

    var MyCardMSG = '常用银行卡';
    var WalletCreditCardMSG = '信用卡 ';
    var WalletMantissaMSG = '尾数';
    var codeMSG = '验证码';
    var smsCodeIsNullErrorMSG = '请输入发送到该银行卡预留手机上的6位验证码';
    var AddNewCardsMSG = '添加新的银行卡';
    var EnterSmsCode = '请输入短信验证码';
    var getCodeMSG = '获取验证码';
    var smsCodeSendingMSG = '发送中';
    var uopfCodeSMSSuccessMSG = '短信验证码已经发送，请注意查收。';
    var smsCodeIsFailureNoticeMSG = '对不起，短信发送失败，请稍候再试';
    var oneSMSErro2MSG = '短信发送失败!';

    var myWalletFepFlag = false;

    var milMyself = '';
    var bzjPayFlag = true;
    var BOCOMTips = '请使用交通银行信用卡支付';
  </script>
  <script src="/upp_payment/pay/js/uppShowPay.js?version=5.3" type="text/javascript"></script>
  <!-- 2017-5-11 3D验证优化 -->
  <script src="/upp_payment/pay/js/wdpcybs3Ds.js?version=1.2" type="text/javascript"></script>





  <script src="https://www.csair.com/headfoot/cn/headfoot.js" type="text/javascript"></script>




  <style>
    .redstar {
      color: red;
    }

    .div_clear {
      height: 0px;
      font-size: 0;
      clear: both;
    }

    .down_ {
      margin-bottom: 10px;
    }

    .ico-tips {
      display: inline-block;
      width: 17px;
      height: 17px;
      line-height: 17px;
      text-align: center;
      background-color: #0e99d0;
      border-radius: 10px;
      _background-position: -1px -15px;
      color: #fff;
      font-size: 12px;
      cursor: pointer;
    }

    .tipbox {
      display: inline-block;
      margin: 6px 0 0 10px;
      vertical-align: top;
      line-height: 30px;
    }



    #confirm-window-wx .fl {
      float: left;
      text-align: left;
      color: #999;
    }

    #confirm-window-wx .fr {
      float: right;
      text-align: center;
    }

    .logoEn {
      background: rgba(0, 0, 0, 0) url("/upp_payment/b2c/commonEN.png") repeat scroll -15px -10px;
    }
  </style>

  <script type="text/javascript">
    //官网外卡优化
    //name tooltip
    var qtip_fname = {
      content: {
        text: '<img src="/upp_payment/pay/common/images/fname.png" width="99%">',
      },
      position: {
        corner: {
          tooltip: 'bottomMiddle', // Use the corner...
          target: 'topMiddle' // ...and opposite corner
        }
      },
      show: {
        event: 'click mouseenter'
      },
      hide: {
        event: 'mouseleave',
        fixed: true
      },
      style: {
        tip: true,
        width: 450,
        border: {
          width: 2,
          radius: 0,
          color: '#4682B4'
        }
      }
    };

    //expiry date tooltip
    var qtip_expiryDate = {
      content: {
        text: '<img src="/upp_payment/pay/common/images/expiry.png" width="99%">',
      },
      position: {
        corner: {
          tooltip: 'bottomMiddle', // Use the corner...
          target: 'topMiddle' // ...and opposite corner
        }
      },
      show: {
        event: 'click mouseenter'
      },
      hide: {
        event: 'mouseleave',
        fixed: true
      },
      style: {
        tip: true,
        width: 450,
        border: {
          width: 2,
          radius: 0,
          color: '#4682B4'
        }
      }
    };

    //cvv tooltip
    var qtip_cvv = {
      content: {
        text: '<img src="/upp_payment/pay/common/images/cvvtip.png" width="99%">'
      },
      position: {
        corner: {
          tooltip: 'bottomMiddle', // Use the corner...
          target: 'topMiddle' // ...and opposite corner
        }
      },
      show: {
        event: 'click mouseenter'
      },
      hide: {
        event: 'mouseleave',
        fixed: true
      },
      style: {
        tip: true,
        width: 450,
        border: {
          width: 2,
          radius: 0,
          color: '#4682B4'
        }
      }
    };

    var b2eHead = "false";
    var bandurl = "http://upp.csair.com/upp_payment/gateway/v20/oneKeyPayment.upp";
    var showBackUrl = "https://b2c.csair.com/B2C40/walletPayment/chargingCard/payingForCallback.ao";
    var payTypeFlag = "true";
    var lang = "ZH_CN";
    var needMerPayNo = 'N';
    var merAppId = '101';
    var merId = '100'; /*0710*/
    var lianxiren = '';
    var lianxirenPhone = '';
    var orderFlag = "ECARD";
    //var bankFlag="";
    //控制cybs脚本只添加一次，点击外卡支付 设置为false 
    var cybsJsOnload = true;
    var kjflagarray;
    var interval_id;
    var kjflag = "";
    kjflagarray = kjflag.split("|");
    var expirationDate = '有效日期';
    var walletbalance = '剩余金额 ';
    var Voucher = '代金券';
    var needbook = "N";
    var ffpPayFlag = false;

    // ***********  一  键 支付  2016-8 STRAT    ********************

    var uppPayNo;
    var token;
    var flagForQuickPay;

    //显示弹出提示框alertmsgDiv   alertmsgDiv   span   button_ok
    function alertMsgDiv(msg) {
      $("#alertmsgDiv").find("span").empty();
      $("#alertmsgDiv").find("span").text(msg);
      $("#alertmsgDiv").show();
    }


    //***********  一  键 支付 END    ********************



    function changeCmdType(id) {
      if ('creditR' == id) {
        $("#raCredit").attr("checked", true);
      } else if ('borrowCard' == id) {
        $("#raBorrow").attr("checked", true);
      }
      selectChannelId();
    }

    function selectChannelId() {
      var cmdType = $("input[name='cmdType']:checked");
      var flag = checkBankNum();
      if (kjflagarray.length > 1) {
        var j = true;
        for (var i = 0; i < kjflagarray.length; i++) {
          if (kjflagarray[i] == flag) {
            j = false;
            flag = kjflagarray[i];
          }
        }
        if (j && kjflagarray[0] != "") {
          flag = kjflagarray[0];
        }
      } else if (kjflagarray.length = 1 && kjflagarray[0] != "" && kjflagarray[0] != null && kjflagarray[0] !=
        undefined) {
        flag = kjflagarray[0];
      }


      if (flag == "SPDBI") {
        $("#BANK").attr("value", "SPDBI");
        $("#creditChannelId").attr("value", "250");
        $("#creditMOBILE").addClass("hide");
        $("#creditEXPIREMONTH").addClass("hide");
        $("#creditEXPIREYEAR").addClass("hide");
        $("#creditBUYERNAME").addClass("hide");
        $("#creditIDTYPE").addClass("hide");
        $("#creditIDCARD").addClass("hide");
        $("#creditCVV2").removeClass("hide");
      } else if (flag == "YIPA") {
        $("#creditChannelId").attr("value", "229");
        $("#creditMOBILE").removeClass("hide");
        if ("EposSale" == cmdType.val()) {
          $("#BANK").attr("value", "EposSale");
          $("#creditEXPIREMONTH").removeClass("hide");
          $("#creditEXPIREYEAR").removeClass("hide");
          $("#creditCVV2").removeClass("hide");

        } else if ("UOPF" == cmdType.val()) {
          // 			    alert("******  进入快捷支付一键支付   ******");
          $("#creditChannelId").attr("value", "223");
          $("#creditMOBILE").removeClass("hide");
          $("#BANK").attr("value", "UOPF"); // 设置id为 bank 的 属性值为 UOPF  
          $("#creditEXPIREMONTH").removeClass("hide");
          $("#creditEXPIREYEAR").removeClass("hide");
          $("#creditCVV2").removeClass("hide");

        } else {
          $("#BANK").attr("value", "EposDebitSaleNew");
          $("#creditCVV2").addClass("hide");
          $("#creditEXPIREMONTH").addClass("hide");
          $("#creditEXPIREYEAR").addClass("hide");
        }
        $("#creditBUYERNAME").removeClass("hide");
        $("#creditIDTYPE").removeClass("hide");
        $("#creditIDCARD").removeClass("hide");
      }
      /**屏蔽中行快捷支付入口
      else if(flag=="BOCI"){
      	$("#BANK").attr("value","BOCI");
      	$("#creditChannelId").attr("value","231");
      	$("#creditMOBILE").removeClass("hide");
      	$("#creditEXPIREMONTH").removeClass("hide");
      	$("#creditEXPIREYEAR").removeClass("hide");
      	$("#creditCVV2").removeClass("hide");
      	$("#creditBUYERNAME").addClass("hide");
      	$("#creditIDTYPE").addClass("hide");
      	$("#creditIDCARD").addClass("hide");
      }*/
      else if (flag == "BOCOM") {
        $("#BANK").attr("value", "BOCOM");
        $("#creditChannelId").attr("value", "321");
        $("#creditMOBILE").addClass("hide");
        $("#creditEXPIREMONTH").removeClass("hide");
        $("#creditCVV2").addClass("hide");
        $("#creditBUYERNAME").addClass("hide");
        $("#creditIDTYPE").addClass("hide");
        $("#creditIDCARD").addClass("hide");
      }
    }

    function checkResult() {
      var orderNO = $("#checkOrderNo").val();
      $.ajax({
        type: "POST",
        url: root + "/pay/checkPayResult.upp",
        data: {
          orderNo: orderNO,
          showBackUrl: showBackUrl,
          merappId: merAppId
        },
        success: function (data) {
          if (data.msg == '01') {
            //$("#confirm_window_box").addClass("hide");
            //$("#popbox").removeClass("hide");
          } else {
            if (data.indexOf("EncodeMsg") != -1) {
              var sytForm = $("#sytForm");
              sytForm.attr("target", "");
              sytForm.html(data);
            }
          }
        }
      });
    }
    $(function () {


      $("#cvvtip").qtip(qtip_cvv);
      $("#expiryTip").qtip(qtip_expiryDate);
      $(".fnameTip").qtip(qtip_fname);

      var myDate = new Date();
      var yyyy = myDate.getFullYear();
      var yyyy_int = parseInt(yyyy);
      /*初始化外卡有效期月份下拉框*/
      addWdpMonthOption("ExpiryDateM", "MM", "", 1);
      /*初始化外卡有效期年份下拉框*/
      addWdpYearOption("ExpiryDateY", "YY", 15);

      $("#ExpiryDateY").bind("change", function () {
        var curDate = new Date();
        /*当前年份 4位yyyy 如2019*/
        var curyear = curDate.getFullYear();
        /*当前月份 2位mm 如04*/
        var curMonth = myDate.getMonth() + 1;

        /*选中的年份4位yyyy 如2018*/
        var selYear = $("#ExpiryDateY option:selected").val();
        /*选中的月份 2位mm 如04*/
        var selmonth = $("#ExpiryDateM option:selected").val();
        /*如果选中的年份不是数字,设置为当前年份*/
        if (!parseInt(selYear)) {
          selYear = curyear;
        }
        /*比较 如果选中年份小于等于当前年份 显示当前月份-12的月份*/
        if (selYear <= curyear) {
          addWdpMonthOption("ExpiryDateM", "MM", selmonth, curMonth);
        } else {
          /*如果选中的年份大于当前年份显示1-12月份的选项*/
          addWdpMonthOption("ExpiryDateM", "MM", selmonth, 1);
        }

      });

      $(".billInfo_tr").hide();
      $("#CountryCode").val("00");
      $("#CountryCode").bind("change", function () {
        var val = $(this).val();
        if (val === "US" || val === "GB" || val === "CA") {
          $("#Province").remove();
          $(".billInfo_tr").show();
          if (val === "GB") {
            $("#Province_grandfather").hide();
            $("#Province_father").append("<div id='Province'></div>");

          }

          if (val === "CA") {
            $("#Province_grandfather").show();
            var ca_option =
              "<select name='Province' id='Province'><option value='00'>请选择</option><option value='AB'>Alberta</option><option value='BC'>British Columbia</option><option value='MB'>Manitoba </option><option value='NB'>New Brunswick</option><option value='NL'>Newfoundland and Labrador</option><option value='NT'>Northwest Territories </option><option value='NS'>Nova Scotia</option><option value='NU'>Nunavut</option><option value='ON'>Ontario</option><option value='PE'>Prince Edward Island</option><option value='QC'>Quebec</option><option value='SK'>Saskatchewan</option><option value='YT'>Yukon</option></select>";
            $("#Province_father").append(ca_option);
          }
          if (val === "US") {
            $("#Province_grandfather").show();
            var us_option =
              "<select name='Province' id='Province'><option value='00'>请选择</option><option value='AL'>Alabama</option><option value='AS'>Alaska</option><option value='AS'>American Samoa</option><option value='AZ'>Arizona</option><option value='AR'>Arkansas</option><option value='CA'>California</option><option value='CO'>Colorado</option><option value='CT'>Connecticut</option><option value='DE'>Delaware</option><option value='DC'>District of Columbia</option><option value='FM'>Federated States of Micronesia</option><option value='FL'>Florida</option><option value='GA'>Georgia</option><option value='GU'>Guam</option><option value='HI'>Hawaii</option><option value='ID'>Idaho</option><option value='IL'>Illinois</option><option value='IN'>Indiana</option><option value='IA'>Iowa</option><option value='KS'>Kansas</option><option value='KY'>Kentucky</option><option value='LA'>Louisiana</option><option value='ME'>Maine</option><option value='MH'>Marshall Islands</option><option value='MD'>Maryland</option><option value='MA'>Massachusetts</option><option value='MI'>Michigan</option><option value='MN'>Minnesota</option><option value='MS'>Mississippi</option><option value='MO'>Missouri</option><option value='MT'>Montana</option><option value='NE'>Nebraska</option><option value='NV'>Nevada</option><option value='NH'>New Hampshire</option><option value='NJ'>New Jersey</option><option value='NM'>New Mexico</option><option value='NY'>New York</option><option value='NC'>North Carolina</option><option value='ND'>North Dakota</option><option value='MP'>Northern Mariana Islands</option><option value='OH'>Ohio</option><option value='OK'>Oklahoma</option><option value='OR'>Oregon</option><option value='PW'>Palau</option><option value='PA'>Pennsylvania</option><option value='PR'>Puerto Rico</option><option value='RI'>Rhode Island</option><option value='SC'>South Carolina</option><option value='SD'>South Dakota</option><option value='TN'>Tennessee</option><option value='TX'>Texas</option><option value='UT'>Utah</option><option value='VT'>Vermont</option><option value='VI'>Virgin Islands</option><option value='VA'>Virginia</option><option value='WA'>Washington</option><option value='WV'>West Virginia</option><option value='WI'>Wisconsin</option><option value='WY'>Wyoming</option></select>";
            $("#Province_father").append(us_option);
          }
        } else {
          $(".billInfo_tr").hide();
        }

      });



      $("#confirm-window-wx").addClass("hide");
      $("#onclicktable").addClass("hide");
      $("#smsCodeIsNullMsg").addClass("hide");
      //$("#ffpConfirm").addClass("hide");
      clearchannletype('183', '南航钱包'); //初始化第一个支付类型的提示语
      if ($("#BANK").val() == "SPDBI") {
        $("#creditMOBILE").addClass("hide");
        $("#creditEXPIREMONTH").addClass("hide");
        $("#creditEXPIREYEAR").addClass("hide");
        $("#creditBUYERNAME").addClass("hide");
        $("#creditIDTYPE").addClass("hide");
        $("#creditIDCARD").addClass("hide");
      };

      // ************************  creditPaySendCode 阶段   开始      *************************************************************


      //creditPaySendCode 信用卡手机号输入框 class属性 
      $(".creditPaySendCode").bind("click", function () {
        $("#phoneTips").text("");
        if ($("#BANK").val() == "BOCOM") {
          flagForQuickPay = "BOCOM";
          var expireYear = $("#EXPIREYEAR").val();
          var expireMonth = $("#EXPIREMONTH").val();
          var yearReg = /^[0-9]{4}$/;
          var monthReg = /^[0-9]{2}$/;
          if (!monthReg.test(expireMonth)) {
            $("#phoneTips").text('有效期月不能为空');
            return;
          }
          if (!yearReg.test(expireYear)) {
            $("#phoneTips").text('有效期年不能为空');
            return;
          }
        } else if ($("#BANK").val() != "SPDBI") {
          if ($("#BANK").val() == "BOCI") {
            $("#creditChannelId").attr("value", "231");
          } else if ($("#BANK").val() == "UOPF") {
            $("#creditChannelId").attr("value", "223");
          } else {
            $("#creditChannelId").attr("value", "229");
          }
          var phone = $("#MOBILE").val();
          var reg = /^[1][34578]\d{9}$/;
          if (null == phone || phone.length < 1 || reg.test(phone) == false) {
            $("#phoneTips").text('请输入11位的手机号码！');
            return;
          }
        } else {
          $("#creditChannelId").attr("value", "250");
        }
        var data, url;
        var orderNo = $("#ItemNo").val();
        var creditChannelId = $("#creditChannelId").val();
        var ACCOUNTNO = $("#ACCOUNTNO").val();

        if ($("#BANK").val() == "BOCI") {
          flagForQuickPay = "BOCI";
        }

        // ************************   新 加  快捷支付 一键支付 代码     开始  ***************************************************************
        var IDTYPE = $("#IDTYPE").val();
        if ($("#BANK").val() == "UOPF" || creditChannelId == "229") {
          var form1 = document.getElementById("sytForm");
          var merId = form1.elements["merId"].value;
          var merAppId = form1.elements["merAppId"][0].value;
          var expireyear = $("#EXPIREYEAR").val();
          var expiremonth = $("#EXPIREMONTH").val();
          var twoNumOfYear = expireyear.toString().substr(2, 2);
          var phoneNumber = $("#MOBILE").val();
          var cardExpire = twoNumOfYear + $("#EXPIREMONTH").val();
          var cardCvn2 = $("#CVV").val();
          var IDCARD = document.getElementById("IDTYPE").options[0].text;
          var cardForId = $("#IDCARD").val();
          var buyName = $("#BUYERNAME").val();

          var cardTypeBC;

          try {
            var borrowCardcheck = $("#borrowCard").attr("checked");
            if (borrowCardcheck == 'checked' || borrowCardcheck == true) {
              cardTypeBC = "true";
            }
          } catch (err) {}

          // 	                     alert("bc =>"+cardTypeBC);
          $.ajax({
            type: "POST",
            cache: false,
            async: false,
            url: '/upp_payment/pay/GetChannelSYT.upp',
            data: {
              'merId': merId,
              'merAppId': merAppId,
              'chiChannelId': "100",
              'channelId': creditChannelId,
              'cardTypeBC': cardTypeBC,
              'IDTYPE': IDTYPE
            },
            success: function (data) {
              // 		 						  alert("  来到 里是表明 成功随机分配     开始进行下面的绑卡   data.respCode =>"+data.respCode );
              orderNo = form1.elements["ItemNo"].value;

              // 来到 223表明 分配网关给 一键支付  
              if (data.respCode == "223") {

                $("#creditChannelId").attr("value", "223");
                $("#BANK").attr("value", "UOPF");

                $.ajax({
                  type: "POST",
                  cache: false,
                  async: false,
                  url: '/upp_payment/gateway/v20/onePayBindCard.upp',
                  data: {
                    CARDNUMBER: ACCOUNTNO.replace(/\s/gi, ''),
                    PHONENUMBER: phoneNumber,
                    CARDEXPIRE: twoNumOfYear + '' + expiremonth, // 卡有效期   年月
                    CARDCVN2: cardCvn2,
                    CREDENTIALTYPE: "01", // 证件类型
                    CREDENTIALNUMER: cardForId, // 证件号码
                    CREDENTIALNAME: encodeURIComponent(buyName), // 姓名
                    TYPE: "BINDCARD"
                  },
                  success: function (data) {

                    if (data && data.respCode == 00 && data.token != null) {

                      token = data.token;
                      var args = $("#sytForm").serialize();

                      $.ajax({
                        url: root + "/pay/uppSyt/onclickauthSYT.upp?token=" + token,
                        type: "post",
                        data: args,
                        async: false,
                        dataType: "json",
                        cache: false,
                        success: function (data) {
                          $("#merPayNo").val(data.merPayNo);
                          $("#uppPayNo").val(data.uppPayNo);

                          if (data.respCode == "00") {

                            var countdown2 = 10;
                            $("#codeMsg").html("");
                            $("#buttonForCode").val('发送中');
                            //按钮置灰
                            $("#buttonForCode").attr("disabled", true);
                            $("#buttonForCode").removeAttr("onclick");
                            $("#buttonForCode").css("background-color", "#888888");
                            settimeUOPF(countdown2); //成功发送开始60秒倒计时

                            // 获取验证码成功会 显示   下面  html 里面的国格化了的 信息 
                            //				$("#codeMsg").html('短信验证码已经发送，请注意查收。');
                            $("#phoneTips").text('发送成功！');

                          } else {

                            if (data.respCode != "00") {

                              $("#phoneTips").text('获取失败' + "[" + data.respCode + "]");

                            } else if (data.errorMsg == 'bookFaile') {
                              $("#phoneTips").text('获取失败');
                            }
                          }
                          $("#uppPayNo").val(data.uppPayNo);
                        },
                        error: function (data) {
                          $("#phoneTips").text('获取失败');
                        }
                      });

                      // 不为 00 表示  绑卡操作  出现问题  
                    } else if (data.respCode != "00") {

                      if (data.respCode != "00") {

                        $("#phoneTips").text('获取失败' + "[" + data.respCode + "]");

                      } else {
                        $("#phoneTips").text('获取失败');
                      }

                    } else {
                      $("#phoneTips").text('获取失败');
                    }
                  },
                  error: function (data) {
                    $("#phoneTips").text('获取失败');
                  }
                });

                //  如果返回 的网关不是 223 那应该是 易宝的 229了 	  
              } else if (data.respCode != "223" && data.respCode == "229") {
                flagForQuickPay = "YIBO";
                $("#creditChannelId").attr("value", "229");
              } else {
                $("#phoneTips").text('获取失败');
                //$("#phoneTips").text('获取失败');
              }
            },
            error: function () {
              $("#phoneTips").text('获取失败');
            }
          });
        }

        // ************************   新 加  快捷支付 一键支付 代码 结束  *************************************************************	


        if (($("#BANK").val() == "BOCI" || $("#BANK").val() == "SPDBI" || $("#creditChannelId").val() ==
            "250" || $("#creditChannelId").val() == "229" || flagForQuickPay == "BOCI")) {


          if (flagForQuickPay == "YIBO") {
            $("#creditChannelId").attr("value", "229");
          }

          // 	 alert("creditChannelId =>"+creditChannelId+"--$( #BANK ).val()=>"+$("#BANK").val()+"--flagForQuickPay =>"+flagForQuickPay);
          if (flagForQuickPay == "BOCI" || creditChannelId == "231") {
            var txnAmt = '10';
            var txnTime = '2019-12-23 15:21:47';
            var merAppId = '101';
            url = "/upp_payment/mobileSyt/epay/sendBOCICode.upp";
            data = {
              'phone': phone,
              'lang': lang,
              'orderNo': orderNo,
              'sendTypeFlag': creditChannelId,
              'ACCOUNTNO': ACCOUNTNO,
              'merAppId': merAppId,
              'txnAmt': txnAmt,
              'txnTime': txnTime
            };
          } else if (creditChannelId == "250") {
            url = "/upp_payment/mobileSyt/epay/sendCode.upp";
            data = {
              'phone': phone,
              'lang': lang,
              'orderNo': orderNo,
              'sendTypeFlag': creditChannelId,
              'ACCOUNTNO': ACCOUNTNO
            };
          } else if (flagForQuickPay == "YIBO" || $("#creditChannelId").val() == "229") {
            if (!validataCreidtCardInfo("code")) {
              return;
            }
            /*if($("#BANK").val() == "EposDebitSaleNew"){
	 					url = "/upp_payment/mobileSyt/epay/sendDebitSaleCode.upp"
	 				}else{
	 					url = "/upp_payment/mobileSyt/epay/sendCode.upp";
	 				} */
            url = "/upp_payment/mobileSyt/epay/sendCode.upp";
            data = $("#sytForm").serialize();

          }
          $.ajax({
            type: "POST",
            cache: false,
            url: url,
            data: data,
            success: function (data) {
              if (data.msg != '00') {
                if ($("#BANK").val() == "BOCI") {
                  $("#phoneTips").text('获取失败');
                } else {
                  if (data.msg.indexOf("00|") > -1) {
                    var msgs = data.msg.split("|");
                    var resultText = '短信发送太频繁，请 {1}s 后再试!';
                    resultText = resultText.replace("{1}", msgs[1]);
                    $("#phoneTips").text(resultText);
                  } else {
                    $("#phoneTips").text('获取失败');
                  }
                }
              } else if (data.msg == '00') {

                $("#phoneTips").text('发送成功！');
                if ($("#BANK").val() == "BOCI" || flagForQuickPay == "YIBO") {
                  /*mark || data.respType =="EposDebitSaleNew"*/

                  $("#uppPayNo").val(data.uppPayNo);
                  $("#dataStr").val(data.dataStr);
                }
              }
            },
            error: function () {
              $("#phoneTips").text('获取失败');
            }
          });
        }

        if (($("#BANK").val() == "BOCOM" || $("#creditChannelId").val() == "321")) {
          var expireYear = $("#EXPIREYEAR").val();
          var expireMonth = $("#EXPIREMONTH").val();
          var twoNumOfYear = expireYear.toString().substr(2, 2);
          var amount = '10';
          var merAppId = '101';
          url = "/upp_payment/pay/sendBOCOMCode.upp";
          data = {
            'ACCOUNTNO': ACCOUNTNO,
            'EXPIREYEAR': twoNumOfYear,
            'EXPIREMONTH': expireMonth,
            'AMOUNT': amount,
            'merAppId': merAppId
          };
          $.ajax({
            type: "POST",
            cache: false,
            url: url,
            data: data,
            success: function (data) {
              if (data.msg == "00") {
                $("#phoneTips").text('发送成功！');
                if ($("#BANK").val() == "BOCOM") {
                  var countDown = 300;
                  $("#codeMsg").html("");
                  $("#buttonForCode").val('发送中');
                  //按钮置灰
                  $("#buttonForCode").attr("disabled", true);
                  $("#buttonForCode").removeAttr("onclick");
                  $("#buttonForCode").css("background-color", "#888888");
                  $("#phoneTips").text('发送成功！');
                  $("#uppPayNo").val(data.uppPayNo);
                  $("#dataStr").val(data.serialNum);
                  $("#invioceNo").val(data.invioceNo);
                  settimeUOPF(countDown); //成功发送开始300秒倒计时
                }
              } else {
                $("#phoneTips").text('获取失败');
              }
            },
            error: function () {
              $("#phoneTips").text('获取失败');
            }
          });
        }

      });
      // ************************  creditPaySendCode 阶段  结束     *************************************************************

      var $li = $("#upp_pay_tab>ul>li");
      $li.each(function () {
        if ("current" == $(this).attr("class") && $(this).html().indexOf('快捷支付') > -1) {
          if ($("#BANK").val() == "SPDBI") {
            $("#creditChannelId").attr("value", "250");
          } else {
            $("#creditChannelId").attr("value", "229");
          }
        }
      });
      $li.bind("click", function () {
        var radio = $("input[name='radioChannel']:checked").val();
        $("#balancePay").val("0");
        $("#smsCodeIsNullMsg").addClass("hide");
        if (radio != 224) {
          $("#balancevoucher").addClass("hide");
          $("#voucherdiv").addClass("hide");
          $("#blancePasswdInput").addClass("hide");
        }
        if (radio != 223) {
          $("#onclicktable").addClass("hide");
        }
        $li.removeClass("current");
        $(this).addClass("current");
        var dv = $(this).attr("data-value");
        var text = $(this).html();

        if (text.indexOf('找人代付') > -1 || text.indexOf('Third party payment') > -1) {
          $(".upp_pay_sub").hide();
        } else {
          $(".upp_pay_sub").show();
        }
        if (text.indexOf('快捷支付') > -1 || text.indexOf('Credit Card Payment') > -1) {
          selectChannelId();
        } else {
          $("#creditChannelId").val("");
        }
        if (text.indexOf('线下POS') > -1 || text.indexOf('Offline pos') > -1) {
          $("#posPayRadio").attr("checked", true);
          $("#payDiv").hide();
        } else {
          $("#pos_billNo").html('请在新打开的网页上完成支付');
          $("#payDiv").show();
        }
        if (text.indexOf('南航钱包') > -1 || text.indexOf('My Wallet') > -1 || text.indexOf('我的钱包') > -1) {
          $("#balancePay").val("0");
        }
        //WDPCYBS
        var w = $(this).find("a").first().text();
        if (w === '国外银行卡' || w === 'International card payment' || w === '外卡支付') {
          $("#PaymentType").val("4");
          if (cybsJsOnload) {
            //页面加载 为true  第一次点击外卡支付 设置为 false  只加载一次cybs脚本
            cybsJsOnload = false;
            //加载cybs脚本
            $(document.body).append(
              "<p style='background:url(https://h.online-metrix.net/fp/clear.png?org_id=k8vif92e&amp;session_id=csair_11577085756787&amp;m=1)' />"
              );
            $(document.body).append(
              "<img src='https://h.online-metrix.net/fp/clear.png?org_id=k8vif92e&session_id=csair_11577085756787&m=2' alt=''>"
              );
            $(document.body).append(
              "<object type='application/x-shockwave-flash' data='https://h.online-metrix.net/fp/fp.swf?org_id=k8vif92e&amp;session_id=csair_11577085756787' width='1' height='1' id='thm_fp'><param name='movie' value='https://h.online-metrix.net/fp/fp.swf?org_id=k8vif92e&amp;session_id=csair_11577085756787' /></object>"
              );
            $(document.body).append(
              "<script src='https://h.online-metrix.net/fp/check.js?org_id=csair_1&amp;session_id=csair_11577085756787' type='text/javascript' />"
              );
          }
        } else {
          // 				alert('不是外卡支付');
          $("#PaymentType").val("3");
          $(".qtip-content").each(function () {
            $(this).hide();
          });
          $(".qtip-tip").each(function () {
            $(this).hide();
          });

          /*qtip插件隐藏后，cvvtip  expiryTip  fnameTip 要重新设置*/
          $("#cvvtip").qtip(qtip_cvv);
          $("#expiryTip").qtip(qtip_expiryDate);
          $(".fnameTip").qtip(qtip_fname);
        }
        if (text.indexOf('里程支付') > -1 || text.indexOf('Mileage payment') > -1) {
          $("#creditChannelId").attr("value", "240");
        }

        $("#upp_pay_icon>ul").each(function () {
          var dataValue = $(this).attr("data-value");
          if (dataValue == dv) {
            $(this).show();
          } else {
            $(this).hide();
          }
        });
      });
      $("#onePayList>li>.onePayadd").bind("click", function () {
        $("#graydiv").width($(document).width());
        $("#graydiv").height($(document).height());
        $("#graydiv").show();
        $("#graydivBox").show();
      });
      $("#onePayColse").bind("click", function () {
        $("input[name='one_carid']").val("");
        $("select[name='one_moth']").val("");
        $("select[name='one_year']").val("");
        $("input[name='one_carcode']").val("");
        $("input[name='one_tel']").val("");
        $("input[name='one_telcode']").val("");
        $("input[name='error']").val("");
        $("#graydiv").hide();
        $("#graydivBox").hide();
        //重新加载
        location.reload();
      });

      $("#upp_pay_icon ul").each(
        function () {
          var rootpath = '/upp_payment';
          var orderNo = 'GO1912230068226';
          var amount = '10';
          var callbackurl = 'https://b2c.csair.com/B2C40/walletPayment/chargingCard/payingForCallback.ao';
          var $thli = $(this).find("li");
          $thli.bind("click", function () {
            $thli.each(function () {
              $(this).find("input[type='radio']").prop("checked",
                "false");
            });
            $(this).find("input[type='radio']").prop("checked",
              "checked");
            //微信扫码
            if ($(this).find("input[type='radio']").val() == 249) {
              $(".imgBox").find("img").remove();
              $(".imgBox").append("<img src=" + rootpath + "/pay/uppwxsm.upp?merAppId=" + merAppId +
                "&merId=" + merId + "&orderFlag=" + orderFlag + "&needMerPayNo=" + needMerPayNo +
                "&orderNo=" + orderNo + "&amount=" + amount + "&callBackUrl=" + callbackurl + " alt=''>"
                ); /**0710*/
              $(".window-bg").removeClass("hide");
              $("#confirm-window-wx").removeClass("hide");
              interval_id = window.setInterval("checkResult()", 3000);
            }
            $("#ICBCCNotice").addClass("hide");
            $("#CCBNotice").addClass("hide");
            $("#CMBNotice").addClass("hide");
            $("#GDBNotice").addClass("hide");
            $("#BOCNotice").addClass("hide");
            $("#SPDBANotice").addClass("hide");
            $("#ABCNotice").addClass("hide");
            if ($(this).find("input[type='radio']").val() == 'bank002') { //工行
              $("#ICBCCNotice").removeClass("hide");
            } else if ($(this).find("input[type='radio']").val() == 'bank003') { //建行
              $("#CCBNotice").removeClass("hide");
            } else if ($(this).find("input[type='radio']").val() == 'bank001') { //招行
              $("#CMBNotice").removeClass("hide");
            } else if ($(this).find("input[type='radio']").val() == 'bank007') { //广发
              $("#GDBNotice").removeClass("hide");
            } else if ($(this).find("input[type='radio']").val() == 'bank004') { //中行
              $("#BOCNotice").removeClass("hide");
            } else if ($(this).find("input[type='radio']").val() == 'bank012') { //浦发
              $("#SPDBANotice").removeClass("hide");
            } else if ($(this).find("input[type='radio']").val() == 'bank005') { //农行
              $("#ABCNotice").removeClass("hide");
            }
          });
        });

      $.fn.numeral = function () {
        $(this).css("ime-mode", "disabled");
        this.bind("keypress", function (e) {
          var code = (e.keyCode ? e.keyCode : e.which); //兼容火狐 IE
          if (!$.browser.msie && (e.keyCode == 0x8)) //火狐下不能使用退格键
          {
            return;
          }
          return code >= 48 && code <= 57;
        });
        this.bind("blur", function () {
          if (this.value.lastIndexOf(".") == (this.value.length - 1)) {
            this.value = this.value.substr(0, this.value.length - 1);
          } else if (isNaN(this.value)) {
            this.value = "";
          }
        });
        this.bind("paste", function () {
          var s = clipboardData.getData('text');
          if (!/\D/.test(s))
          ;
          value = s.replace(/^0*/, '');
          return false;
        });
        this.bind("dragenter", function () {
          return false;
        });
        this.bind("keyup", function () {
          if (/(^0+)/.test(this.value)) {
            this.value = this.value.replace(/^0*/, '');
          }
        });

      };


      var now = new Date();
      var tmpDate;
      //头部和底部
      var sCountry = 'ZH_CN'.substring(0, 2);
      if (b2eHead != "true") {
        headfooter(sCountry.toLowerCase());
      }
      countdown(); //倒计时

      $("#btn_wdqb_check").bind("click", function () {
        if ($(this).attr("class") == 'check') {
          $(this).addClass("checked");
          $("#balancePay").val(1);
          $("#qb_pwd_input").removeClass('hide');
          $("#qb_pwd_input").show();
        } else {
          $("#balancePay").val(0);
          $(this).removeClass("checked");
          $("#qb_pwd_input").addClass('hide');
        }
      });

      $("#failure_btn").bind("click", function () {
        var orderNO = $("#checkOrderNo").val();
        $.ajax({
          type: "POST",
          url: root + "/pay/checkPayResult.upp",
          data: {
            orderNo: orderNO,
            showBackUrl: showBackUrl,
            merappId: merAppId
          },
          success: function (data) {
            if (data.msg == '01') {
              $("#confirm_window_box").addClass("hide");
            } else {
              if (data.indexOf("EncodeMsg") != -1) {
                var sytForm = $("#sytForm");
                sytForm.attr("target", "");
                sytForm.html(data);
              }
            }
          }
        });
      });

      $("#failure_mile_btn").bind("click", function () {
        $("#confirm_window_box_mile").addClass("hide");
      });

      $("#failure_wxbtn").bind("click", function () {
        window.clearInterval(interval_id);
        var orderNO = $("#checkOrderNo").val();
        $.ajax({
          type: "POST",
          url: root + "/pay/checkPayResult.upp",
          data: {
            orderNo: orderNO,
            showBackUrl: showBackUrl,
            merappId: merAppId
          },
          success: function (data) {
            $(".window-bg").addClass("hide");
            if (data.msg == '01') {
              $("#confirm-window-wx").addClass("hide");
            } else {
              if (data.indexOf("EncodeMsg") != -1) {
                var sytForm = $("#sytForm");
                sytForm.attr("target", "");
                sytForm.html(data);
              }
            }
          }
        });
      });

      $(".Phonepay").bind("click", function () {
        $("#phonePayForm").show();
      });

      $("#sendMsgButton").bind("click", function () {
        var sendMsgBox = $("#sendMsgBox");
        var sendMsgButton = $("#sendMsgButton");
        var sendPhone = $("#sendPhone");
        var phone = sendPhone.val();
        var reg = /^[1][34578]\d{9}$/;
        if (null == phone || phone.length < 1) {
          sendMsgBox.find(".error").text('请输入手机号码!');
          return;
        } else if (reg.test(phone) == false) {
          sendMsgBox.find(".error").text('手机号码有误，请重新输入。');
          return;
        } else {
          sendMsgBox.find(".error").text("");
          var orderNO = $("#ItemNo").val();
          var phoneUrl = $("#phoneSendUrl").val();
          var payMoney = $("#payMoney").text();
          sendMsgBox.find(".SMScontent").addClass("loadding");
          sendMsgButton.attr("disabled", "true");
          sendPhone.attr("readonly", "true");
          $.ajax({
            type: "POST",
            url: root + "/pay/sendPayfor.upp",
            data: {
              orderNo: orderNO,
              sendPhone: phone,
              phoneUrl: phoneUrl,
              name: lianxiren,
              phone: lianxirenPhone,
              payMoney: payMoney
            },
            success: function (data) {
              if (data.msg != '00') {
                sendMsgBox.find(".SMScontent").removeClass("loadding");
                sendMsgButton.removeAttr("disabled");
                sendPhone.removeAttr("readonly");
                if (data.msg == 'ten') {
                  sendMsgBox.find(".error").text('发送的信息不能超过10条');
                } else if (data.msg.indexOf("00|") > -1) {
                  var msgs = data.msg.split("|");
                  var resultText = '短信发送太频繁，请 {1}s 后再试!';
                  resultText = resultText.replace("{1}", msgs[1]);
                  sendMsgBox.find(".error").text(resultText);
                } else {
                  sendMsgBox.find(".error").text('发送失败！');
                }
              } else {
                sendMsgBox.find(".SMScontent").removeClass("loadding");
                sendMsgButton.removeAttr("disabled");
                sendPhone.removeAttr("readonly");
                //sendMsgBox.find(".error").text('发送成功！');
                sendMsgBox.addClass("hide");
                $("#successSendMsgBox").removeClass("hide");
              }
            },
            error: function () {
              sendMsgBox.find(".SMScontent").removeClass("loadding");
              sendMsgButton.removeAttr("disabled");
              sendPhone.removeAttr("readonly");
              sendMsgBox.find(".error").text('发送失败！');
            }
          });
        }
      });
      $("#alert_box_goon").bind("click", function () {
        $("#alert_box").addClass("hide");
      });

      $("#sendDXMsg").bind("click", function () {
        $("#sendMsgBox").removeClass("hide");
      });
      $("#anotherPaySMSClose").bind("click", function () {
        $("#sendMsgBox").addClass("hide");
      });
      $("#successPaySMSClose").bind("click", function () {
        $("#successSendMsgBox").addClass("hide");
      });
      $("#success_confirm").bind("click", function () {
        $("#successSendMsgBox").addClass("hide");
      });
      $("#df-checkbox").on("click", function (e) {
        var $this = $(this),
          terms = $("#terms");
        $this.toggleClass('checked');
        var checked = $this.hasClass('checked');
        terms.attr("checked", checked);
      });

      $("#cf_copyBtn").bind("click", function () {
        var text = $("#cf_copyBtn_val").val();
        copyToClipboard(text);
      });

      $("#succeed_btn").bind("click", function () {
        var orderNO = $("#checkOrderNo").val();
        $.ajax({
          type: "POST",
          url: root + "/pay/checkPayResult.upp",
          data: {
            orderNo: orderNO,
            showBackUrl: showBackUrl,
            merappId: merAppId
          },
          success: function (data) {
            if (data.msg == '01') {
              $("#confirm_window_box").addClass("hide");
              $("#popbox").removeClass("hide");
            } else {
              if (data.indexOf("EncodeMsg") != -1) {
                var sytForm = $("#sytForm");
                sytForm.attr("target", "");
                sytForm.html(data);
              }
            }
          }
        });
      });


      $("#succeed_wxbtn").bind("click", function () {
        window.clearInterval(interval_id);
        var orderNO = $("#checkOrderNo").val();
        $.ajax({
          type: "POST",
          url: root + "/pay/checkPayResult.upp",
          data: {
            orderNo: orderNO,
            showBackUrl: showBackUrl,
            merappId: merAppId
          },
          success: function (data) {
            $(".window-bg").addClass("hide");
            if (data.msg == '01') {
              $("#confirm-window-wx").addClass("hide");
              $("#popbox").removeClass("hide");
            } else {
              if (data.indexOf("EncodeMsg") != -1) {
                var sytForm = $("#sytForm");
                sytForm.attr("target", "");
                sytForm.html(data);
              }
            }
          }
        });
      });



      $(".df_fresh").bind("click", function () {
        var orderNO = $("#checkOrderNo").val();
        $.ajax({
          type: "POST",
          url: root + "/pay/checkPayResult.upp",
          data: {
            orderNo: orderNO,
            showBackUrl: showBackUrl,
            merappId: merAppId
          },
          success: function (data) {
            if (data.msg == '01') {
              location.reload();
            } else {
              if (data.indexOf("EncodeMsg") != -1) {
                var sytForm = $("#sytForm");
                sytForm.attr("target", "");
                sytForm.html(data);
              }
            }
          }
        });
      });

      $("#btnsty1").bind("click", function () {
        $("#popbox").addClass("hide");
      });
      $("#reOrderNo").bind("click", function () {
        if ("YGZQ" == orderFlag) {
          window.location.href = "http://b2e.csair.com/czso/indexDeal.do";
        } else if ("ECARD" == orderFlag) {
          window.location.href = "https://b2c.csair.com/B2C40/modules/ordernew/prepaidCard/prepaidCard.html";
        } else {
          window.location.href = "https://b2c.csair.com/B2C40/modules/bookingnew/manage/ticket_booking.jsp";
        }
      });
      if ("EN_US" == lang) {
        $(".cubox").attr("class", "cuboxen");
        $(".infodt").attr("class", "infodten");
        $("#anotherpayTipBox").attr("class", "anotherpay-tipbox-en hide");
        $("#upp_pay_tab>ul>li>a").attr("style", "font-size:14px;padding:0 8px;");
      }
      if (payTypeFlag == "false") {
        $(".quick-entry").addClass("hide");
        $("#anotherpayTipBox").removeClass("hide");
      }
      $(".bankImage").bind("click", function () {
        $("#onclicktable").removeClass("hide");
      });
      $(".upp_onclickradio").bind("click", function () {
        $("#onclicktable").removeClass("hide");
        $("#smsCodeIsNullMsg").removeClass("hide");
      });
      $(".upp_radio").bind("click", function () {
        $("#onclicktable").addClass("hide");
        $("#smsCodeIsNullMsg").addClass("hide");
      });
      //默认浦发
      for (var i = 0; i < kjflagarray.length; i++) {
        selectChannelId();
      }
      try {
        var firText = $("#upp_pay_tab>ul>li:first").text();
        if (firText.indexOf('快捷支付') == -1 || firText.indexOf('Credit Card Payment') == -1) {
          $("#creditChannelId").val("");
        }
      } catch (e) {}

      //加载里程扣减
      var currency = 'CNY';
      if (currency == "MIL") {
        $("#creditChannelId").attr("value", "240");
        var amount = '10';
        $("#payDiv").show();
        $("#mileageNeeded").html(amount);
        $("#ffpSumlcConfirm").html(amount);
        $("#payMoney").html(amount);
        //$("#milCodeTab").show();
        $("#milCodeTab").html('<tr>' +
          '<td><span style="color: red">*</span>验证码</td>' +
          '<td><label><input class="ffp_phone" type="text" name="ffp_phone" value=""/></label>&nbsp;&nbsp;<input style="float: right;" type="button"  value="获取验证码" class="onePayMsend2"><label class="onePayMsno"></label></td>' +
          '<td id="posPayMsg" style="color: red;"></td>' +
          '</tr>');

        //************************ 里程兑换短信发送 开始 ***********************************************************
        $(".onePayMsend2").bind("click", function () {
          var radio = $("input[name='radioChannel']:checked").val();
          if (radio == 350) {
            ffpNo = $("#mileCardNo").val();
            if (ffpNo == "") {
              $(".ffp_message").html('明珠卡号不能为空！');
              return;
            }
          }
          $.ajax({
            type: "POST",
            cache: false,
            url: '/upp_payment/pay/ffpSendCode.upp',
            data: {
              phone: ffpMobile,
              ffpNo: ffpNo
            },
            success: function (data) {
              if (data.msg == "00") {
                $(".ffp_message").html('短信验证码已经发送，请注意查收。');
              } else if (data.msg == "02") {
                $(".ffp_message").html('短信发送失败!');
              } else {
                $(".ffp_message").html(data.msg);
              }
            }
          });
        });
        //************************ 里程兑换短信发送 结束 ***********************************************************
        /*    }
	 		}); */
      }
    });

    //倒计时
    function countdown() {
      /* 此倒计时方案，忽略两个系统的时差，如果有时差将不准确 */
      var cdTime = parseInt('1750666'); //倒计时时间，总毫秒数
      var interval = 1000; //刷新提示的时间间隔：1000毫秒，即1秒
      var msg1;
      setTimeout(function () {
        var d, h, m, s;
        var tip = "";
        cdTime = cdTime - interval;
        if (cdTime > interval) {
          d = Math.floor(cdTime / 1000 / 60 / 60 / 24);
          h = Math.floor((cdTime - d * 24 * 60 * 60 * 1000) / 1000 / 60 / 60);
          m = Math.floor((cdTime - d * 24 * 60 * 60 * 1000 - h * 60 * 60 * 1000) / 1000 / 60);
          s = Math.floor((cdTime - d * 24 * 60 * 60 * 1000 - h * 60 * 60 * 1000 - m * 1000 * 60) / 1000);
          var hflag = false;
          if (h > 0) {
            hflag = true;
          };
          h = h < 10 ? "0" + h : "" + h; //时
          m = m < 10 ? "0" + m : "" + m; //分
          s = s < 10 ? "0" + s : "" + s; //秒
          //设置新的定时器，执行函数为当前函数，arguments.callee为当前函数的引用。

          if ("ZH_CN" == lang) {
            if (hflag) {
              tip += h + "小时&nbsp" + m + "分&nbsp" + s + "秒";
            } else {
              tip += m + "分&nbsp" + s + "秒";
            }
            if (d > 0) {
              tip = d + "天&nbsp" + tip;
            }
            msg1 = '请在<b>' + tip + '</b>内完成支付';
          } else if ("EN_US" == lang) {
            if (hflag) {
              tip += h + ":" + m + ":" + s;
            } else {
              tip += m + ":" + s;
            }
            if (d > 0) {
              tip = d + "d&nbsp" + tip;
            }
            msg1 = '剩余支付时间:<b>' + tip + '</b>';
          }
          $("#second_msg").html(msg1);
          setTimeout(arguments.callee, interval);
        } else {
          var orderNO = $("#checkOrderNo").val();
          $.ajax({
            type: "POST",
            url: root + "/pay/checkPayResult.upp",
            data: {
              orderNo: orderNO,
              showBackUrl: showBackUrl,
              merappId: merAppId
            },
            success: function (data) {
              if (data.msg != '01') {
                if (data.indexOf("EncodeMsg") != -1) {
                  var sytForm = $("#sytForm");
                  sytForm.attr("target", "");
                  sytForm.html(data);
                }
              }
            }
          });
          tip = '付款期限已过请重新下单!';
          $("#first_msg").html(tip);
          $("#second_msg").html("");
          $("#wdqb-pay-tab").hide(); //屏蔽余额支付
          $("#upp_pay_tab").hide();
          $("#upp_pay_icon").hide();
          $("#hiddenBtnBox").show();
        }
      }, interval);
    }

    function returnHome() {
      document.sytForm.action = "http://www.csair.com";
      document.sytForm.submit();
    }

    var flag_oneKey;
    var flag_oneKeyMsg;
    var flag_oneKeyMsg3;

    function gotoPay() {
      //避免提示错误
      $(".info2").text('支付失败！');
      if (payTypeFlag == "false") {
        var check = $("#terms").attr("checked");
        if (check == "checked" || check == true) {
          //alert(check);
        } else {
          $("#alert_box").removeClass("hide");
          return false;
        }

      }
      var langTypeStr = '国内';
      if (typeof (dcsPageTrack) == "function") {
        dcsPageTrack("WT.si_n", "机票预订-" + langTypeStr + "", true, "WT.si_p", "支付订单", true);
      }

      var type = $("#balancePay").val();
      var creditChannelId = $("#creditChannelId").val();
      // 获取选择的 radio 的值。 
      var radio = $("input[name='radioChannel']:checked").val();
      var raidoindex = -1;

      if (radio == '141' && bzjPayFlag) {
        bzjPayFlag = false;
        $(".b2b-confirm-window-box").removeClass("hide");
        return;
      }

      if (creditChannelId == '240' || radio == 350) { //里程支付
        // 数据验证
        var ffp_phone = $(".ffp_phone").val();
        if (radio == 350) {
          var mileCardNo = $("#mileCardNo").val();
          var mileCardName = $("#mileCardName").val();
          var mileIDCardNo = $("#mileIDCardNo").val();
          if (mileCardNo == "") {
            $(".ffp_message").html('明珠卡号不能为空！');
            return;
          }
          if (mileCardName == "") {
            $(".ffp_message").html('姓名不能为空！');
            return;
          }
          if (mileIDCardNo == "") {
            $(".ffp_message").html('身份证号不能为空！');
            return;
          }
          if (ffp_phone == "") {
            $(".ffp_message").html('验证码不能为空！');
            return;
          }
        }

        $(".payButton").removeAttr("onclick");
        $(".payButton").css("background-color", "#888888");

        if (!ffpPayFlag) {
          $(".ffp_message").html('');
          openFfpWindow();
          return;
        }

        $("#ffpConfirm").addClass("hide");
        $("#ffpMsgCode").val(ffp_phone);
        if (radio == 350) {
          $("#ffpType").val("mileStore"); //商城
        } else {
          $("#ffpType").val("voyageFfp"); //非航段里程支付标示
        }
        var args = $("#sytForm").serialize();
        $("#pro").show();
        $.ajax({
          type: "POST",
          url: "/upp_payment/pay/ffpPayexecute.upp",
          data: args,
          success: function (data) {
            if (data.respCode == "00") {
              //window.location.href=data.msg;
              var sytForm = $("#sytForm");
              sytForm.attr("target", "");
              sytForm.html(data.msg);
            } else {
              $("#pro").hide();
              $(".payButton").attr("onclick", "gotoPay()");
              $(".payButton").css("background-color", "#ee1b2f");
              if (lang == 'ZH_CN') {
                $("#failure_mile_msg").html(data.respCode);
              } else {
                if (data.respCode.indexOf("000002") == 0) {
                  $("#failure_mile_msg").html('???mileReturnError000002???');
                } else if (data.respCode.indexOf("000017") == 0) {
                  $("#failure_mile_msg").html('???mileReturnError000017???');
                } else {
                  $("#failure_mile_msg").html('???mileReturnError00000x???');
                }
                //$("#failure_mile_msg").html('???ffpHintMsgEn???');
              }

              if (radio == 350) {
                $("#confirm_window_box_mile").removeClass("hide"); //商城
              } else {
                if (lang == 'ZH_CN') {
                  $(".infodt").html(data.respCode);
                } else {
                  if (data.respCode.indexOf("000002") == 0) {
                    $(".infodten").html('???mileReturnError000002???');
                  } else if (data.respCode.indexOf("000017") == 0) {
                    $(".infodten").html('???mileReturnError000017???');
                  } else {
                    $(".infodten").html('???mileReturnError00000x???');
                  }
                }
                $("#popbox").removeClass("hide"); //非航段里程支付标示
              }

            }
          }
        });
        ffpPayFlag = false;
        return;
      }

      if (radio == 105) {
        var args = $("#sytForm").serialize();
        $.ajax({
          type: "POST",
          url: "/upp_payment/gateway/v10/getOrderC.upp",
          data: args,
          success: function (data) {
            var sytForm = $("#sytForm");
            sytForm.attr("target", "");
            sytForm.html(data);
          }
        });
        return;
      }

      if (radio == 224) { //余额支付
        type = 1;
        var balance = parseInt('');
        var orderBalance = parseInt($("#payMoney").text());
        var voucherBalanceSum = parseInt($("#voucherMoney").text());
        if (voucherBalanceSum + balance < orderBalance) { //判断余额+代金券够不够支付
          $("#openblanceError").removeClass("hide");
          return;
        }
        var voucherJsonStr = "";
        var strArray;
        var cardno = "";
        voucherJsonStr += "[";
        $(".item-info").each(function () {
          var chooseFlag = $(this).hasClass("choose");
          if (chooseFlag) {
            cardno = $(this).find("input.voucher_cardno").val();
            voucherJsonStr += "{'cardno':" + cardno + "},";
          }
        })
        //去掉最后一个逗号
        if (voucherJsonStr.length > 0) {
          voucherJsonStr = voucherJsonStr.substr(0, voucherJsonStr.length - 1);
        }
        voucherJsonStr += "]";
        //勾选了代金券才赋值
        if (voucherJsonStr.length > 1) {
          $("#lostListNo").val(voucherJsonStr);
        } else {
          $("#lostListNo").val("");
        }
        var input_psw = $("#input_psw").val();
        var jsPublicKey = $("#jsPublicKey").val();
        var exponent = $("#exponent").val();
        var rsa = new RSAKey();
        rsa.setPublic(jsPublicKey, exponent);
        var res = rsa.encrypt(input_psw);
        //var md5_psw = hex_md5(input_psw).toUpperCase();
        //$("#input_psw").val(md5_psw);
        $("#input_psw").val(res);
      } else if (radio == 223) {
        type = 1;
        //一键支付选中银行
        var mybankcode = $("#myBankSelect option:selected").val();
        if (mybankcode != null) {
          $("#mybankcode").val(mybankcode);
          raidoindex = mybankcode.indexOf("PAYBILL");
        }
      } else if (radio == 260) {
        type = 1;
        //pos支付
        var posphone = $("#pos_phone").val();
        if (posphone != "") {
          $("#posPayMsg").html("");
          $("#posFlag").val("true");
        } else {
          $("#posFlag").val("true");
          $("#posPayMsg").html("手机号不能为空");
          return;
        }
      } else {
        type = 0;
      }

      //如果是微信支付就不往下走
      if (radio == 249) {
        return;
      }

      /* 		if(radio != null || radio != undefined){
      			raidoindex = radio.indexOf("PAYBILL");
      		} */
      var one_verifycode = $("#one_verifycode").val();
      $("#smsCode").val(one_verifycode);
      if (type == 1 || raidoindex != -1) {
        $("#ontelcodemsg").html("");
        //支付将支付按钮置灰
        $(".payButton").removeAttr("onclick");
        $(".payButton").css("background-color", "#888888");
        $("#pro").show();
        var args = $("#sytForm").serialize();
        var url = "";
        if (raidoindex == "0") { //一键执行支付
          if (one_verifycode == "") {
            $("#pro").hide();
            $(".payButton").attr("onclick", "gotoPay()");
            $(".payButton").css("background-color", "#ee1b2f");
            $("#smsCodeIsNullMsg").removeClass("hide");
            return;
          }

          var reg = new RegExp("^[0-9]{6}$");
          if (!reg.test(one_verifycode)) {
            $("#pro").hide();
            $(".payButton").attr("onclick", "gotoPay()");
            $(".payButton").css("background-color", "#ee1b2f");
            $("#ontelcodemsg").html('请输入正确的6位数字验证码');
            return;
          }

        }
        $.ajax({
          type: "POST",
          url: root + "/pay/uppDoPay.upp",
          data: args,
          success: function (data) {
            var locale = 'ZH_CN';
            $(".payButton").attr("onclick", "gotoPay()");
            $(".payButton").css("background-color", "#ee1b2f");
            if (data.msg == '86') { //一键支付短信码验证错误
              $("#ontelcodemsg").html('短信验证码错误');
            }
            if (data.msg == 'pos') { //pos支付返回
              $("#pro").hide();
              $("#confirm_window_box").removeClass("hide");
              if (data.bill_no != "null") {
                $("#pos_billNo").html("账单支付流水号：" + data.bill_no + "");
              } else {
                $("#pos_billNo").html("账单流水号：账单生成失败!");
              }
              return;
            }
            if (data.errorMsg == 'bookFaile') {
              if (typeof (dcsPageTrack) == "function") {
                dcsPageTrack("WT.si_n", "机票预订-" + langTypeStr + "", true, "WT.si_p", "生成PNR失败", true,
                  "WT.error_msg", "生成PNR失败", true);
              }
              $(".info2").text('订座失败，请重新订票。');
              $("#confirm_window_box").addClass("hide");
              $("#popbox").removeClass("hide");
            }
            if (data.respCode == '0637') {
              $(".info2").text('您的钱包支付功能已被锁定。请于第二天零点后重试或者进入【我的钱包】找回支付密码。');
              $("#confirm_window_box").addClass("hide");
              $("#popbox").removeClass("hide");
              if (typeof (dcsPageTrack) == "function") {
                dcsPageTrack("WT.si_n", "机票预订-" + langTypeStr + "", true, "WT.si_p", "支付订单", true, "WT.error_msg",
                  "您的钱包支付功能已被锁定。请于第二天零点后重试或者进入【我的钱包】找回支付密码。", true);
              }
            }
            if (data.respCode == '0210') {
              $("#input_psw").val(""); //密码错误，清空密码输入框的加密密文
              if ("ZH_CN" == locale) {
                $(".info2").text(data.msg);
              } else {
                $(".info2").text('您的钱包支付密码有误，您还有' + data.num + '次尝试机会，或进入【我的钱包】找回支付密码。');
              }
              $("#confirm_window_box").addClass("hide");
              $("#popbox").removeClass("hide");
              if (typeof (dcsPageTrack) == "function") {
                dcsPageTrack("WT.si_n", "机票预订-" + langTypeStr + "", true, "WT.si_p", "支付订单", true, "WT.error_msg",
                  "???payPwdErro???", true);
              }
            } else if (data.msg != '00' && data.msg != 'pwsErro' && data.msg != undefined) {
              $("#input_psw").val(""); //支付失败，清空密码输入框的加密密文
              $("#confirm_window_box").addClass("hide");
              $("#popbox").removeClass("hide");
              if (typeof (dcsPageTrack) == "function") {
                dcsPageTrack("WT.si_n", "机票预订-" + langTypeStr + "", true, "WT.si_p", "支付订单", true, "WT.error_msg",
                  "支付失败", true);
              }
            } else {
              if (data.errorMsg == 'bookFaile') {
                $("#pro").hide();
                return;
              }
              if (data.indexOf("EncodeMsg") != -1) {
                var sytForm = $("#sytForm");
                sytForm.attr("target", "");
                sytForm.html(data);
              } else { //异常时候的提示
                var sytForm = $("#sytForm");
                sytForm.attr("target", "");
                sytForm.html(data);
              }
            }
            $("#pro").hide();
          },
          error: function (data) {
            $(".payButton").attr("onclick", "gotoPay()");
            $(".payButton").css("background-color", "#ee1b2f");
            if (raidoindex == "0") { //一键执行支付
              //一键支付短信发送失败提示（网络故障等等）
              $(".payButton").attr("onclick", "gotoPay()");
              $(".payButton").css("background-color", "#ee1b2f");
              $("#ontelcodemsg").html('对不起，短信发送失败，请稍候再试');
            }
          }
        });
      } else if (creditChannelId != "" && creditChannelId != null) {
        //进入信用卡支付检验
        $("#phoneTips").val("text", "");
        if (!validataCreidtCardInfo("pay")) {
          return;
        }
        $("#pro").show();
        var args = $("#sytForm").serialize();
        //支付将支付按钮置灰
        $(".payButton").removeAttr("onclick");
        $(".payButton").css("background-color", "#888888");


        // ******************************** 新 增 一键支付 代码   开始      ***************************************************	

        //	 if($("#BANK").val() == "UOPF" && flagForQuickPay != "YIBO" && flagForQuickPay != "BOCI" ){  
        if ($("#BANK").val() == "UOPF" && $("#creditChannelId").val() != "229" && flagForQuickPay != "BOCI" &&
          flagForQuickPay != "BOCOM") {


          var cardNo = $('#ACCOUNTNO').val();
          var form1 = document.getElementById("sytForm");
          var merId = form1.elements["merId"].value; //商户编号
          var channelId = "";
          var channelIds = form1.elements["radioChannel"];
          var langTypeStr = form1.elements["langTypeStr"].value; // 机票类型
          var orderNo = form1.elements["ItemNo"].value;
          var showBackUrl = form1.elements["showBackUrl"].value;
          var merAppId = form1.elements["merAppId"][0].value;
          var encodeMsg = form1.elements["encodeMsg"].value; // 手机号
          var signMsg = form1.elements["signMsg"].value; // 手机号
          var needBook = form1.elements["needBook"].value;
          var sysFlag = form1.elements["sysFlag"].value;
          var orderFlagE = form1.elements["orderFlag"];
          var needMerPayNoE = form1.elements["needMerPayNo"];
          var needMerPayNo = "";
          uppPayNo = $("#uppPayNo").val();
          merPayNo = $("#merPayNo").val();

          if (orderFlagE != null || orderFlagE != undefined) {
            orderFlag = orderFlagE.value;
          }
          if (needMerPayNoE != null || needMerPayNoE != undefined) {
            needMerPayNo = needMerPayNoE.value;
          }
          if (typeof (channelIds.length) == "undefined") {
            channelId = "223"; //只有银联在线的时候单传这个值
          } else {
            for (var i = 0; i < channelIds.length; i++) {
              if (channelIds[i].checked) {
                channelId = channelIds[i].value; //获取选中的支付类型Id
                channelId = "223";
              }
            }
          }
          var orderAmount = form1.elements["OrderAmount"].value;
          var orderDateTime = form1.elements["ordertime"].value;
          var smsCode = $("#CODENAME").val();

          if (cardNo == "请输入银行卡号") {
            $('#input_cardNo').addClass("uopf_text_error");
            $('#span_cardNo').show();
            $('#span_cardNo').text("请输入银行卡号");
            return false;
          } else if (/^\d{16,25}$/g.test(cardNo) == false) { // 银行卡号是16到25位数字

            $('#input_cardNo').addClass("uopf_text_error");
            $('#span_cardNo').show();
            $('#span_cardNo').text("请输入正确的银行卡号");
            return false;
          } else {
            $('#input_cardNo').removeClass("uopf_text_error");
            $('#span_cardNo').hide();
            $('#span_cardNo').text('');
          }
          if (smsCode == '' || smsCode == null || smsCode == undefined) {

            alertMsgDiv("请输入验证码");
            return false;
          }

          var aj = $.ajax({
            type: "POST",
            url: root + "/gateway/v20/UopsPaySYT.upp",

            data: {
              TYPE: "GoToPay",
              merId: merId,
              channelId: channelId,
              orderNo: orderNo,
              uppPayNo: uppPayNo,
              merPayNo: merPayNo,
              orderAmount: orderAmount,
              cardNo: cardNo,
              merAppId: merAppId,
              encodeMsg: encodeMsg,
              signMsg: signMsg,
              ordertime: orderDateTime,
              radioChannel: channelId,
              smsCode: smsCode,
              needBook: needBook,
              sysFlag: sysFlag,
              needMerPayNo: needMerPayNo,
              token: token,
              orderFlag: null
            },
            success: function (data) {
              if (data != null) {
                if (data.respCode == "00") {
                  /*支付成功跳转到B2C成功页面   end*/
                  if (needBook == "Y" && (flag_oneKey == "1" || flag_oneKeyMsg == "1" || flag_oneKeyMsg3 ==
                    "1")) {
                    if (typeof (dcsPageTrack) == "function") {
                      dcsPageTrack("WT.si_n", "机票预订-" + langTypeStr + "", true, "WT.si_p", "支付订单", true,
                        "WT.error_msg", "" + data.respCode + "", true);
                    }
                    $(".info2").text('订座失败，请重新订票。');
                    $("#confirm_window_box").addClass("hide");
                    $("#popbox").removeClass("hide");
                    $(".payButton").css("background-color", "#ee1b2f"); // 将支付 按钮 恢复 
                    $(".payButton").attr("onclick", "gotoPay()");
                    $("#pro").hide();
                    return;

                  }
                  /*支付成功跳转到B2C成功页面   end*/
                  //		    alert("***********支付成功***************");
                  var html_url = data.html_url;
                  //页面跳转
                  window.location.href = html_url;

                } else {

                  if (data.respCode == 'bookFaile' && needBook == "Y" && (flag_oneKey == "1" || flag_oneKeyMsg ==
                      "1" || flag_oneKeyMsg3 == "1")) {

                    // 	                                         alert("ppppppp");
                    if (typeof (dcsPageTrack) == "function") {
                      dcsPageTrack("WT.si_n", "机票预订-" + langTypeStr + "", true, "WT.si_p", "支付订单", true,
                        "WT.error_msg", "" + data.respCode + "", true);
                    }
                    $(".info2").text('订座失败，请重新订票。');
                    $("#confirm_window_box").addClass("hide");
                    $("#popbox").removeClass("hide");
                    $(".payButton").css("background-color", "#ee1b2f"); // 将支付 按钮 恢复 
                    $(".payButton").attr("onclick", "gotoPay()");
                    $("#pro").hide();
                    return;

                  }

                  if (data.respCode == "86") {
                    //		    alert("***********支付失败 ***************");
                    $("#phoneTips").text('短信验证码错误');

                    //alert("短信验证码错误!");
                    $("#codeMsg").html('短信验证码错误');
                    $("#codeMsg").html('');
                    $("#CODENAME").val('');

                    $(".payButton").attr("onclick", "gotoPay()");
                    $(".payButton").css("background-color", "#ee1b2f"); // 将支付 按钮 恢复 
                    $("#pro").hide();
                  } else if (data.msg == "01") {
                    //		 alert("***********支付失败 ***************");

                    //alert("短信验证码错误!"+data.msg);
                    $("#phoneTips").text('短信验证码错误');
                    $("#codeMsg").html('短信验证码错误');
                    $("#codeMsg").html('');
                    $("#CODENAME").val('');

                    $(".payButton").attr("onclick", "gotoPay()");
                    $(".payButton").css("background-color", "#ee1b2f"); // 将支付 按钮 恢复 
                    $("#pro").hide();
                  } else {
                    flag_oneKeyMsg3 = "1";
                    //	     alert("***********支付失败 ***************");

                    //	$("#phoneTips").text('短信验证码错误');
                    $("#codeMsg").html('短信验证码错误');
                    $("#codeMsg").html('');
                    $("#CODENAME").val('');

                    $(".payButton").attr("onclick", "gotoPay()");
                    $(".payButton").css("background-color", "#ee1b2f"); // 将支付 按钮 恢复 
                    $("#pro").hide();
                  }

                }
              } else if (data == null) {
                if (typeof (dcsPageTrack) == "function") {
                  dcsPageTrack("WT.si_n", "机票预订-" + langTypeStr + "", true, "WT.si_p", "支付订单", true,
                    "WT.error_msg", "支付失败！", true);
                }
                $(".info2").text('支付失败！');
                $("#confirm_window_box").addClass("hide");
                $("#popbox").removeClass("hide");
                $(".payButton").css("background-color", "#ee1b2f"); // 将支付 按钮 恢复 
                $("#pro").hide();
              }
            },
          });
          // ******************************** 新 增 一键支付 代码  结束    ***************************************************	

        } else {

          $.ajax({
            type: "POST",
            url: root + "/pay/uppDoPay.upp",
            data: args,
            success: function (data) {
              $(".payButton").attr("onclick", "gotoPay()");
              $(".payButton").css("background-color", "#ee1b2f");
              if (data == null) {
                if (typeof (dcsPageTrack) == "function") {
                  dcsPageTrack("WT.si_n", "机票预订-" + langTypeStr + "", true, "WT.si_p", "支付订单", true,
                    "WT.error_msg", "支付失败！", true);
                }
                $(".info2").text('支付失败！');
                $("#confirm_window_box").addClass("hide");
                $("#popbox").removeClass("hide");
              }
              if (data.errorMsg != null && data.errorMsg != "" && data.errorMsg != undefined) {
                if (data.errorMsg != 'bookFaile') {
                  if (typeof (dcsPageTrack) == "function") {
                    dcsPageTrack("WT.si_n", "机票预订-" + langTypeStr + "", true, "WT.si_p", "支付订单", true,
                      "WT.error_msg", "支付失败", true);
                  }
                }
                if (data.errorMsg == 'Wrong') {
                  $(".info2").text('验证码不正确');
                  $("#confirm_window_box").addClass("hide");
                  $("#popbox").removeClass("hide");
                } else if (data.errorMsg == 'TimeOut') {
                  $(".info2").text('验证码过期');
                  $("#confirm_window_box").addClass("hide");
                  $("#popbox").removeClass("hide");
                } else if (data.errorMsg == 'noresp') {
                  $(".info2").text('支付超时');
                  $("#confirm_window_box").addClass("hide");
                  $("#popbox").removeClass("hide");
                } else if (data.errorMsg == 'bookFaile') {
                  if (typeof (dcsPageTrack) == "function") {
                    dcsPageTrack("WT.si_n", "机票预订-" + langTypeStr + "", true, "WT.si_p", "生成PNR失败", true,
                      "WT.error_msg", "生成PNR失败", true);
                  }
                  $(".info2").text('订座失败，请重新订票。');
                  $("#confirm_window_box").addClass("hide");
                  $("#popbox").removeClass("hide");
                } else {
                  if (data.r1_Code == '81205') {
                    $(".info2").text("验证码无效，请重新获取验证码");
                  } else {
                    $(".info2").text(data.errorMsg);
                  }
                  if (data.errorMsg == '') {
                    $(".info2").text('支付失败！');
                  }
                  $("#confirm_window_box").addClass("hide");
                  $("#popbox").removeClass("hide");
                }
              } else {
                if (data.r1_Code != null && data.r1_Code != "" && data.r1_Code != undefined && data.r1_Code !=
                  "1") {
                  if (data.errorMsg == '') {
                    $(".info2").text('支付失败！');
                  }
                  $("#confirm_window_box").addClass("hide");
                  $("#popbox").removeClass("hide");
                  $("#pro").hide();
                  return;
                }
                if (data.indexOf("EncodeMsg") != -1) {
                  var sytForm = $("#sytForm");
                  sytForm.attr("target", "");
                  sytForm.html(data);
                } else { //异常时候的提示
                  var sytForm = $("#sytForm");
                  sytForm.attr("target", "");
                  sytForm.html(data);
                }
              }
              $("#pro").hide();
            },
            error: function (data) {
              $(".payButton").attr("onclick", "gotoPay()");
              $(".payButton").css("background-color", "#ee1b2f");
            }
          });
        } // 9-9
      } else if ($("input[name='radioChannel']:checked").val() == 151) {
        $("#confirm_window_box").removeClass("hide");
        var iWidth = 900;
        var iHeight = 400;
        var iTop = (window.screen.availHeight - 30 - iHeight) / 2;
        var iLeft = (window.screen.availWidth - 10 - iWidth) / 2;
        var win = window.open("uppShowPayUOPF.jsp", "弹出窗口", "width=" + iWidth + ", height=" + iHeight + ",top=" + iTop +
          ",left=" + iLeft +
          ",toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no,alwaysRaised=yes,depended=yes");
      } else {
        //WDPCYBS 支付 判断是否外卡支付 和 验证外卡支付选项输入框数据 start
        /* 			var first_li_a_text =  $("#upp_pay_tab>ul>li").eq(0).find("a").first().text();
        			//如果第一个选项卡是外卡支付 PaymentType设置为4
        			if(first_li_a_text==='外卡支付' || first_li_a_text==='International card payment'){	
        				$("#PaymentType").val("4");
        			} */

        var paymentType = $("#PaymentType").val();
        if (radio != null && radio != undefined && radio != "" && paymentType == '4') {
          if (paymentType == '4') {
            if (radio.indexOf("WDP") == -1) {
              var CardComponent = $("#CardComponent");

              CardComponent.qtip(qtip_Alert);
              CardComponent.qtip("api").updateContent('必须字段', false);
              CardComponent.qtip('show');
              return false;
            }
          }

          if (radio.indexOf("WDP") > -1) {

            if (!checkWDPCYBSData()) {
              return;
            }
            //显示 等待提示框  
            $("#LOADINGDIV").removeClass("hide");

            //ajax请求
            //alert("ajax...check3Dfun.....");
            var args = $("#sytForm").serialize();
            // 		     		args = decodeURIComponent(args);
            $.ajax({
                type: "POST",
                url: "/upp_payment/pay/uppDoPay.upp",
                data: args,
                error: function () {
                  $("#LOADINGDIV").addClass("hide");
                  $("#wcPayFail").removeClass("hide");
                },
                success: function (data) { //sendMsgBox
                  // 3d验证或成功返回b2c的连接
                  var msg2 = data.msg2;
                  var gg = decodeURIComponent(data.msg2);

                  //ajax返回数据  隐藏等待提示框
                  $("#LOADINGDIV").addClass("hide");

                  //msg=Y 表示3d验证   弹出3d验证框  用户数据信息 返回支付成功页面或失败页面
                  if (data.msg == 'Y') {

                    //弹出  确认成功或失败的提示框 
                    $("#confirm_window_box").removeClass("hide");
                    //弹出验证框的方法
                    // 		    			    	openfun2(msg2);
                    //5月11日  弹出验证框的方法
                    var msg = data.msg2;
                    var sign = data.sign;
                    var mid = "101";
                    var goUrl = "/upp_payment/gateway/v10/overseas/direct/jump3DSCheckPopup.upp";
                    //新窗口 true   直接跳转 false
                    var isPopup = true;

                    //扩展  根据是否移动端  如果是移动端 不新窗口打开3d页面  直接跳转
                    var isMobile = isMobileFromNavigatorUserAgent();

                    //js提交true    
                    var isJsSubmit = true;
                    //手机端不弹出新窗口
                    jump3DSCheckPopupUsePost(goUrl, msg, sign, mid, isPopup, isJsSubmit);
                  } else {

                    //1 返回shu msg2不等于N 表示支付成功  直接刷新页面，进入成功页面
                    if (data != null && data.msg2 != null && data.msg2 != 'N' && data.msg2 != undefined) {
                      // 									alert("跳转到成功页面");
                      // 									window.location.href=gg;
                      //5月11日 弹出验证框的方法
                      var msg = data.msg2;
                      var sign = data.sign;
                      var mid = "101";
                      var goUrl = "/upp_payment/gateway/v10/overseas/direct/jump3DSCheckPopup.upp";
                      //新窗口 true   直接跳转 false
                      var isPopup = false;
                      //js提交true    
                      var isJsSubmit = false;
                      //手机端不弹出新窗口
                      jump3DSCheckPopupUsePost(goUrl, msg, sign, mid, isPopup, isJsSubmit);
                    }
                    //2 msg=N   表示支付失败  弹出wcPayFail提示框
                    else {
                      if (data.msg == "S") {
                        alert('订单已经支付成功，请勿重复支付');
                        //弹出  确认成功或失败的提示框 
                        $("#confirm_window_box").removeClass("hide");
                        return;
                      }
                      $("#wcPayFail").removeClass("hide");
                    }
                  }

                }
              }

            );
            return;
          }
        } else {

          if (radio == undefined || radio == null || radio == "") {
            if (paymentType == '4') {
              var CardComponent = $("#CardComponent");
              CardComponent.qtip(qtip_Alert);
              CardComponent.qtip("api").updateContent('必须字段', false);
              CardComponent.qtip('show');
              return false;
            }
            alert('请选择支付方式');
            return false;
          }


          if (radio.indexOf("WDP") > -1) {
            alert('请选择支付方式');
            return false;
          }
        }
        //WDPCYBS 支付 判断是否外卡支付 和 验证外卡支付选项输入框数据 end
        $("#confirm_window_box").removeClass("hide");
        $(".b2b-confirm-window-box").addClass("hide");
        bzjPayFlag = true;
        document.sytForm.submit();
      }
    }

    function otherBank() {
      $("#moreBank").unbind();
      $("#otherTips").text('收起              ');
      if ($("#otherBank").attr('class') == undefined ||
        $("#otherBank").attr('class') == null ||
        $("#otherBank").attr('class') == "") {
        $("#otherTips").text('更多银行                        ');
        $("#otherBank").addClass("otherBank");
      } else {
        $("#otherBank").removeClass("otherBank");
      };
    }


    /**
     * 新复制方法2015-09-24
     */
    function copyURL() {
      try {
        var Url2 = document.getElementById("anotherPayURL");
        Url2.select();
        // 选择对象
        document.execCommand("Copy");
        // 执行浏览器复制命令
        alert("已复制好，可贴粘。");
      } catch (ex) {
        var browserName = getBrowserInfo();
        //火狐旧版本不支持该方法，提示升级最新版 ，。
        alert("您使用的浏览器" + browserName + "版本不支持此复制功能，请将你的浏览器更新到最新版本，或请使用Ctrl+C或鼠标右键，复制文本框链接地址。");
      }

    }
    //短信计数器
    var curCount = 60;
    var InterValObj;

    function SetRemainTime() {
      if (curCount == 0) {
        window.clearInterval(InterValObj);
        $(".onePayMsend").removeAttr("disabled");
        $(".onePayMsend").val(getCodeMSG);
        curCount = 60;
      } else {
        curCount--;
        if ("ZH_CN" == lang) {
          $(".onePayMsend").val("请在" + curCount + "秒内输入验证码");
        } else if ("EN_US" == lang) {
          $(".onePayMsend").val("Please enter the code for " + curCount + " seconds");
        }

      }

    }

    $(function () {
      var first_li_a_text = $("#upp_pay_tab>ul>li").eq(0).find("a").first().text();
      //如果第一个选项卡是外卡支付 PaymentType设置为4
      if (first_li_a_text === '国外银行卡' || first_li_a_text === 'International card payment' || first_li_a_text ===
        '外卡支付') {
        $("#PaymentType").val("4");
      }

      var one_carid, one_tel;
      $("#addNewPsg")
        .click(
          function () {
            one_carid = $("input[name='one_carid']").val();
            one_tel = $("input[name='one_tel']").val();
            var one_name = $("input[name='one_name']").val();
            var one_id = $("input[name='one_id']").val();
            var one_moth = $("select[name='one_moth']").val();
            var one_year = $("select[name='one_year']").val();
            var one_carcode = $("input[name='one_carcode']").val();
            var one_telcode = $("input[name='one_telcode']").val();
            var ffpNo = $("input[name='ffpNo']").val();

            if (!(/(^\d{15}$)|(^\d{17}([0-9]|X)$)/.test(one_id))) {
              $("#error").html('仅支持身份证号绑卡，请前往明珠会员绑定您的身份证！');
              return false;
            }

            if (one_carid.replace(/\s/gi, '').length == "0" ||
              one_carid.replace(/\s/gi, '').length > "19") {
              $("#error").html('信用卡号为空！');
              return false;
            }
            if (one_moth == "0" || one_year == "0") {
              $("#error").html('请选择有效期!');
              return false;
            }
            if (one_carcode.replace(/\s/gi, '').length == "0" ||
              one_carcode.replace(/\s/gi, '').length < 3) {
              $("#error").html('请输入卡验证码!');
              return false;
            }
            if (one_tel.replace(/\s/gi, '').length == "0" ||
              one_tel.replace(/\s/gi, '').length < 11) {
              $("#error").html('请输入手机号码!');
              return false;
            }
            if (one_telcode.replace(/\s/gi, '').length == "0") {
              $("#error").html('请输入验证码!');
              return false;
            }
            $("#error").html("");
            $("#addNewPsg").attr("disabled", true);
            $("#addNewPsg").val('绑定中...');
            // 绑定
            $.ajax({
              url: root + "/gateway/v20/oneKeyPayment.upp",
              type: "POST",
              data: {
                CARDNUMBER: one_carid.replace(/\s/gi, ''),
                PHONENUMBER: one_tel,
                CARDEXPIRE: one_year + '' + one_moth, // 卡有效期
                // 年月
                CARDCVN2: one_carcode,
                CREDENTIALTYPE: "01", // 证件类型
                CREDENTIALNUMER: one_id, // 证件号码
                CREDENTIALNAME: encodeURIComponent(one_name), // 姓名
                SMSCODE: one_telcode,
                FFPNO: ffpNo,
                TYPE: "BINDCARD"
              },
              success: function (data) {
                var resp = "0100";
                if (data.responseText) {
                  var resp = data.responseText.split('"');
                }

                if (data && data.respCode == 00 || resp[3] + '' == '00') {
                  $("#error").html('绑卡成功！');
                } else {
                  if (resp == 0100) {
                    $("#error").html('信用卡绑定失败!');
                  }
                  switch (data.respCode) {
                    case "01":
                      $("#error").html('信用卡绑定失败!');
                      break;
                    case "02":
                      $("#error").html(
                        '暂不支持该信用卡或卡号输入有误!');
                      break;
                    case "03":
                      $("#error")
                        .html(
                          '您的信用卡银行卡暂不支持，请更换其他信用卡!');
                      break;
                    case "06":
                      $("#error").html(
                        '您的信用卡已经过期，请使用其他信用卡!');
                      break;
                    case "14":
                      $("#error")
                        .html(
                          '您的信用卡已过期或者是您输入的有效期不正确');
                      break;
                    case "20":
                      $("#error").html(
                        '您输入的卡号输入有误，请重新输入!');
                      break;
                    case "21":
                      $("#error").html(
                        '您输入验证码有误，请重新输入!');
                      break;
                    case "32":
                      $("#error").html('银联系统维护中!');
                      break;
                    case "57":
                      $("#error")
                        .html(
                          '该支付卡需开通银联在线支付业务，方可进行绑定支付操作。请致电银联客服电话95516进行开通。');
                      break;
                    case "60":
                      $("#error")
                        .html(
                          '该支付卡需开通银联认证支付，方可进行绑定支付操作。请致电银联客服电话95516进行开通。');
                      break;
                    case "86":
                      $("#error").html(
                        '您输入的短信验证码错误，请重新输入!');
                      break;
                    case "90":
                      $("#error")
                        .html(
                          '如您需绑定工商银行，需拨打95588或登录工行网上银行进行认证开通。');
                      break;
                    case "93":
                      $("#error")
                        .html(
                          '请致电您的银行以确定您的个人客户基本信息中的相关信息设置正确。');
                      break;
                    case "94":
                      $("#error").html('重复绑卡！');
                      break;
                    case "95":
                      $("#error")
                        .html(
                          '如您需绑定邮储银行，需在邮储柜台或网银上开通银联无卡支付业务。');
                      break;
                    case "97":
                      $("#error")
                        .html(
                          '该支付卡需开通银联在线支付业务，方可进行绑定支付操作。请致电银联客服电话95516进行开通。');
                      break;
                    default:
                      $("#error").html('信用卡绑定失败!');
                      break;
                  }
                  // alert(decodeURIComponent(data.respCode));
                  $(".onePaysubmit").removeAttr(
                    "disabled");
                  $(".onePaysubmit").val('绑定');
                }
              },
              error: function (data) {
                var resp = "0100";
                if (data.responseText) {
                  var resp = data.responseText.split('"');
                }
                if (resp[3] + '' == '00') {
                  $("#error").html('绑卡成功！');
                } else {
                  $("#error").html('信用卡绑定失败!');
                }
                $(".onePaysubmit").removeAttr("disabled");
                $(".onePaysubmit").val('绑定');
              }
            });

          });



      // 获取手机短信
      $(".onePayMsend").click(
        function () {
          one_carid = $("input[name='one_carid']").val();
          one_tel = $("input[name='one_tel']").val();
          if (one_carid.replace(/\s/gi, '').length == "0" ||
            one_carid.replace(/\s/gi, '').length > "19") {
            $("#error").html('信用卡号为空！');
            return false;
          }
          if (one_tel.replace(/\s/gi, '').length == "0" ||
            one_tel.replace(/\s/gi, '').length < 11) {
            $("#error").html('请输入手机号码!');
            return false;
          }
          $("#error").html("");
          $(".onePayMsend").attr("disabled", true);
          $(".onePayMsend").css("background-color", "#CFCFCF"); //页面检验通过，将按钮置灰
          $.ajax({
            url: root + "/gateway/v20/oneKeyPayment.upp",
            type: "post",
            data: {
              CARDNUMBER: one_carid.replace(/\s/gi, ''),
              PHONENUMBER: one_tel,
              TYPE: "MSGCODE"
            },
            dataType: "json",
            cache: false,
            success: function (data) {
              $(".onePayMsend").attr("disabled", false);
              $(".onePayMsend").css("background-color", "#0193CF");
              if (data && data.respCode == 00) {
                $("#error").html('验证码已发送至您的手机!');
                $(".onePayMsend").attr("disabled", "disabled");
                if ("ZH_CN" == lang) {
                  $(".onePayMsend").val("请在" + curCount + "秒内输入验证码");
                } else if ("EN_US" == lang) {
                  $(".onePayMsend").val("Please enter the code for " + curCount + " seconds");
                }
                InterValObj = window.setInterval(SetRemainTime, 1000);
              } else {
                if (data.respCode == 87 || data.respCode == 88) {
                  $("#error").html('您的短信发送过于频繁，请稍候再试!');
                } else {
                  $("#error").html('对不起，短信发送失败，请重新尝试!');
                  $(".onePayMsend").removeAttr("disabled");
                }
              }

            },
            error: function (data) {
              $(".onePayMsend").attr("disabled", false);
              $(".onePayMsend").css("background-color", "#0193CF");
              $("#error").html('短信发送失败!');
              $(".onePayMsend").removeAttr("disabled");
            }
          });

        });


      $("#b2b_box_qx").click(function () {
        bzjPayFlag = true;
        $(".b2b-confirm-window-box").addClass("hide");
      });
      $("#errorButton").click(function () {
        bzjPayFlag = true;
        $(".b2b-confirm-window-box").addClass("hide");
      });

      // 一键支付获取验证码
      $("#getCodeButton").click(
        function () {
          //一键支付选中银行
          var mybankcode = $("#myBankSelect option:selected").val();
          var countdown = 60;
          $("#ontelcodemsg").html("");
          $("#getCodeButton").val('发送中');
          //按钮置灰
          $("#getCodeButton").attr("disabled", true);
          $("#getCodeButton").removeAttr("onclick");
          $("#getCodeButton").css("background-color", "#888888");
          var args = $("#sytForm").serialize();
          settime(countdown); //成功发送开始60秒倒计时
          $.ajax({
            url: root + "/pay/uppSyt/onclickauth.upp",
            type: "post",
            data: args,
            dataType: "json",
            cache: false,
            success: function (data) {
              $("#merPayNo").val(data.merPayNo);
              if (data.respCode == "00") {
                $("#ontelcodemsg").html('短信验证码已经发送，请注意查收。');
              } else {
                $("#ontelcodemsg").html('对不起，短信发送失败，请稍候再试');
                //按钮恢复
                /* $("#getCodeButton").attr("disabled", false);
                $("#getCodeButton").css("background-color","#0193CF");
                $("#getCodeButton").val('获取验证码'); */
              }

              $("#uppPayNo").val(data.uppPayNo);
            },
            error: function (data) {
              $("#ontelcodemsg").html('对不起，短信发送失败，请稍候再试');
              $("#getCodeButton").val(getCodeMSG);
              $(".onePayMsend").attr("disabled", false);
              $(".onePayMsend").css("background-color", "#0193CF");
              $("#error").html('短信发送失败!');
              $(".onePayMsend").removeAttr("disabled");
            }
          });
        });


    });


    // 新增快捷支付 一键支付   验证码倒计时
    function settimeUOPF(countdown) {

      // 		alert("countdown =>"+countdown);
      if (countdown == 0) {
        //验证码按钮恢复
        $("#buttonForCode").val(getCodeMSG);
        $("#buttonForCode").attr("disabled", false);
        $("#buttonForCode").css("background-color", "#0193CF");
        // 	        countdown = 10; 
        return;
      } else {

        $("#buttonForCode").attr("disabled", true);
        $("#buttonForCode").val(countdown + "s");
        countdown--;
        $(".creditPaySendCode").val(countdown + "s");
      }
      setTimeout(function () {
        settimeUOPF(countdown)
      }, 1000)
    }



    //验证码倒计时
    function settime(countdown) {
      if (countdown == 0) {
        //验证码按钮恢复
        $("#getCodeButton").val(getCodeMSG);
        $("#getCodeButton").attr("disabled", false);
        $("#getCodeButton").css("background-color", "#0193CF");
        countdown = 60;
        return;
      } else {
        $("#getCodeButton").attr("disabled", true);
        $("#getCodeButton").val(countdown + "s");
        countdown--;
      }
      setTimeout(function () {
        settime(countdown)
      }, 1000)
    }

    function checkNULL($obj) {
      var tips = $("#phoneTips");
      if ($.trim($obj.val()) != "" && $.trim($obj.val()) != "0") {
        var length = $.trim($obj.val()).length;
        switch ($obj.attr("name")) {
          case "ACCOUNTNO":
            if (length > 19 || length < 15) {
              tips.text('卡号为15-19位数字');
              return false;
            }
            break;
          case "CVV":
            if (length != 3) {
              tips.text('CVV2为3位数字');
              return false;
            }
            break;
        }
        return true;
      }
      switch ($obj.attr("name")) {
        case "BANK":
          tips.text('发卡行不能为空');
          break;
        case "ACCOUNTNO":
          tips.text('卡号不能为空');
          break;
        case "EXPIREMONTH":
          if ($("#BANK").val() == "EposSale") {
            tips.text('有效期月不能为空');
          } else if ($("#BANK").val() == "BOCOM") {
            var EXPIREMONTH = $("#EXPIREMONTH").val();
            var reg = /^[0-9]{2}$/;
            if (!reg.test(EXPIREMONTH)) {
              tips.text('有效期月不能为空');
            }
          } else {
            return true;
          }
          break;
        case "EXPIREYEAR":
          if ($("#BANK").val() == "EposSale") {
            tips.text('有效期年不能为空');
          } else if ($("#BANK").val() == "BOCOM") {
            var EXPIREYEAR = $("#EXPIREYEAR").val();
            var reg = /^[0-9]{4}$/;
            if (!reg.test(EXPIREYEAR)) {
              tips.text('有效期年不能为空');
            }
          } else {
            return true;
          }
          break;
        case "CVV":
          if ($("#BANK").val() == "EposDebitSaleNew") {
            return true;
          } else if ($("#BANK").val() != "BOCOM") {
            tips.text('CVV2码不能为空');
          }
          break;
        case "BUYERNAME":
          if ($("#BANK").val() != "SPDBI" && $("#BANK").val() != "BOCI" && $("#BANK").val() != "BOCOM") {
            tips.text('持卡人姓名不能为空');
          } else {
            return true;
          }
          break;
        case "IDTYPE":
          if ($("#BANK").val() != "SPDBI" && $("#BANK").val() != "BOCI") {
            tips.text('持卡人证件类型不能为空');
          } else {
            return true;
          }
          break;
        case "IDCARD":
          if ($("#BANK").val() != "SPDBI" && $("#BANK").val() != "BOCI" && $("#BANK").val() != "BOCOM") {
            tips.text('持卡人证件号不能为空');
          } else {
            return true;
          }
          break;
        case "MOBILE":
          if ($("#BANK").val() != "SPDBI" && $("#BANK").val() != "BOCOM") {
            tips.text('预留手机号不能为空');
          } else { //如果是浦发直连就不需要手机
            return true;
          }
          break;
        case "CODENAME":
          tips.text('验证码不能为空');
          break;
      }
      return false;
    };

    function validataCreidtCardInfo(type) {
      var creditCardType = $("input[name='cmdType']:checked").val();
      var $BANK = $("#BANK"); //发卡行
      var $ACCOUNTNO = $("#ACCOUNTNO"); //卡号
      var $EXPIREYEAR = $("#EXPIREYEAR"); //有效期年
      var $EXPIREMONTH = $("#EXPIREMONTH"); //有效期月
      var $CVV = $("#CVV"); //安全码
      var $BUYERNAME = $("#BUYERNAME"); //持卡人姓名
      var $MOBILE = $("#MOBILE"); //预留手机号
      var $IDTYPE = $("#IDTYPE"); //证件类型
      var $IDCARD = $("#IDCARD"); //证件号
      var $CODENAME = $("#CODENAME"); //验证码

      if ("EposDebitSaleNew" == creditCardType) {
        if (type == "code") {
          return checkNULL($IDCARD) & checkNULL($IDTYPE) &
            checkNULL($MOBILE) & checkNULL($BUYERNAME) & checkNULL($ACCOUNTNO) &
            checkNULL($BANK);
        } else {
          return checkNULL($CODENAME) & checkNULL($IDCARD) & checkNULL($IDTYPE) &
            checkNULL($MOBILE) & checkNULL($BUYERNAME) & checkNULL($ACCOUNTNO) &
            checkNULL($BANK);
        }
      } else {
        if (type == "code") {
          return checkNULL($IDCARD) & checkNULL($IDTYPE) &
            checkNULL($MOBILE) & checkNULL($BUYERNAME) & checkNULL($CVV) &
            checkNULL($EXPIREMONTH) & checkNULL($EXPIREYEAR) & checkNULL($ACCOUNTNO) &
            checkNULL($BANK);
        } else {
          if ($BANK.val() == "BOCOM") {
            return checkNULL($ACCOUNTNO) & checkNULL($EXPIREMONTH) &
              checkNULL($EXPIREYEAR) && checkNULL($CODENAME);
          } else {
            return checkNULL($CODENAME) & checkNULL($IDCARD) & checkNULL($IDTYPE) &
              checkNULL($MOBILE) & checkNULL($BUYERNAME) & checkNULL($CVV) &
              checkNULL($EXPIREMONTH) & checkNULL($EXPIREYEAR) & checkNULL($ACCOUNTNO) &
              checkNULL($BANK);
          }
        }
      }
    };

    function closewxsm() {
      window.clearInterval(interval_id);
      $(".window-bg").addClass("hide");
      $("#confirm-window-wx").addClass("hide");
    }

    var language = 'ZH_CN';

    //网关radio提示语切换
    function couponradio(id) {
      //alert(id);
      $.ajax({
        url: root + "/pay/couponRemarkLoad.upp",
        type: "post",
        data: {
          id: id
        },
        dataType: "json",
        cache: false,
        success: function (data) {
          if (data != null && data.remarkcn != null) {
            if (language == "ZH_CN") {
              $(".remark1").html(data.remarkcn1);
              $(".remark2").html(data.remarkcn2);
              $(".remark3").html(data.remarkcn3);
            } else {
              $(".remark1").html(data.remarken1);
              $(".remark2").html(data.remarken2);
              $(".remark3").html(data.remarken3);
            }
            if (data.link1 != null) {
              $(".remark1").attr("href", data.link1);
            }
            if (data.link2 != null) {
              $(".remark2").attr("href", data.link2);
            }
            if (data.link3 != null) {
              $(".remark3").attr("href", data.link3);
            }

          } else {
            $(".remark1").html("");
            $(".remark2").html("");
            $(".remark3").html("");
            $(".remark1").attr("href", "javascript:void(0);");
            $(".remark1").attr("href", "javascript:void(0);");
            $(".remark1").attr("href", "javascript:void(0);");
          }

        }

      });
    }

    //大列提示语切换
    function clearchannletype(id, iconName) {
      //余额支付
      var ids;
      if (iconName == "Online Payment") { //网上银行
        ids = '002,003,001,004,012,005,013,025,011,006,016,024,020,022,026,023,039,034,036,038,033,032,006,037,067';
      } else if (iconName == "Payment platform") { //支付平台
        var ids1 = '320,135'; //支付平台第三方
        var ids2 = '249,137,131,151'; //支付平台快捷
        ids = ids1 + "," + ids2;
      } else if (iconName == "International card payment") { //外卡支付
        ids = '017,018,027,015';
      } else if (iconName == "My Wallet") {
        ids = '';
      } else { //其他支付
        ids = '';
      }
      $(".couponmsg").empty(); //清空详细内容
      $.ajax({
        url: root + "/pay/couponRemarkLoad.upp",
        type: "post",
        data: {
          id: id,
          ids: ids
        },
        dataType: "json",
        cache: false,
        success: function (data) {
          if (data != null) {
            var num = 0;
            for (var i = 0; i < data.length; i++) {
              if (language == "ZH_CN") {
                if (data[i].remarkcn1 != null) {
                  num++;
                  if (data[i].link1 == null) {
                    $(".couponmsg").append(
                      "<a style='color: red;' href='javascript:void(0);' target='_blank' class='remark1'>" +
                      num + "、" + data[i].remarkcn1 + "</a><br>");
                  } else {
                    $(".couponmsg").append("<a style='color: red;' href='" + data[i].link1 +
                      "' target='_blank' class='remark1'>" + num + "、" + data[i].remarkcn1 + "</a><br>");
                  }
                }

                if (data[i].remarkcn2 != null) {
                  num++;
                  if (data[i].link2 == null) {
                    $(".couponmsg").append(
                      "<a style='color: red;' href='javascript:void(0);' target='_blank' class='remark1'>" +
                      num + "、" + data[i].remarkcn2 + "</a><br>");
                  } else {
                    $(".couponmsg").append("<a style='color: red;' href='" + data[i].link2 +
                      "' target='_blank' class='remark1'>" + num + "、" + data[i].remarkcn2 + "</a><br>");
                  }
                }

                if (data[i].remarkcn3 != null) {
                  num++;
                  if (data[i].link3 == null) {
                    $(".couponmsg").append(
                      "<a style='color: red;' href='javascript:void(0);' target='_blank' class='remark1'>" +
                      num + "、" + data[i].remarkcn3 + "</a><br>");
                  } else {
                    $(".couponmsg").append("<a style='color: red;' href='" + data[i].link3 +
                      "' target='_blank' class='remark1'>" + num + "、" + data[i].remarkcn3 + "</a><br>");
                  }
                }

              } else { //英文版或其他语言
                if (data[i].remarken1 != null) {
                  num++;
                  if (data[i].link1 == null) {
                    $(".couponmsg").append(
                      "<a style='color: red;' href='javascript:void(0);' target='_blank' class='remark1'>" +
                      num + "、" + data[i].remarken1 + "</a><br>");
                  } else {
                    $(".couponmsg").append("<a style='color: red;' href='" + data[i].link1 +
                      "' target='_blank' class='remark1'>" + num + "、" + data[i].remarken1 + "</a><br>");
                  }
                }

                if (data[i].remarken2 != null) {
                  num++;
                  if (data[i].link2 == null) {
                    $(".couponmsg").append(
                      "<a style='color: red;' href='javascript:void(0);' target='_blank' class='remark1'>" +
                      num + "、" + data[i].remarken2 + "</a><br>");
                  } else {
                    $(".couponmsg").append("<a style='color: red;' href='" + data[i].link2 +
                      "' target='_blank' class='remark1'>" + num + "、" + data[i].remarken2 + "</a><br>");
                  }
                }

                if (data[i].remarken3 != null) {
                  num++;
                  if (data[i].link3 == null) {
                    $(".couponmsg").append(
                      "<a style='color: red;' href='javascript:void(0);' target='_blank' class='remark1'>" +
                      num + "、" + data[i].remarken3 + "</a><br>");
                  } else {
                    $(".couponmsg").append("<a style='color: red;' href='" + data[i].link3 +
                      "' target='_blank' class='remark1'>" + num + "、" + data[i].remarken3 + "</a><br>");
                  }
                }
              }

            }
          }
        }

      });

    }

    // 	WDPCYBS  添加 js代码
    //cybs 为CyberSource的卡号输入框添加键盘事件
    $(function () {
      $("#CardNum").bind("keypress", function (e) { //keydown

        var val = $("#inputCardNoType").val();
        if (val == null || "" == val) {
          $("#inputCardNoType").val("type");
        }

        if (val == "paste" || val == "PT") {
          $("#inputCardNoType").val("PT");
        } else {
          $("#inputCardNoType").val("type");
        }
        val = $("#inputCardNoType").val();
      });
    });
    //cybs 为CyberSource的卡号输入框添加复制粘贴事件
    function checkPaste() {
      var inputCardNoType = $("#inputCardNoType").val();
      //	 	alert("复制粘贴前："+inputCardNoType);
      //如果复制粘贴 触动事件 
      if (inputCardNoType == null || inputCardNoType == "") {
        $("#inputCardNoType").val("paste"); //1卡号是复制粘贴还是手动填入     paste：复制粘贴   type：手动填入   PT 
      }

      if (inputCardNoType == "type" || inputCardNoType == "PT") {
        $("#inputCardNoType").val("PT"); //1卡号是复制粘贴还是手动填入     paste：复制粘贴   type：手动填入   PT 
      } else {
        $("#inputCardNoType").val("paste"); //1卡号是复制粘贴还是手动填入     paste：复制粘贴   type：手动填入   PT 
      }
      inputCardNoType = $("#inputCardNoType").val();
      //	 	alert("复制粘贴后："+inputCardNoType);
    }
    //cybs 为CyberSource的卡号输入框添加复制粘贴事件


    $(function () {

      $.fn.numeral = function () {
        $(this).css("ime-mode", "disabled");
        this.bind("keypress", function (e) {
          var code = (e.keyCode ? e.keyCode : e.which); //兼容火狐 IE
          if (!$.browser.msie && (e.keyCode == 0x8)) //火狐下不能使用退格键
          {
            return;
          }
          return code >= 48 && code <= 57;
        });
        this.bind("blur", function () {
          if (this.value.lastIndexOf(".") == (this.value.length - 1)) {
            this.value = this.value.substr(0, this.value.length - 1);
          } else if (isNaN(this.value)) {
            this.value = "";
          }
        });
        this.bind("paste", function () {
          var s = clipboardData.getData('text');
          if (!/\D/.test(s));
          value = s.replace(/^0*/, '');
          return false;
        });
        this.bind("dragenter", function () {
          return false;
        });
        this.bind("keyup", function () {
          if (/(^0+)/.test(this.value)) {
            this.value = this.value.replace(/^0*/, '');
          }
        });
      };

      //调用文本框的id
      $("#CardNum").numeral();



      ///////////////////////////////////////////////////


      $('#CardNum').bind("input click propertychange", (function (e) {
        var code = (e.keyCode ? e.keyCode : e.which); //兼容火狐 IE
        var codeChr = "";
        if (code >= 48 && code <= 57) {
          codeChr = String.fromCharCode(code);
        }

        if (!isInputCard) {
          isInputCard = true;
          $(this).qtip(qtip_Card);
        }

        var cardNumVal = $.trim($(this).val());
        if (cardNumVal == "" && codeChr == "") {
          $(this).qtip("hide");
        } else {
          if (cardNumVal.length == 19) {
            codeChr = "";
          }
          $(this).qtip("show");
          $(this).qtip("api").updateContent(formatCardNum(cardNumVal + codeChr), false);
        }

      }));


      ////////////////////////////////////////////////////////////////////////////

      $("#email").qtip(qtip_Alert);
      $("#email").blur(function () {
        var emial = $.trim($(this).val());
        if (emial != "" && !isEmail(emial)) {
          $(this).qtip("api").updateContent('格式错误', false);
          $(this).qtip("show");
        }
      });

      ////////////////////////////////////////////////////////////////////////////

      $("#cvv").qtip(qtip_Alert);
      $("#cvv").blur(function () {
        var reg = new RegExp("^[0-9]{4}$|^[0-9]{3}$");
        // 		var reg2 = new RegExp("^[0-9]{4}$");
        var cvv = $.trim($(this).val());
        if (!reg.test(cvv)) {
          $(this).qtip("api").updateContent('格式错误', false);
          $(this).qtip("show");
        }
      });


    });

    var luhnArr = [0, 2, 4, 6, 8, 1, 3, 5, 7, 9];

    function LuhnCheck(str) {
      var counter = 0;
      var incNum;
      var odd = false;
      var temp = String(str).replace(/[^\d]/g, "");
      if (temp.length == 0)
        return false;
      for (var i = temp.length - 1; i >= 0; --i) {
        incNum = parseInt(temp.charAt(i), 10);
        counter += (odd = !odd) ? incNum : luhnArr[incNum];
      }
      return (counter % 10 == 0);
    }
    //自动完成：国家列表
    var country = [{
      name: "",
      code: "00"
    }, {
      name: "Afghanistan",
      code: "AF"
    }, {
      name: "Albania",
      code: "AL"
    }, {
      name: "Algeria",
      code: "DZ"
    }, {
      name: "American Samoa",
      code: "AS"
    }, {
      name: "Andorra",
      code: "AD"
    }, {
      name: "Angola",
      code: "AO"
    }, {
      name: "Anguilla",
      code: "AI"
    }, {
      name: "Antigua & Barbuda",
      code: "AG"
    }, {
      name: "Argentina",
      code: "AR"
    }, {
      name: "Armenia",
      code: "AM"
    }, {
      name: "Aruba",
      code: "AW"
    }, {
      name: "Australia",
      code: "AU"
    }, {
      name: "Austria",
      code: "AT"
    }, {
      name: "Azerbaijan",
      code: "AZ"
    }, {
      name: "Bahamas",
      code: "BS"
    }, {
      name: "Bahrain",
      code: "BH"
    }, {
      name: "Bangladesh",
      code: "BD"
    }, {
      name: "Barbados",
      code: "BB"
    }, {
      name: "Belarus",
      code: "BY"
    }, {
      name: "Belgium",
      code: "BE"
    }, {
      name: "Belize",
      code: "BZ"
    }, {
      name: "Benin",
      code: "BJ"
    }, {
      name: "Bermuda",
      code: "BM"
    }, {
      name: "Bhutan",
      code: "BT"
    }, {
      name: "Bolivia",
      code: "BO"
    }, {
      name: "Bosnia/Hercegovina",
      code: "BA"
    }, {
      name: "Botswana",
      code: "BW"
    }, {
      name: "Brazil",
      code: "BR"
    }, {
      name: "Brunei Darussalam",
      code: "BN"
    }, {
      name: "Bulgaria",
      code: "BG"
    }, {
      name: "Burkina Faso",
      code: "BF"
    }, {
      name: "Burundi",
      code: "BI"
    }, {
      name: "Cambodia",
      code: "KH"
    }, {
      name: "Cameroon",
      code: "CM"
    }, {
      name: "Canada",
      code: "CA"
    }, {
      name: "Cape Verde",
      code: "CV"
    }, {
      name: "Cayman Is",
      code: "KY"
    }, {
      name: "Central African Republic",
      code: "CF"
    }, {
      name: "Chad",
      code: "TD"
    }, {
      name: "Chile",
      code: "CL"
    }, {
      name: "CHINA",
      code: "CN"
    }, {
      name: "Christmas Island",
      code: "CX"
    }, {
      name: "Cocos Islands",
      code: "CC"
    }, {
      name: "Colombia",
      code: "CO"
    }, {
      name: "Comoros",
      code: "KM"
    }, {
      name: "Congo, People's Republic of",
      code: "CG"
    }, {
      name: "Cook Islands",
      code: "CK"
    }, {
      name: "Costa Rica",
      code: "CR"
    }, {
      name: "Cote d'Ivoire",
      code: "CI"
    }, {
      name: "Croatia",
      code: "HR"
    }, {
      name: "Cuba",
      code: "CU"
    }, {
      name: "Cyprus",
      code: "CY"
    }, {
      name: "Czech Republic",
      code: "CZ"
    }, {
      name: "Czech",
      code: "CS"
    }, {
      name: "Democratic Republic of (was Zaire)",
      code: "CD"
    }, {
      name: "Denmark",
      code: "DK"
    }, {
      name: "Djibouti",
      code: "DJ"
    }, {
      name: "Dominica",
      code: "DM"
    }, {
      name: "Dominican Republic",
      code: "DO"
    }, {
      name: "Ecuador",
      code: "EC"
    }, {
      name: "Egypt",
      code: "EG"
    }, {
      name: "El Salvador",
      code: "SV"
    }, {
      name: "Equatorial Guinea",
      code: "GQ"
    }, {
      name: "Eritrea",
      code: "ER"
    }, {
      name: "Estonia",
      code: "EE"
    }, {
      name: "Ethiopia",
      code: "ET"
    }, {
      name: "Falkland Islands",
      code: "FK"
    }, {
      name: "Faroe Islands",
      code: "FO"
    }, {
      name: "Fiji",
      code: "FJ"
    }, {
      name: "Finland",
      code: "FI"
    }, {
      name: "FRANCE",
      code: "FR"
    }, {
      name: "French Guiana",
      code: "GF"
    }, {
      name: "French Polynesia",
      code: "PF"
    }, {
      name: "Gabon",
      code: "GA"
    }, {
      name: "Gambia",
      code: "GM"
    }, {
      name: "Georgia",
      code: "GE"
    }, {
      name: "Germany",
      code: "DE"
    }, {
      name: "Ghana",
      code: "GH"
    }, {
      name: "Gibraltar",
      code: "GI"
    }, {
      name: "Greece",
      code: "GR"
    }, {
      name: "Greenland",
      code: "GL"
    }, {
      name: "Grenada",
      code: "GD"
    }, {
      name: "Guadeloupe",
      code: "GP"
    }, {
      name: "Guam",
      code: "GU"
    }, {
      name: "Guatemala",
      code: "GT"
    }, {
      name: "Guinea",
      code: "GN"
    }, {
      name: "Guinea-Bissau",
      code: "GW"
    }, {
      name: "Guyana",
      code: "GY"
    }, {
      name: "Haiti",
      code: "HT"
    }, {
      name: "Honduras",
      code: "HN"
    }, {
      name: "Hong Kong, China",
      code: "HK"
    }, {
      name: "Hungary",
      code: "HU"
    }, {
      name: "Iceland",
      code: "IS"
    }, {
      name: "India",
      code: "IN"
    }, {
      name: "INDONESIA",
      code: "ID"
    }, {
      name: "Iran",
      code: "IR"
    }, {
      name: "Iraq",
      code: "IQ"
    }, {
      name: "Ireland",
      code: "IE"
    }, {
      name: "Israel",
      code: "IL"
    }, {
      name: "ITALY",
      code: "IT"
    }, {
      name: "Jamaica",
      code: "JM"
    }, {
      name: "JAPAN",
      code: "JP"
    }, {
      name: "Jordan",
      code: "JO"
    }, {
      name: "Kazakhstan",
      code: "KZ"
    }, {
      name: "Kenya",
      code: "KE"
    }, {
      name: "Kiribati",
      code: "KI"
    }, {
      name: "Korea, Democratic Peoples Republic",
      code: "KP"
    }, {
      name: "Korea, Republic of",
      code: "KR"
    }, {
      name: "Kuwait",
      code: "KW"
    }, {
      name: "Kyrgyzstan",
      code: "KG"
    }, {
      name: "Lao People's Democratic Republic",
      code: "LA"
    }, {
      name: "Latvia",
      code: "LV"
    }, {
      name: "Lebanon",
      code: "LB"
    }, {
      name: "Lesotho",
      code: "LS"
    }, {
      name: "Liberia",
      code: "LR"
    }, {
      name: "Libyan Arab Jamahiriya",
      code: "LY"
    }, {
      name: "Lithuania",
      code: "LT"
    }, {
      name: "Luxembourg",
      code: "LU"
    }, {
      name: "Macau, China",
      code: "MO"
    }, {
      name: "Macedonia",
      code: "MK"
    }, {
      name: "Madagascar",
      code: "MG"
    }, {
      name: "Malawi",
      code: "MW"
    }, {
      name: "Malaysia",
      code: "MY"
    }, {
      name: "Maldives",
      code: "MV"
    }, {
      name: "Mali",
      code: "ML"
    }, {
      name: "Malta",
      code: "MT"
    }, {
      name: "Mariana Islands, Northern",
      code: "MP"
    }, {
      name: "Marshall Islands",
      code: "MH"
    }, {
      name: "Martinique",
      code: "MQ"
    }, {
      name: "Mauritania",
      code: "MR"
    }, {
      name: "Mauritius",
      code: "MU"
    }, {
      name: "Mayotte",
      code: "YT"
    }, {
      name: "Mexico",
      code: "MX"
    }, {
      name: "Micronesia",
      code: "FM"
    }, {
      name: "Moldavia",
      code: "MD"
    }, {
      name: "Monaco",
      code: "MC"
    }, {
      name: "Mongolia",
      code: "MN"
    }, {
      name: "Montserrat",
      code: "MS"
    }, {
      name: "Morocco",
      code: "MA"
    }, {
      name: "Mozambique",
      code: "MZ"
    }, {
      name: "Namibia",
      code: "NA"
    }, {
      name: "Nauru Island",
      code: "NR"
    }, {
      name: "Nepal",
      code: "NP"
    }, {
      name: "Netherlands Antilles",
      code: "AN"
    }, {
      name: "Netherlands",
      code: "NL"
    }, {
      name: "New Caledonia",
      code: "NC"
    }, {
      name: "New Zealand",
      code: "NZ"
    }, {
      name: "Nicaragua",
      code: "NI"
    }, {
      name: "Niger",
      code: "NE"
    }, {
      name: "Nigeria",
      code: "NG"
    }, {
      name: "Niue",
      code: "NU"
    }, {
      name: "Norfolk Island",
      code: "NF"
    }, {
      name: "Norway",
      code: "NO"
    }, {
      name: "Oman",
      code: "OM"
    }, {
      name: "Pakistan",
      code: "PK"
    }, {
      name: "Palau Islands",
      code: "PW"
    }, {
      name: "Panama",
      code: "PA"
    }, {
      name: "Papua New Guinea",
      code: "PG"
    }, {
      name: "Paraguay",
      code: "PY"
    }, {
      name: "Peru",
      code: "PE"
    }, {
      name: "Philippines",
      code: "PH"
    }, {
      name: "Poland",
      code: "PL"
    }, {
      name: "Portugal",
      code: "PT"
    }, {
      name: "Puerto Rico",
      code: "PR"
    }, {
      name: "Qatar",
      code: "QA"
    }, {
      name: "Reunion Island",
      code: "RE"
    }, {
      name: "Romania",
      code: "RO"
    }, {
      name: "Russian Federation",
      code: "RU"
    }, {
      name: "Russian within Asia",
      code: "XU"
    }, {
      name: "Rwanda",
      code: "RW"
    }, {
      name: "Samoa",
      code: "WS"
    }, {
      name: "San Marino",
      code: "SM"
    }, {
      name: "Sao Tome ",
      code: "ST"
    }, {
      name: "Saudi Arabia",
      code: "SA"
    }, {
      name: "Senegal",
      code: "SN"
    }, {
      name: "Seychelles",
      code: "SC"
    }, {
      name: "Sierra Leone",
      code: "SL"
    }, {
      name: "Singapore",
      code: "SG"
    }, {
      name: "Slovakia",
      code: "SK"
    }, {
      name: "Slovenia",
      code: "SI"
    }, {
      name: "Solomon Islands",
      code: "SB"
    }, {
      name: "Somalia",
      code: "SO"
    }, {
      name: "South Africa",
      code: "ZA"
    }, {
      name: "Spain",
      code: "ES"
    }, {
      name: "Sri Lanka",
      code: "LK"
    }, {
      name: "St Helena",
      code: "SH"
    }, {
      name: "St Kitts ",
      code: "KN"
    }, {
      name: "St Lucia",
      code: "LC"
    }, {
      name: "St Pierre ",
      code: "PM"
    }, {
      name: "St Vincent",
      code: "VC"
    }, {
      name: "Sudan",
      code: "SD"
    }, {
      name: "Suriname",
      code: "SR"
    }, {
      name: "Swaziland",
      code: "SZ"
    }, {
      name: "Sweden",
      code: "SE"
    }, {
      name: "Switzerland",
      code: "CH"
    }, {
      name: "Syrian Arab Republic",
      code: "SY"
    }, {
      name: "Taiwan, China",
      code: "TW"
    }, {
      name: "Tajikistan",
      code: "TJ"
    }, {
      name: "Tanzania",
      code: "TZ"
    }, {
      name: "Thailand",
      code: "TH"
    }, {
      name: "Togo",
      code: "TG"
    }, {
      name: "Tonga",
      code: "TO"
    }, {
      name: "Trinidad & Tobago",
      code: "TT"
    }, {
      name: "Tunisia",
      code: "TN"
    }, {
      name: "Turkey",
      code: "TR"
    }, {
      name: "Turkmenistan",
      code: "TM"
    }, {
      name: "Turks And Caicos Islands",
      code: "TC"
    }, {
      name: "Tuvalu",
      code: "TV"
    }, {
      name: "Uganda",
      code: "UG"
    }, {
      name: "Ukraine",
      code: "UA"
    }, {
      name: "Union Of Myanmar",
      code: "MM"
    }, {
      name: "United Arab Emirates",
      code: "AE"
    }, {
      name: "UNITED KINGDOM",
      code: "GB"
    }, {
      name: "Uruguay",
      code: "UY"
    }, {
      name: "US Minor Outlying Islands",
      code: "UM"
    }, {
      name: "US",
      code: "US"
    }, {
      name: "Uzbekistan",
      code: "UZ"
    }, {
      name: "Vanuatu",
      code: "VU"
    }, {
      name: "Venezuela",
      code: "VE"
    }, {
      name: "Vietnam",
      code: "VN"
    }, {
      name: "Virgin Islands (GB)",
      code: "VG"
    }, {
      name: "Virgin Islands (US)",
      code: "VI"
    }, {
      name: "Wallis And Futuna Islands",
      code: "WF"
    }, {
      name: "Yemen",
      code: "YE"
    }, {
      name: "Zaire ",
      code: "ZR"
    }, {
      name: "Zambia",
      code: "ZM"
    }, {
      name: "Zimbabwe",
      code: "ZW"
    }];

    //用于卡号的“输入卡号提示”和“警告提示”的切换，false表示当前为“警告提示”，true表示当前为“输入卡号提示”
    var isInputCard = false;

    //警告提示样式
    $.fn.qtip.styles.alert = {
      background: '#EE1B2F',
      color: 'white',
      textAlign: 'center',
      padding: 1,
      border: {
        width: 0,
        radius: 0,
        color: '#EE1B2F'
      },
      tip: true,
      width: 150
    };

    //////////////////////////////////qtip提示//////////////////////////////////////////
    //输入卡号时显示格式化的卡号提示
    var qtip_Card = {
      content: {
        text: '',
        color: '#FBB100',
        title: {
          text: '卡号' // Give the tooltip a title using each elements text
        }
      },
      position: {
        corner: {
          tooltip: 'bottomMiddle', // Use the corner...
          target: 'topMiddle' // ...and opposite corner
        }
      },
      show: {
        when: false, // Don't specify a show event
        ready: false, // Show the tooltip when ready
        delay: 0
      },
      hide: 'unfocus', // Don't specify a hide event
      style: {
        tip: true, // Apply a speech bubble tip to the tooltip at the designated tooltip corner
        border: {
          width: 2,
          radius: 0,
          color: '#4682B4'
        },
        title: {
          'color': '#6B8E23',
          'font-size': 14,
          background: 'white',
          'height': 15
        },
        background: '#F5F5F5',
        textAlign: 'center',
        color: '#FBB100',
        padding: 15,
        'font-size': 25,
        height: 35,
        width: 400 // Set the tooltip width
      }
    };

    //警告提示
    var qtip_Alert = {
      content: '格式错误',
      position: {
        corner: {
          tooltip: 'bottomMiddle',
          target: 'topMiddle'
        }
      },
      show: {
        when: false,
        ready: false
      },
      hide: {
        when: {
          event: 'click'
        },
        delay: 1000
      },
      style: {
        name: 'alert'
      }
    };
    //////////////////////////////////qtip提示//////////////////////////////////////////
    function checkCardNum() {
      var card = $("#CardNum");
      if (!LuhnCheck(card.val())) {
        isInputCard = false;
        card.qtip(qtip_Alert);
        card.qtip("api").updateContent('卡号有误，<br>请确认后重新输入。', false);
        card.qtip("show");
      }
    }

    function isEmail(email) {
      // 		 var Reg = /^[-_A-Za-z0-9]+@([_A-Za-z0-9]+\.)+[A-Za-z0-9]{2,3}$/; 更改正则 支持test.test@163.com
      var Reg = /^[-_A-Za-z0-9\.]+@([_A-Za-z0-9]+\.)+[A-Za-z0-9]{2,3}$/;
      if (Reg.test(email)) {
        return true;
      }
      return false;
    }

    /**
     *  格式化卡号：每4位显示增加一个空格
     */
    function formatCardNum(cardNum) {
      var formattedCardNum = "";
      var subTimes = cardNum.length / 4;
      subTimes = subTimes > 0 ? Math.floor(subTimes) : Math.ceil(subTimes);

      if (cardNum.length == 0) {
        return " ";
      }

      if (subTimes <= 0) {

        return cardNum;
      }

      var index = 0;

      for (; index < subTimes; index++) {
        formattedCardNum += cardNum.substr(index * 4, 4) + " ";
      }

      if (cardNum.length % 4 != 0) {
        formattedCardNum += cardNum.substr(index * 4);
      }

      return formattedCardNum;

    }
    //检查外卡支付 输入框数据
    function checkWDPCYBSData() {

      //firstname
      if ($.trim($("#PayerFirstName").val()) == "") {
        var firstname = $("#PayerFirstName");
        firstname.qtip(qtip_Alert);
        firstname.qtip("api").updateContent('必须字段', false);
        firstname.qtip('show');
        return false;
      }

      //lastname
      if ($.trim($("#PayerLastName").val()) == "") {
        var lastname = $("#PayerLastName");
        lastname.qtip(qtip_Alert);
        lastname.qtip("api").updateContent('必须字段', false);
        lastname.qtip('show');
        return false;
      }
      //cardnumber
      if (!LuhnCheck($("#CardNum").val())) {
        isInputCard = false;
        var cardnumber = $("#CardNum");
        cardnumber.qtip(qtip_Alert);
        cardnumber.qtip("api").updateContent('卡号有误，<br>请确认后重新输入。', false);
        cardnumber.qtip('show');
        return false;
      }

      //ExpiryDate month
      var expiryDateMonth = $("#ExpiryDateM");

      if (expiryDateMonth.val() == "" || expiryDateMonth.val() == null || expiryDateMonth.val == undefined) {
        expiryDateMonth.qtip(qtip_Alert);
        expiryDateMonth.qtip("api").updateContent('格式错误', false);
        expiryDateMonth.qtip("show");
        return false;
      }
      if ($("#ExpiryDateM").val() == "MM") {
        expiryDateMonth.qtip(qtip_Alert);
        expiryDateMonth.qtip("api").updateContent('必须字段', false);
        expiryDateMonth.qtip("show");
        return false;
      }

      //ExpiryDateYear
      var expiryDateYear = $("#ExpiryDateY");

      if (expiryDateYear.val() == "" || expiryDateYear.val() == null) {
        expiryDateYear.qtip(qtip_Alert);
        expiryDateYear.qtip("api").updateContent('格式错误', false);
        expiryDateYear.qtip("show");
        return false;
      }
      if (expiryDateYear.val() == "YY") {
        expiryDateYear.qtip(qtip_Alert);
        expiryDateYear.qtip("api").updateContent('必须字段', false);
        expiryDateYear.qtip("show");
        return false;
      }

      //CVV
      var cvv = $("#cvv");

      var reg = new RegExp("^[0-9]{4}$|^[0-9]{3}$");

      if (!reg.test(cvv.val())) {
        cvv.qtip(qtip_Alert);
        cvv.qtip("api").updateContent('格式错误', false);
        cvv.qtip("show");
        return false;
      }
      //邮箱
      var email = $("#email");
      if (null == email.val() || $.trim(email.val()) == "") {
        email.qtip(qtip_Alert);
        email.qtip("api").updateContent('必须字段', false);
        email.qtip("show");
        return false;
      }
      //验证邮箱格式
      if (email.val() != "" && !isEmail(email.val())) {
        email.qtip(qtip_Alert);
        email.qtip("api").updateContent('格式错误', false);
        email.qtip("show");
        return false;
      }
      /* 			var phoneNum = $("#PhoneNumber");
      if(null==phoneNum.val() || $.trim(phoneNum.val())==""){
      	phoneNum.qtip(qtip_Alert);
      	phoneNum.qtip("api").updateContent('必须字段',false);
      	phoneNum.qtip("show");
      	return false;
      } */
      var phoneCode = $("#phoneCode");
      if (null == phoneCode.val() || $.trim(phoneCode.val()) == "" || $.trim(phoneCode.val()) == "00") {
        phoneCode.qtip(qtip_Alert);
        phoneCode.qtip("api").updateContent('必须字段', false);
        phoneCode.qtip("show");
        return false;
      }

      var mobilePhone = $("#mobilePhone");
      if (null == mobilePhone.val() || $.trim(mobilePhone.val()) == "" || $.trim(mobilePhone.val()) == "00") {
        mobilePhone.qtip(qtip_Alert);
        mobilePhone.qtip("api").updateContent('必须字段', false);
        mobilePhone.qtip("show");
        return false;
      }

      var reg = new RegExp("^[0-9]{5,20}$");
      if (!reg.test(mobilePhone.val())) {
        mobilePhone.qtip(qtip_Alert);
        mobilePhone.qtip("api").updateContent('电话号码格式错误,需为20位以内纯数字', false);
        mobilePhone.qtip("show");
        return false;
      }

      $("#PhoneNumber").val(phoneCode.val() + "-" + mobilePhone.val());

      //countryCode
      var countryCode = $("#CountryCode");
      if (null == countryCode.val || $.trim(countryCode.val()) == "" || countryCode.val() == undefined || countryCode
        .val() == "00") {
        countryCode.qtip(qtip_Alert);
        countryCode.qtip("api").updateContent('必须字段', false);
        countryCode.qtip("show");
        return false;
      }

      //州/省state 略过


      var country_val = countryCode.val();


      if (country_val === "US" || country_val === "GB" || country_val === "CA") {
        //street1
        var address1 = $("#address1");

        if (null == address1.val() || $.trim(address1.val()) == "" || address1.val() == undefined) {
          address1.qtip(qtip_Alert);
          address1.qtip("api").updateContent('必须字段', false);
          address1.qtip("show");
          return false;
        }

        //city
        var city = $("#City");
        if (null == city.val() || $.trim(city.val()) == "") {
          city.qtip(qtip_Alert);
          city.qtip("api").updateContent('必须字段', false);
          city.qtip("show");
          return false;
        }

        //postalCode
        var postalCode = $("#PostalCode");

        if (null == postalCode.val() || $.trim(postalCode.val()) == "" || postalCode.val() == undefined) {
          postalCode.qtip(qtip_Alert);
          postalCode.qtip("api").updateContent('必须字段', false);
          postalCode.qtip("show");
          return false;
        }

        if (country_val === "US" || country_val === "CA") {
          //postalCode
          var province = $("#Province");
          if (null == province.val() || $.trim(province.val()) == "" || province.val() == undefined || province.val() ==
            "00") {
            province.qtip(qtip_Alert);
            province.qtip("api").updateContent('必须字段', false);
            province.qtip("show");
            return false;
          }
        }
      }

      return true;

    }

    function closeWCPayFail() {
      $("#wcPayFail").addClass("hide");
      $("#confirm_window_box").removeClass("hide");
    }
    //弹出wdp或cybs3d验证框
    function openfun2(s) {
      var iWidth = 960;
      var iHeight = 700;
      var iTop = (window.screen.availHeight - 30 - iHeight) / 2;
      var iLeft = (window.screen.availWidth - 10 - iWidth) / 2;
      var root = "/upp_payment";
      var args = $("#sytForm").serialize();
      var win = window.open(root + "/pay/wdpCybs/wdpCybsGoto3D.jsp?shtml=" + s, "弹出窗口", "width=" + iWidth +
        ", height=" + iHeight + ",top=" + iTop + ",left=" + iLeft +
        ",toolbar=no, menubar=no, scrollbars=yes, resizable=no,location=no, status=no,alwaysRaised=yes,depended=yes");
    }
    //选择卡类型 设置adion选中
    function changeRadio() {
      var cardType = $("#cardType").val();
      $("#" + cardType).attr("checked", "checked");
    }

    function openFfpWindow() {
      ffpPayFlag = true;
      $("#ffpConfirm").removeClass("hide");
    }

    function closeFfpWindow() {
      $(".payButton").attr("onclick", "gotoPay()");
      $(".payButton").css("background-color", "#ee1b2f");
      ffpPayFlag = false;
      $("#ffpConfirm").addClass("hide");
    }
    //	 	WDPCYBS  添加 js代码	

    $(function () {
      // 自动生成年份下拉选项
      function initValidYear(count) {
        var currentYear = new Date().getFullYear();
        var validYearTemplate = $("#validYearTemplate").html();

        var validFormatYearValue;
        var validYearText;
        var optionsHtml = "";

        for (var i = 0; i < count; i++) {
          validFormatYearValue = (parseInt(currentYear.toString().substr(2, 2))) + i;
          validYearText = (parseInt(currentYear)) + i;
          optionsHtml += validYearTemplate.replace("$validFormatYearValue", validFormatYearValue)
            .replace("$validYearText", validYearText);
        }
        $("select[name='one_year']").append(optionsHtml);
      }
      // 有效年份初始化往后21年
      initValidYear(21);

    });
  </script>

  <!-- 自动生成年份下拉选项模板 uppSytPay.jsp -->
  <script type="text/template" id="validYearTemplate">
    <option value="$validFormatYearValue">$validYearText</option>
</script>

</head>

<body>




  <form id="sytForm" name="sytForm" method="post" target="_blank" action="/upp_payment/pay/uppDoPay.upp">


    <!-- WDPCYBS cybs支付js脚本和指纹设备id deviceFingerprintID -->
    <input type="hidden" value="1577085756787" name="deviceFingerprintID" />
    <!-- WDPCYBS cybs支付js脚本和指纹设备id deviceFingerprintID-->
    <input type="hidden" value="GO1912230068226" name="ItemNo" id="ItemNo" /> <input type="hidden" value="10"
      name="OrderAmount" /> <input type="hidden" value="101" name="merAppId" /> <input type="hidden" value="100"
      name="MerId" />
    <input type="hidden" value="" name="ffpNo" />
    <input type="hidden" value="" name="cardnoKey" />
    <input type="hidden" value="https://b2c.csair.com/B2C40/walletPayment/chargingCard/payingForCallback.ao"
      name="callbackUrl" />
    <input type="hidden" value="https://b2c.csair.com/B2C40/walletPayment/chargingCard/payingForCallback.ao"
      name="showBackUrl" />
    <input type="hidden" value="国内" name="langTypeStr" />
    <input type="hidden" value="" name="orderType" />
    <input type="hidden" value="ECARD" name="orderFlag" />
    <input type="hidden" value="" name="reserved01" />
    <input type="hidden" value="" name="reserved02" />
    <input type="hidden" value="CNY" name="currency" />
    <input type="hidden" value="GO1912230068226" name="orderNum" />
    <input type="hidden" value="N" name="needBook" />
    <input type="hidden" value="N" name="needMerPayNo" />
    <input type="hidden" value="" name="jsPublicKey" id="jsPublicKey" />
    <input type="hidden" value="" name="exponent" id="exponent" />
    <input id="amount" type="hidden" value="10" name="amount" />
    <input id="cuttency" type="hidden" value="CNY" name="cuttency" />
    <input id="orderNo" type="hidden" value="GO1912230068226" name="orderNo" />
    <input id="uppPayNo" type="hidden" value="" name="uppPayNo" />
    <input id="langType" type="hidden" value="01" name="langType" />
    <input type="hidden" value="ZH_CN" name="lang" />
    <input id="resultMode" type="hidden" value="0" name="resultMode" />
    <input id="sysFlag" type="hidden" value="" name="sysFlag" />
    <input id="smsCode" type="hidden" value="" name="smsCode" />
    <input id="merPayNo" type="hidden" value="" name="merPayNo" />
    <input id="dataStr" type="hidden" value="" name="dataStr" />
    <input id="mybankcode" type="hidden" value="" name="mybankcode" />
    <input id="lostListNo" type="hidden" value="" name="lostListNo" />
    <input id="posFlag" type="hidden" value="" name="posFlag" />
    <input id="ffpMsgCode" type="hidden" value="" name="ffpMsgCode" />
    <input id="ffpType" type="hidden" value="" name="ffpType" />
    <!--交行信用卡快捷支付验证码票据号-->
    <input id="invioceNo" type="hidden" value="" name="invioceNo" />
    <!-- 用于uppShowPay.js区分加载页面 -->
    <input type="hidden" value="uppSytPay" name="pageName" />
    <input type="hidden" value="ZH_CN" name="lang" />
    <input type="hidden" id="creditChannelId" name="creditChannelId" value="" />
    <input type="hidden" id="paychannels" name="paychannels" value="" />
    <div class="booking-content W" style="padding-top: 0px;">
      <div class="pay-main" style="margin-top: 0px;">
        <div class="pay-status red" style="padding-left: 0px;background:scroll">
          <span class="order-status" id="first_msg">您已下单成功！</span>
          <span class="remain-time" id="second_msg"></span>
        </div>
        <div class="order-summary">
          <h4 class="payment-title">
            <span style="float:left;">订单信息</span>
            <span style="float:right;">订单号:<b>GO1912230068226</b></span>
          </h4>
          <table class="order-summary-info">
            <tbody>
              <tr>
                <td class="order-price-total" style="text-align:left;">收款方：

                  <b class="headTitleXQ">中国南方航空股份有限公司</b>


                </td>
              </tr>

              <tr>
                <td class="order-price-total" style="text-align: left;">商品信息：


                  <b class="headTitleXQ">充值卡</b>


                </td>
              </tr>

              <tr>
                <td class="order-price-total" style="text-align: left;">订单金额：&nbsp;&nbsp;
                  <b class="headTitleXQ" style="font-size: 20px; color: red;">
                    ￥<b id="payMoney">10</b>


                  </b>
                </td>
              </tr>

            </tbody>
          </table>
        </div>

        <div class="pay-way" id="upp_pay_tab">
          <ul class="pay-way-list">










            <li data-value="1" onclick="clearchannletype(0);"><a href="javascript:void(0);">第三方支付</a></li>

















            <li data-value="2" onclick="clearchannletype(0);"><a href="javascript:void(0);">快捷支付</a></li>
















            <li data-value="3" onclick="clearchannletype(0);"><a href="javascript:void(0);">网银支付</a></li>
















            <li data-value="4" onclick="clearchannletype(0);"><a href="javascript:void(0);">国外银行卡</a></li>
















            <li data-value="5" onclick="clearchannletype(0);"><a href="javascript:void(0);">线下POS</a></li>






          </ul>
        </div>
        <div class="upp_pay_icon" id="upp_pay_icon">



          <ul style="display: block;" data-value="1">



















            <!--WDPCYBS 外卡支付  直连 开始  2016/05/23 -->

            <!-- WDPCYBS 外卡支付  直连 结束  2016/05/23 -->


            <!-- 保证金冲抵支付 -->


            <!-- 线下pos支付 START-->

            <!-- 线下pos支付END -->



            <!-- 支付平台 -->
            <div class="paychannel">

              <div style="height: 166px; margin-top: 15px;">


                <div>



                  <li><input id="upp_radio_channelid_249" type="radio" otitle="预订流程-UPP生成订单-支付平台(快捷支付)-WXQR"
                      otype="button" class="upp_radio" value="249" name="radioChannel" /> <img
                      src="/upp_payment/pay/common/images/bank/WXPM.GIF" /></li>




                  <li><input id="upp_radio_channelid_137" type="radio" otitle="预订流程-UPP生成订单-支付平台(快捷支付)-ALIC"
                      otype="button" class="upp_radio" value="137" name="radioChannel" /> <img
                      src="/upp_payment/pay/common/images/bank/ALIF.png" /></li>




                  <li><input id="upp_radio_channelid_131" type="radio" otitle="预订流程-UPP生成订单-支付平台(快捷支付)-UOP"
                      otype="button" class="upp_radio" value="131" name="radioChannel" /> <img
                      src="/upp_payment/pay/common/images/bank/UOP.GIF" /></li>




                  <li><input id="upp_radio_channelid_151" type="radio" otitle="预订流程-UPP生成订单-支付平台(快捷支付)-UOPF"
                      otype="button" class="upp_radio" value="151" name="radioChannel" /> <img
                      src="/upp_payment/pay/common/images/bank/UOPF.GIF" /></li>



                </div>
                <div>



                  <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-支付平台(第三方支付)-CNPU" class="upp_radio"
                      value="135" name="radioChannel" /> <img src="/upp_payment/pay/common/images/bank/CNP.jpg" /></li>


                </div>
              </div>

              <div class="couponmsg" style="text-align: left;">
              </div>

            </div>
            <!-- 支付平台 END -->









          </ul>





          <ul data-value="2">


















            <!--WDPCYBS 外卡支付  直连 开始  2016/05/23 -->

            <!-- WDPCYBS 外卡支付  直连 结束  2016/05/23 -->


            <!-- 保证金冲抵支付 -->


            <!-- 线下pos支付 START-->

            <!-- 线下pos支付END -->








            <!-- 信用卡支付 -->
            <div class="paychannel">
              <div class="credit1">
                <table style="margin:auto;">
                  <tbody>
                    <tr>
                      <td class="title lheight">卡类型：</td>
                      <td><input type="radio" onclick="selectChannelId()" id="raCredit" checked="checked" name="cmdType"
                          value="UOPF" class="upp_radio" otype="button" otitle="预订流程-UPP生成订单-快捷支付"
                          style="width: 10px;float:left;margin-left: 11px;"><span onclick="changeCmdType('creditR')"
                          style="float:left;cursor:pointer;color:#666;" id="creditR">信用卡</span><span
                          style="float:left;">&nbsp</span>
                        <input type="radio" onclick="selectChannelId()" id="borrowCard" name="cmdType"
                          value="EposDebitSaleNew" class="upp_radio" otype="button" otitle="预订流程-UPP生成订单-快捷支付"
                          style="width: 10px;float:left;margin-left: 11px;"><span onclick="changeCmdType('creditR')"
                          style="float:left;cursor:pointer;color:#666;" id="creditR">借记卡</span></td>

                    </tr>
                    <tr>
                      <td><input id="BANK" name="BANK" value="UOPF" type="hidden"></td>
                    </tr>
                    <tr>
                      <td class="title lheight"><span class="xing">*</span>卡号：</td>
                      <td class="content lheight"><label><input type="text" value="" id="ACCOUNTNO" name="ACCOUNTNO"
                            onkeyup="this.value=this.value.replace(/\D/g,'')"
                            onafterpaste="this.value=this.value.replace(/\D/g,'')" onblur="selectChannelId()"></label>
                      </td>
                    </tr>
                    <tr id="creditEXPIREMONTH">
                      <td class="title lheight"><span class="xing">*</span>有效期：</td>
                      <td class="content lheight"><label><select style="width:104px;color:#666;" id="EXPIREMONTH"
                            name="EXPIREMONTH">
                            <option value="0">月</option>
                            <option value="01">01</option>
                            <option value="02">02</option>
                            <option value="03">03</option>
                            <option value="04">04</option>
                            <option value="05">05</option>
                            <option value="06">06</option>
                            <option value="07">07</option>
                            <option value="08">08</option>
                            <option value="09">09</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                          </select></label><label><select style="width:101px;margin-left:10px;color:#666;"
                            id="EXPIREYEAR" name="EXPIREYEAR">
                            <option value="0">年</option>
                            <option value="2015">2015</option>
                            <option value="2016">2016</option>
                            <option value="2017">2017</option>
                            <option value="2018">2018</option>
                            <option value="2019">2019</option>
                            <option value="2020">2020</option>
                            <option value="2021">2021</option>
                            <option value="2022">2022</option>
                            <option value="2023">2023</option>
                            <option value="2024">2024</option>
                            <option value="2025">2025</option>
                            <option value="2026">2026</option>
                            <option value="2027">2027</option>
                            <option value="2028">2028</option>
                            <option value="2029">2029</option>
                            <option value="2030">2030</option>
                            <option value="2031">2031</option>
                          </select></label></td>
                    </tr>
                    <tr id="creditCVV2">
                      <td class="title lheight"><span class="xing">*</span>CVV2：</td>
                      <td class="content lheight"><label><input type="password" value=""
                            onkeyup="this.value=this.value.replace(/\D/g,'')"
                            onafterpaste="this.value=this.value.replace(/\D/g,'')" placeholder="信用卡背后3位CVV2码"
                            maxlength="3" class="txt inw" id="CVV" name="CVV"></label></td>
                    </tr>
                    <tr id="creditBUYERNAME">
                      <td class="title lheight"><span class="xing">*</span>持卡人姓名：</td>
                      <td class="content lheight"><label><input type="text" value="" maxlength="18" class="txt inw ibg"
                            id="BUYERNAME" name="BUYERNAME"></label></td>
                    </tr>
                    <tr id="creditIDTYPE">
                      <td class="title lheight"><span class="xing">*</span>持卡人证件类型：</td>
                      <td class="content lheight"><label><select id="IDTYPE" name="IDTYPE"
                            style="width:215px;color:#666;">
                            <option value="IDCARD" date-lang="身份证">身份证</option>
                            <option value="PASSPORT" date-lang="护照">护照</option>
                            <option value="OFFICERPASS" date-lang="军官证">军官证</option>
                            <option value="HM_VISITORPASS" date-lang="港澳居民来往内地通行证">港澳居民来往内地通行证</option>
                            <option value="T_VISITORPASS" date-lang="台湾居民来往大陆通行证">台湾居民来往大陆通行证</option>
                            <option value="OTHER" date-lang="其他">其他</option>
                          </select></label></td>
                    </tr>
                    <tr id="creditIDCARD">
                      <td class="title lheight"><span class="xing">*</span>持卡人证件号：</td>
                      <td class="content lheight"><label><input type="text" value="" class="txt inw" id="IDCARD"
                            name="IDCARD"></label></td>
                    </tr>
                    <tr id="creditMOBILE">
                      <td class="title lheight"><span class="xing">*</span>银行预留手机号：</td>
                      <td class="content lheight"><label><input type="text" value=""
                            onkeyup="this.value=this.value.replace(/\D/g,'')"
                            onafterpaste="this.value=this.value.replace(/\D/g,'')" placeholder="预留手机号" maxlength="11"
                            class="txt inw" id="MOBILE" name="MOBILE"></label></td>
                    </tr>

                    <tr>
                      <td class="title lheight"><span class="xing">*</span>验证码：</td>
                      <td class="content lheight">
                        <div style="float:left;"><input type="text" style="width:90px" class="txt inw2" maxlength="6"
                            id="CODENAME" name="CODENAME" onkeyup="value=value.replace(/[^\w\.\/]/ig,'')"
                            onafterpaste="value=value.replace(/[^\w\.\/]/ig,'')"></div>

                        <div><input type="button" id="buttonForCode" name="clickButton" class="creditPaySendCode"
                            style="width:100px;float:none;height: 27px;" value="获取验证码">
                      <td id="codeMsg" style="color: red"></td>
              </div>
              </td>
              </tr>
              <tr>
                <td style="text-align: right; " colspan="2">
                  <span name="phoneTips" id="phoneTips" class="xing" style="text-align: center;"></span>
                </td>

              </tr>
              </tbody>
              </table>
              <div class="couponmsg" style="float: left;text-align: left;">
              </div>
            </div>
        </div>
        <!-- 信用卡支付 END -->




        </ul>





        <ul data-value="3">


















          <!--WDPCYBS 外卡支付  直连 开始  2016/05/23 -->

          <!-- WDPCYBS 外卡支付  直连 结束  2016/05/23 -->

          <!-- 网上银行 -->
          <div class="paychannel">



            <!-- 判断有没有优惠提示语 -->



            <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-ICBC" class="upp_radio" checked="checked"
                value="bank002" name="radioChannel" /> <img src="/upp_payment/pay/common/images/bank/ICBCC.GIF" /></li>
















            <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-CCB" class="upp_radio" name="radioChannel"
                value="bank003" /> <img class="bankImage" src="/upp_payment/pay/common/images/bank/CCB.jpg" /></li>














            <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-CMB" class="upp_radio" name="radioChannel"
                value="bank001" /> <img class="bankImage" src="/upp_payment/pay/common/images/bank/CMB.jpg" /></li>














            <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-BOC" class="upp_radio" name="radioChannel"
                value="bank004" /> <img class="bankImage" src="/upp_payment/pay/common/images/bank/BOC.GIF" /></li>














            <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-SPDB" class="upp_radio" name="radioChannel"
                value="bank012" /> <img class="bankImage" src="/upp_payment/pay/common/images/bank/SPDBA.GIF" /></li>














            <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-ABC" class="upp_radio" name="radioChannel"
                value="bank005" /> <img class="bankImage" src="/upp_payment/pay/common/images/bank/abc.jpg" /></li>














            <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-CIB" class="upp_radio" name="radioChannel"
                value="bank013" /> <img class="bankImage" src="/upp_payment/pay/common/images/bank/CIB.GIF" /></li>














            <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-CEB" class="upp_radio" name="radioChannel"
                value="bank025" /> <img class="bankImage" src="/upp_payment/pay/common/images/bank/CEB.GIF" /></li>














            <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-CMBC" class="upp_radio" name="radioChannel"
                value="bank011" /> <img class="bankImage" src="/upp_payment/pay/common/images/bank/CMBC.GIF" /></li>














            <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-PSBC" class="upp_radio" name="radioChannel"
                value="bank006" /> <img class="bankImage" src="/upp_payment/pay/common/images/bank/PSBC.GIF" /></li>














            <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-CITI" class="upp_radio" name="radioChannel"
                value="bank016" /> <img class="bankImage" src="/upp_payment/pay/common/images/bank/ZXB.png" /></li>














            <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-PAB" class="upp_radio" name="radioChannel"
                value="bank024" /> <img class="bankImage" src="/upp_payment/pay/common/images/bank/pingan.jpg" /></li>














            <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-COMM" class="upp_radio" name="radioChannel"
                value="bank020" /> <img class="bankImage" src="/upp_payment/pay/common/images/bank/BOCOM.GIF" /></li>














            <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-HXB" class="upp_radio" name="radioChannel"
                value="bank022" /> <img class="bankImage" src="/upp_payment/pay/common/images/bank/HXB.GIF" /></li>














            <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-SHA" class="upp_radio" name="radioChannel"
                value="bank026" /> <img class="bankImage" src="/upp_payment/pay/common/images/bank/SHB.gif" /></li>














            <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-BOBJ" class="upp_radio" name="radioChannel"
                value="bank023" /> <img class="bankImage" src="/upp_payment/pay/common/images/bank/BOB.GIF" /></li>























































































          </div>
          <!-- 网上银行 END -->


          <!-- 保证金冲抵支付 -->


          <!-- 线下pos支付 START-->

          <!-- 线下pos支付END -->










          <!-- 网上银行 其他银行 -->
          <div class="clr">
            <div id="otherBank" class="otherBank">



















































































              <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-CBHB" class="upp_radio"
                  name="radioChannel" value="bank039" /> <img class="bankImage"
                  src="/upp_payment/pay/common/images/bank/CBHB.GIF" /></li>






              <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-NJCB" class="upp_radio"
                  name="radioChannel" value="bank034" /> <img class="bankImage"
                  src="/upp_payment/pay/common/images/bank/BON.GIF" /></li>






              <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-HZB" class="upp_radio"
                  name="radioChannel" value="bank036" /> <img class="bankImage"
                  src="/upp_payment/pay/common/images/bank/HCCB.GIF" /></li>






              <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-CZB" class="upp_radio"
                  name="radioChannel" value="bank038" /> <img class="bankImage"
                  src="/upp_payment/pay/common/images/bank/ZSB.gif" /></li>






              <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-BJCRB" class="upp_radio"
                  name="radioChannel" value="bank033" /> <img class="bankImage"
                  src="/upp_payment/pay/common/images/bank/BJNSB.gif" /></li>






              <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-SRCB" class="upp_radio"
                  name="radioChannel" value="bank032" /> <img class="bankImage"
                  src="/upp_payment/pay/common/images/bank/SHNSB.gif" /></li>






              <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-PSBC" class="upp_radio"
                  name="radioChannel" value="bank006" /> <img class="bankImage"
                  src="/upp_payment/pay/common/images/bank/PSBC.GIF" /></li>






              <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-NBCB" class="upp_radio"
                  name="radioChannel" value="bank037" /> <img class="bankImage"
                  src="/upp_payment/pay/common/images/bank/NBB.gif" /></li>






              <li><input type="radio" otype="button" otitle="预订流程-UPP生成订单-网银支付-FDB" class="upp_radio"
                  name="radioChannel" value="bank067" /> <img class="bankImage"
                  src="/upp_payment/pay/common/images/bank/FDB.gif" /></li>




            </div>

            <li id="moreBank" onclick="otherBank()" style="padding-left: 0px; width: 231px;">
              <div style="margin-top: 5px;text-align: center;"><a href="javascript:void(0)" id="otherbtn"><span
                    id="otherTips" style="font-size:20px;color:#40b5e2; font-weight: 600;">更多银行 </span></a></div>
            </li>

          </div>
          <div class="upp_pay_sub" id="bank_notices">

            <div class="couponmsg" style="float: left;text-align: left;">
            </div>

            <div class="bank-notice hide" id="ICBCCNotice">
              <table width="100%" cellspacing="0" cellpadding="0" class="nt">
                <tbody>
                  <tr>
                    <th colspan="6">中国工商银行</th>
                  </tr>
                  <tr>
                    <td>银行名称</td>
                    <td colspan="2">客户类型</td>
                    <td>参数名称</td>
                    <td>限额</td>
                    <td>客服热线</td>
                  </tr>
                  <tr>
                    <td rowspan="15">中国工商银行</td>
                    <td colspan="2" rowspan="3">柜面注册存量静态密码客户</td>
                    <td>单笔支付限额</td>
                    <td>300元</td>
                    <td rowspan="15">95588</td>
                  </tr>
                  <tr>
                    <td>日累计支付限额</td>
                    <td>300元</td>
                  </tr>
                  <tr>
                    <td>总支付限额</td>
                    <td>300元</td>
                  </tr>
                  <tr>
                    <td rowspan="4">电子银行口令卡客户</td>
                    <td rowspan="2">未开通短信认证</td>
                    <td>单笔支付限额</td>
                    <td>500元</td>
                  </tr>
                  <tr>
                    <td>日累计支付限额</td>
                    <td>1000元</td>
                  </tr>
                  <tr>
                    <td rowspan="2">开通短信认证</td>
                    <td>单笔支付限额</td>
                    <td>2000元</td>
                  </tr>
                  <tr>
                    <td>日累计支付限额</td>
                    <td>5000元</td>
                  </tr>
                  <tr>
                    <td colspan="2" rowspan="2">工银电子密码器</td>
                    <td>单笔支付限额</td>
                    <td>50万元</td>
                  </tr>
                  <tr>
                    <td>日累计支付限额</td>
                    <td>100万元</td>
                  </tr>
                  <tr>
                    <td colspan="2" rowspan="2">U盾客户</td>
                    <td>单笔支付限额</td>
                    <td>100万元</td>
                  </tr>
                  <tr>
                    <td>日累计支付限额</td>
                    <td>100万元</td>
                  </tr>
                  <tr>
                    <td colspan="2" rowspan="2">工银e支付</td>
                    <td>单笔支付限额</td>
                    <td>10000元</td>
                  </tr>
                  <tr>
                    <td>月累计支付限额</td>
                    <td>10000元</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="bank-notice hide" id="CCBNotice">
              <table width="100%" cellspacing="0" cellpadding="0" class="nt">
                <tbody>
                  <tr>
                    <th colspan="9">建设银行</th>
                  </tr>
                  <tr>
                    <td>支持卡种</td>
                    <td>覆盖范围</td>
                    <td colspan="2">客户类型</td>
                    <td colspan="2">支付限额</td>
                    <td>客服热线</td>
                  </tr>
                  <tr>
                    <td rowspan="8">龙卡借记卡<br>龙卡准贷记卡<br>龙卡贷记卡</td>
                    <td rowspan="8">全国</td>
                    <td colspan="2" rowspan="2">账号支付</td>
                    <td>单笔支付限额</td>
                    <td>5万</td>
                    <td rowspan="8">95533</td>
                  </tr>
                  <tr>
                    <td>日累计支付限额</td>
                    <td>5万</td>
                  </tr>
                  <tr>
                    <td rowspan="4">网银签约</td>
                    <td rowspan="2">代理点客户</td>
                    <td>单笔支付限额</td>
                    <td>100万元</td>
                  </tr>
                  <tr>
                    <td>日累计支付限额</td>
                    <td>100万元</td>
                  </tr>
                  <tr>
                    <td rowspan="2">个人客户</td>
                    <td>单笔支付限额</td>
                    <td>3万</td>
                  </tr>
                  <tr>
                    <td>日累计支付限额</td>
                    <td>3万</td>
                  </tr>
                  <tr>
                    <td colspan="2" rowspan="2">龙卡贷记卡</td>
                    <td>单笔支付限额</td>
                    <td>5万</td>
                  </tr>
                  <tr>
                    <td>日累计支付限额</td>
                    <td>5万</td>
                  </tr>
                  <tr>
                    <td colspan="7">
                      <div class="remind">
                        <h5><span class="star">※</span>使用条件及开通流程：</h5>
                        <p>（1）网上银行客户需要开通网上支付功能，即开通网上银行服务。</p>
                        <p>（2）您可以登录中国建设银行网站自助申请开通网上银行服务，成为网上银行普通客户，您还可以到 中国建设银行营业网点申请，成为网上银行网银盾客户，以享受更安全的网上支付交易。</p>
                        <p>
                          （3）“账号支付”是建设银行打造的新型网上支付方式，通过建立银行账号与手机号码之间的对应关系，持有建行活期储蓄账户（含卡、折）或贷记卡账户的客户，无需开通网上银行，直接输入“银行账号+手机短信验证码”，即可进行网上小额支付。
                        </p>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="bank-notice hide" id="CMBNotice">
              <table width="100%" cellspacing="0" cellpadding="0" class="nt">
                <tbody>
                  <tr>
                    <th colspan="8">招商银行</th>
                  </tr>
                  <tr>
                    <td width="5%" rowspan="3">银行名称</td>
                    <td width="5%" rowspan="3">支持卡种</td>
                    <td width="5%" rowspan="3">覆盖范围</td>
                    <td rowspan="3">支付密码</td>
                    <td colspan="4">支付限额</td>
                  </tr>
                  <tr>
                    <td colspan="2">无证书客户（网上个人银行大众版）</td>
                    <td colspan="2">证书客户（网上个人银行专业版）</td>
                  </tr>
                  <tr>
                    <td>单笔支付限额</td>
                    <td>日累计支付限额</td>
                    <td>单笔支付限额</td>
                    <td>日累计支付限额</td>
                  </tr>
                  <tr>
                    <td rowspan="2">招商银行</td>
                    <td>日累计支付限额</td>
                    <td rowspan="2">全国</td>
                    <td>网上个人银行大众版：支付密码<br>网上个人银行专业版：取款密码</td>
                    <td>保护期内：500元<br>保护期外：5000元</td>
                    <td>5000元</td>
                    <td>无限额</td>
                    <td>无限额</td>
                  </tr>
                  <tr>
                    <td>信用卡</td>
                    <td>支付密码</td>
                    <td>由信用卡额度决定</td>
                    <td>由信用卡额度决定</td>
                    <td>由信用卡额度决定</td>
                    <td>由信用卡额度决定</td>
                  </tr>
                  <tr>
                    <td colspan="8">
                      <div class="remind">
                        <h5><span class="star">※</span>友情提醒：</h5>
                        <p>（1）如果您希望使用网上个人银行大众版进行网上支付交易，请先通过招商银行营业网点、网上个人银行大众版、网上个人银行专业版或95555开通一卡通或信用卡的网上支付功能。</p>
                        <p>（2）如果您希望使用网上个人银行专业版进行网上支付交易，请先通过招商银行营业网点申请专业版优KEY。</p>
                        <p>（3）招商银行客服热线：95555。</p>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="bank-notice hide" id="GDBNotice">
              <table width="100%" cellspacing="0" cellpadding="0" class="nt">
                <tbody>
                  <tr>
                    <th colspan="8">广发银行</th>
                  </tr>
                  <tr>
                    <td>银行名称</td>
                    <td>支持卡种</td>
                    <td>覆盖范围</td>
                    <td>支付方式</td>
                    <td></td>
                    <td>支付限额</td>
                  </tr>
                  <tr>
                    <td rowspan="4">广发银行</td>
                    <td rowspan="4">借记卡<br>信用卡</td>
                    <td rowspan="4">全国</td>
                    <td>手机动态验证码</td>
                    <td>网银登录密码+手机动态验证码</td>
                    <td>5000元/日</td>
                  </tr>
                  <tr>
                    <td>Key令</td>
                    <td>网银登录密码+key令动态验证码</td>
                    <td>50000元/日</td>
                  </tr>
                  <tr>
                    <td>Key盾</td>
                    <td>网银登录密码+key盾密码</td>
                    <td>500000元/日</td>
                  </tr>
                  <tr>
                    <td>大额卡密</td>
                    <td>取款密码+CVV2+手机动态验证码</td>
                    <td>20000元/日</td>
                  </tr>
                  <tr>
                    <td colspan="6">
                      <div class="remind">
                        <h5><span class="star">※</span>友情提醒：</h5>
                        <p>（1）您需要开通网上支付功能，请参考以下指引进行：</p>
                        <p style="text-indent:20px;">
                          ①若您尚未注册个人网银，可先登录广发网站www.cgbchina.com.cn开通个人网银，将用于网上支付的账户加挂个人网银，即可开通该账户的网上支付功能。</p>
                        <p style="text-indent:20px;">
                          ②若您已注册了个人网银，但用于网上支付的账户尚未加挂在个人网银中，可先登录个人网银，将用于网上支付的账户加挂个人网银，即可开通该账户的网上支付功能。</p>
                        <p>（2）重要提示：为保证您的成功支付，请正确下载并安装：<br>普通客户，请下载并安装普通用户网银工具包。<br> Key盾客户，请下载并安装Key盾用户网银工具包。</p>
                        <h5><span class="star">※</span>客服热线：4008308003</h5>
                        <h5><span class="star">※</span>信用卡专线：95508</h5>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="bank-notice hide" id="BOCNotice">
              <table width="100%" cellspacing="0" cellpadding="0" class="nt">
                <tbody>
                  <tr>
                    <td colspan="7"><strong>中国银行</strong></td>
                  </tr>
                  <tr>
                    <td width="7%">银行名称</td>
                    <td width="10%">客户类型</td>
                    <td width="10%">覆盖范围</td>
                    <td width="35%">支付密码</td>
                    <td width="28%">支付限额</td>
                  </tr>
                  <tr>
                    <td rowspan="2">中国银行</td>
                    <td>网银理财版</td>
                    <td rowspan="2">全国</td>
                    <td rowspan="2">网银用户需输入网银密码登录，<br>凭安全认证工具支付<br>（如手机短信验证码+动态口令、CA安全证书）</td>
                    <td rowspan="2">借记卡单笔50万元；<br>信用卡单笔5万元</td>
                  </tr>
                  <tr>
                    <td>网银贵宾版</td>
                  </tr>
                  <tr>
                    <td colspan="5">
                      <div class="remind">
                        <h5><span class="star">※</span>友情提醒：</h5>
                        <p>（1）请先确定您的网银已经开通网上支付功能；如未开通，请登录中行网银，在“电子支付”项下，开通“网上支付”功能。</p>
                        <p>（2）您可登录中行网银，查询过往的网上支付详细记录。</p>
                        <p>（3）如您未开通中行网银，您可选择就近的中行网点快速办理网银开户业务。</p>
                        <p>（4）中国银行客户服务热线：95566。</p>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="bank-notice hide" id="SPDBANotice">
              <table width="100%" cellspacing="0" cellpadding="0" class="nt">
                <tbody>
                  <tr>
                    <th colspan="7">浦发银行</th>
                  </tr>
                  <tr>
                    <td width="10%" rowspan="3">支持卡种</td>
                    <td width="8%" rowspan="3">覆盖范围</td>
                    <td width="20%" rowspan="3">支付密码</td>
                    <td colspan="4">支付限额</td>
                  </tr>
                  <tr>
                    <td colspan="2">无证书客户（动态密码）</td>
                    <td colspan="2">证书客户</td>
                  </tr>
                  <tr>
                    <td>单笔支付限额</td>
                    <td>日累计支付限额</td>
                    <td>单笔支付限额</td>
                    <td>日累计支付限额</td>
                  </tr>
                  <tr>
                    <td>轻松理财卡</td>
                    <td rowspan="2">全国</td>
                    <td rowspan="2">动态支付密码（无证书客户）<br>ATM取款密码（证书客户）</td>
                    <td rowspan="2">具体支付时单笔单日限额以我行与商户签约的限额为准</td>
                    <td>200000</td>
                    <td rowspan="2">具体支付时单笔单日限额以我行与商户签约的限额为准</td>
                    <td rowspan="2">无限额</td>
                  </tr>
                  <tr>
                    <td>东方卡</td>
                    <td>200000</td>
                  </tr>
                  <tr>
                    <td colspan="7">
                      <div class="remind">
                        <h5><span class="star">※</span>友情提醒：</h5>
                        <p>（1）您需要开通网上支付功能，即开通个人网上银行。</p>
                        <p>（2）您可以通过到上海浦东发展银行营业网点柜面申请网上银行，享受安全、便捷的网上支付交易。</p>
                        <p>客服热线：95528</p>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="bank-notice hide" id="ABCNotice">
              <table width="100%" cellspacing="0" cellpadding="0" class="nt">
                <tbody>
                  <tr>
                    <td colspan="7"><strong>中国农业银行</strong></td>
                  </tr>
                  <tr>
                    <td width="8%">银行名称</td>
                    <td width="8%">支持卡种</td>
                    <td width="8%">覆盖范围</td>
                    <td width="14%">支付密码</td>
                    <td width="25%">支付限额</td>
                    <td width="27%">使用条件</td>
                    <td width="7%">客服热线</td>
                  </tr>
                  <tr>
                    <td rowspan="2">中国农业银行</td>
                    <td>借记卡</td>
                    <td rowspan="2">全国</td>
                    <td>网银支付</td>
                    <td>网银支付100万/笔、100万/日</td>
                    <td>在农行网点开通网银</td>
                    <td rowspan="2">95599</td>
                  </tr>
                  <tr>
                    <td>信用卡</td>
                    <td>K码支付</td>
                    <td>K码支付1万/笔、1万/日</td>
                    <td>信用卡客户和已开通短信动账通知服务的客户均可使用K码支付</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <!-- 网上银行 其他银行  END-->


        </ul>





        <ul data-value="4">


















          <!--WDPCYBS 外卡支付  直连 开始  2016/05/23 -->

          <input type="hidden" value="" name="PaymentType" id="PaymentType" />
          <input id="WDP017" type="radio" name="radioChannel" style="display:none;" value="WDP017" />
          <input id="WDP018" type="radio" name="radioChannel" style="display:none;" value="WDP018" />
          <input id="WDP027" type="radio" name="radioChannel" style="display:none;" value="WDP027" />
          <input id="WDP019" type="radio" name="radioChannel" style="display:none;" value="WDP019" />
          <input id="WDP015" type="radio" name="radioChannel" style="display:none;" value="WDP015" />

          <div class="paychannel">
            <div class="typeBox">
              <!-- 				<table width="100%"  border="0" cellspacing="20" cellpadding="0" class="unionPay2"> -->
              <table width="80%" border="0" cellspacing="0" cellpadding="0" class="unionPay2" style="margin:auto;">
                <tbody>
                  <tr>
                    <td colspan="4" style="font-size:20px;color:#0093D0">&nbsp;&nbsp;&nbsp;支付卡信息<center>
                        <hr style="border:1px #cccccc dashed ;width:90%;" />
                      </center>
                    </td>
                  </tr>
                  <!-- WDPCYBS 对应channelID的字段 WDP017 截取WDP后017就是子网关的id-->
                  <!-- 				<div class="div_hi"> -->
                  <tr>
                    <td class="title">卡类型&nbsp;<span class="redstar">*</span></td>
                    <td class="content" id="CardComponent" style="border-bottom:10px;" nowrap>

                      <select id="cardType" name="cardTypeWp" onChange="javascript:changeRadio();">
                        <option value="">请选择</option>

                        <option value="WDP017">
                          Visa




                        </option>

                        <option value="WDP018">

                          MasterCard



                        </option>

                        <option value="WDP027">


                          Diners Club


                        </option>

                        <option value="WDP015">




                          American Express
                        </option>

                        <!-- 	<option value="ECMC-SSL">MasterCard</option>
								<option value="AMEX-SSL">American Express</option>
							<option value="JCB-SSL">JCB</option>
								<option value="DINERS-SSL">Diners Club</option> -->
                      </select>

                      <input type="hidden" value="" autocomplete="off" name="CardTypeDetial" />
                    </td>
                    <td class="title">卡号&nbsp;<span class="redstar">*</span></td>
                    <td class="content">
                      <!-- 						<input type="text" name="address1" id="address1" autocomplete="off"  value="" maxLength="128" tabindex="8"/> -->
                      <input type="text" name="CardNum" id="CardNum" value="" maxLength="19" style="ime-mode: disabled"
                        autocomplete="off" tabindex="3" onblur="checkCardNum();" onpaste="checkPaste();">
                      <input type="hidden" name="inputCardNoType" id="inputCardNoType">
                    </td>
                  </tr>
                  <!-- 				</div> -->
                  <!-- WDPCYBS  对应channelID的字段 WDP017 截取WDP后017就是子网关的id-->

                  <!-- WDPCYBS firstName-->
                  <tr>
                    <td class="title">名&nbsp;<span class="redstar">*</span></td>
                    <td class="content">
                      <input type="text" name="PayerFirstName" id="PayerFirstName" value="" maxLength="128"
                        tabindex="1" />
                      <span class="tipbox fnameTip"><b class="ico-tips">?</b></span>
                    </td>
                    <td class="title">姓&nbsp;<span class="redstar">*</span></td>
                    <td class="content">
                      <input type="text" name="PayerLastName" id="PayerLastName" value="" maxLength="128"
                        tabindex="2" />
                      <span class="tipbox fnameTip"><b class="ico-tips">?</b></span>
                    </td>
                  </tr>
                  <!-- WDPCYBS firstName-->

                  <!-- WDPCYBS LastName-->
                  <tr>
                    <td class="title">有效期&nbsp;<span class="redstar">*</span></td>
                    <td class="content">
                      <select name="ExpiryDateM" id="ExpiryDateM" tabindex="4" style="width: 70px;">
                        <option value="MM"></option>
                        <option value="01">01</option>
                        <option value="02">02</option>
                        <option value="03">03</option>
                        <option value="04">04</option>
                        <option value="05">05</option>
                        <option value="06">06</option>
                        <option value="07">07</option>
                        <option value="08">08</option>
                        <option value="09">09</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                      </select>
                      <select name="ExpiryDateY" id="ExpiryDateY" tabindex="5" style="width: 70px;">
                        <option value="YY"></option>
                        <option value="2015">2015</option>
                        <option value="2016">2016</option>
                        <option value="2017">2017</option>
                        <option value="2018">2018</option>
                        <option value="2019">2019</option>
                        <option value="2020">2020</option>
                        <option value="2021">2021</option>
                        <option value="2022">2022</option>
                        <option value="2023">2023</option>
                        <option value="2024">2024</option>
                        <option value="2025">2025</option>
                        <option value="2026">2026</option>
                        <option value="2027">2027</option>
                        <option value="2028">2028</option>
                        <option value="2029">2029</option>
                        <option value="2030">2030</option>
                      </select>
                      <input type="hidden" value="20" name="ExpiryDate" id="ExpiryDate" />
                      <span class="tipbox" id="expiryTip"><b class="ico-tips">?</b></span>
                    </td>
                    <td class="title">CVV&nbsp;<span class="redstar">*</span></td>
                    <td class="content">
                      <input type="password" name="cvv" id="cvv" tabindex="6" maxLength="4" value=""
                        onkeyup="this.value=this.value.replace(/\D/g,'')"
                        onafterpaste="this.value=this.value.replace(/\D/g,'')" />
                      <span class="tipbox" id="cvvtip"><b class="ico-tips">?</b></span>
                    </td>
                  </tr>
                  <!-- WDPCYBS LastName -->

                  <!-- WDPCYBS CardNum-->
                  <tr>

                    <td class="title">账单国家/地区&nbsp;<span class="redstar">*</span></td>
                    <td class="content">
                      <select name="CountryCode" id="CountryCode" tabindex="11">
                        <!-- <option value="00"></option><option value="AF">Afghanistan</option><option value="AL">Albania</option><option value="DZ">Algeria</option><option value="AS">American Samoa</option><option value="AD">Andorra</option><option value="AO">Angola</option><option value="AI">Anguilla</option><option value="AG">Antigua &amp; Barbuda</option><option value="AR">Argentina</option><option value="AM">Armenia</option><option value="AW">Aruba</option><option value="AU">Australia</option><option value="AT">Austria</option><option value="AZ">Azerbaijan</option><option value="BS">Bahamas</option><option value="BH">Bahrain</option><option value="BD">Bangladesh</option><option value="BB">Barbados</option><option value="BY">Belarus</option><option value="BE">Belgium</option><option value="BZ">Belize</option><option value="BJ">Benin</option><option value="BM">Bermuda</option><option value="BT">Bhutan</option><option value="BO">Bolivia</option><option value="BA">Bosnia/Hercegovina</option><option value="BW">Botswana</option><option value="BR">Brazil</option><option value="BN">Brunei Darussalam</option><option value="BG">Bulgaria</option><option value="BF">Burkina Faso</option><option value="BI">Burundi</option><option value="KH">Cambodia</option><option value="CM">Cameroon</option><option value="CA">Canada</option><option value="CV">Cape Verde</option><option value="KY">Cayman Is</option><option value="CF">Central African Republic</option><option value="TD">Chad</option><option value="CL">Chile</option><option value="CN">CHINA</option><option value="CX">Christmas Island</option><option value="CC">Cocos Islands</option><option value="CO">Colombia</option><option value="KM">Comoros</option><option value="CG">Congo, People's Republic of</option><option value="CK">Cook Islands</option><option value="CR">Costa Rica</option><option value="CI">Cote d'Ivoire</option><option value="HR">Croatia</option><option value="CU">Cuba</option><option value="CY">Cyprus</option><option value="CZ">Czech Republic</option><option value="CS">Czech</option><option value="CD">Democratic Republic of (was Zaire)</option><option value="DK">Denmark</option><option value="DJ">Djibouti</option><option value="DM">Dominica</option><option value="DO">Dominican Republic</option><option value="EC">Ecuador</option><option value="EG">Egypt</option><option value="SV">El Salvador</option><option value="GQ">Equatorial Guinea</option><option value="ER">Eritrea</option><option value="EE">Estonia</option><option value="ET">Ethiopia</option><option value="FK">Falkland Islands</option><option value="FO">Faroe Islands</option><option value="FJ">Fiji</option><option value="FI">Finland</option><option value="FR">FRANCE</option><option value="GF">French Guiana</option><option value="PF">French Polynesia</option><option value="GA">Gabon</option><option value="GM">Gambia</option><option value="GE">Georgia</option><option value="DE">Germany</option><option value="GH">Ghana</option><option value="GI">Gibraltar</option><option value="GR">Greece</option><option value="GL">Greenland</option><option value="GD">Grenada</option><option value="GP">Guadeloupe</option><option value="GU">Guam</option><option value="GT">Guatemala</option><option value="GN">Guinea</option><option value="GW">Guinea-Bissau</option><option value="GY">Guyana</option><option value="HT">Haiti</option><option value="HN">Honduras</option><option value="HK">Hong Kong</option><option value="HU">Hungary</option><option value="IS">Iceland</option><option value="IN">India</option><option value="ID">INDONESIA</option><option value="IR">Iran</option><option value="IQ">Iraq</option><option value="IE">Ireland</option><option value="IL">Israel</option><option value="IT">ITALY</option><option value="JM">Jamaica</option><option value="JP">JAPAN</option><option value="JO">Jordan</option><option value="KZ">Kazakhstan</option><option value="KE">Kenya</option><option value="KI">Kiribati</option><option value="KP">Korea, Democratic Peoples Republic</option><option value="KR">Korea, Republic of</option><option value="KW">Kuwait</option><option value="KG">Kyrgyzstan</option><option value="LA">Lao People's Democratic Republic</option><option value="LV">Latvia</option><option value="LB">Lebanon</option><option value="LS">Lesotho</option><option value="LR">Liberia</option><option value="LY">Libyan Arab Jamahiriya</option><option value="LT">Lithuania</option><option value="LU">Luxembourg</option><option value="MO">Macau</option><option value="MK">Macedonia</option><option value="MG">Madagascar</option><option value="MW">Malawi</option><option value="MY">Malaysia</option><option value="MV">Maldives</option><option value="ML">Mali</option><option value="MT">Malta</option><option value="MP">Mariana Islands, Northern</option><option value="MH">Marshall Islands</option><option value="MQ">Martinique</option><option value="MR">Mauritania</option><option value="MU">Mauritius</option><option value="YT">Mayotte</option><option value="MX">Mexico</option><option value="FM">Micronesia</option><option value="MD">Moldavia</option><option value="MC">Monaco</option><option value="MN">Mongolia</option><option value="MS">Montserrat</option><option value="MA">Morocco</option><option value="MZ">Mozambique</option><option value="NA">Namibia</option><option value="NR">Nauru Island</option><option value="NP">Nepal</option><option value="AN">Netherlands Antilles</option><option value="NL">Netherlands</option><option value="NC">New Caledonia</option><option value="NZ">New Zealand</option><option value="NI">Nicaragua</option><option value="NE">Niger</option><option value="NG">Nigeria</option><option value="NU">Niue</option><option value="NF">Norfolk Island</option><option value="NO">Norway</option><option value="OM">Oman</option><option value="PK">Pakistan</option><option value="PW">Palau Islands</option><option value="PA">Panama</option><option value="PG">Papua New Guinea</option><option value="PY">Paraguay</option><option value="PE">Peru</option><option value="PH">Philippines</option><option value="PL">Poland</option><option value="PT">Portugal</option><option value="PR">Puerto Rico</option><option value="QA">Qatar</option><option value="RE">Reunion Island</option><option value="RO">Romania</option><option value="RU">Russian Federation</option><option value="XU">Russian within Asia</option><option value="RW">Rwanda</option><option value="WS">Samoa</option><option value="SM">San Marino</option><option value="ST">Sao Tome </option><option value="SA">Saudi Arabia</option><option value="SN">Senegal</option><option value="SC">Seychelles</option><option value="SL">Sierra Leone</option><option value="SG">Singapore</option><option value="SK">Slovakia</option><option value="SI">Slovenia</option><option value="SB">Solomon Islands</option><option value="SO">Somalia</option><option value="ZA">South Africa</option><option value="ES">Spain</option><option value="LK">Sri Lanka</option><option value="SH">St Helena</option><option value="KN">St Kitts </option><option value="LC">St Lucia</option><option value="PM">St Pierre </option><option value="VC">St Vincent</option><option value="SD">Sudan</option><option value="SR">Suriname</option><option value="SZ">Swaziland</option><option value="SE">Sweden</option><option value="CH">Switzerland</option><option value="SY">Syrian Arab Republic</option><option value="TW">TAIWAN</option><option value="TJ">Tajikistan</option><option value="TZ">Tanzania</option><option value="TH">Thailand</option><option value="TG">Togo</option><option value="TO">Tonga</option><option value="TT">Trinidad &amp; Tobago</option><option value="TN">Tunisia</option><option value="TR">Turkey</option><option value="TM">Turkmenistan</option><option value="TC">Turks And Caicos Islands</option><option value="TV">Tuvalu</option><option value="UG">Uganda</option><option value="UA">Ukraine</option><option value="MM">Union Of Myanmar</option><option value="AE">United Arab Emirates</option><option value="GB">UNITED KINGDOM</option><option value="UY">Uruguay</option><option value="UM">US Minor Outlying Islands</option><option value="US">US</option><option value="UZ">Uzbekistan</option><option value="VU">Vanuatu</option><option value="VE">Venezuela</option><option value="VN">Vietnam</option><option value="VG">Virgin Islands (GB)</option><option value="VI">Virgin Islands (US)</option><option value="WF">Wallis And Futuna Islands</option><option value="YE">Yemen</option><option value="ZR">Zaire </option><option value="ZM">Zambia</option><option value="ZW">Zimbabwe</option> -->
                        <option value="00">请选择</option>
                        <option value="AF">Afghanistan</option>
                        <option value="AL">Albania</option>
                        <option value="DZ">Algeria</option>
                        <option value="AS">American Samoa</option>
                        <option value="AD">Andorra</option>
                        <option value="AO">Angola</option>
                        <option value="AI">Anguilla</option>
                        <option value="AG">Antigua &amp; Barbuda</option>
                        <option value="AR">Argentina</option>
                        <option value="AM">Armenia</option>
                        <option value="AW">Aruba</option>
                        <option value="AU">Australia</option>
                        <option value="AT">Austria</option>
                        <option value="AZ">Azerbaijan</option>
                        <option value="BS">Bahamas</option>
                        <option value="BH">Bahrain</option>
                        <option value="BD">Bangladesh</option>
                        <option value="BB">Barbados</option>
                        <option value="BY">Belarus</option>
                        <option value="BE">Belgium</option>
                        <option value="BZ">Belize</option>
                        <option value="BJ">Benin</option>
                        <option value="BM">Bermuda</option>
                        <option value="BT">Bhutan</option>
                        <option value="BO">Bolivia</option>
                        <option value="BA">Bosnia/Hercegovina</option>
                        <option value="BW">Botswana</option>
                        <option value="BR">Brazil</option>
                        <option value="BN">Brunei Darussalam</option>
                        <option value="BG">Bulgaria</option>
                        <option value="BF">Burkina Faso</option>
                        <option value="BI">Burundi</option>
                        <option value="KH">Cambodia</option>
                        <option value="CM">Cameroon</option>
                        <option value="CA">Canada</option>
                        <option value="CV">Cape Verde</option>
                        <option value="KY">Cayman Is</option>
                        <option value="CF">Central African Republic</option>
                        <option value="TD">Chad</option>
                        <option value="CL">Chile</option>
                        <option value="CN">CHINA</option>
                        <option value="CX">Christmas Island</option>
                        <option value="CC">Cocos Islands</option>
                        <option value="CO">Colombia</option>
                        <option value="KM">Comoros</option>
                        <option value="CG">Congo, People's Republic of</option>
                        <option value="CK">Cook Islands</option>
                        <option value="CR">Costa Rica</option>
                        <option value="CI">Cote d'Ivoire</option>
                        <option value="HR">Croatia</option>
                        <option value="CU">Cuba</option>
                        <option value="CY">Cyprus</option>
                        <option value="CZ">Czech Republic</option>
                        <option value="CS">Czech</option>
                        <option value="CD">Democratic Republic of (was
                          Zaire)</option>
                        <option value="DK">Denmark</option>
                        <option value="DJ">Djibouti</option>
                        <option value="DM">Dominica</option>
                        <option value="DO">Dominican Republic</option>
                        <option value="EC">Ecuador</option>
                        <option value="EG">Egypt</option>
                        <option value="SV">El Salvador</option>
                        <option value="GQ">Equatorial Guinea</option>
                        <option value="ER">Eritrea</option>
                        <option value="EE">Estonia</option>
                        <option value="ET">Ethiopia</option>
                        <option value="FK">Falkland Islands</option>
                        <option value="FO">Faroe Islands</option>
                        <option value="FJ">Fiji</option>
                        <option value="FI">Finland</option>
                        <option value="FR">FRANCE</option>
                        <option value="GF">French Guiana</option>
                        <option value="PF">French Polynesia</option>
                        <option value="GA">Gabon</option>
                        <option value="GM">Gambia</option>
                        <option value="GE">Georgia</option>
                        <option value="DE">Germany</option>
                        <option value="GH">Ghana</option>
                        <option value="GI">Gibraltar</option>
                        <option value="GR">Greece</option>
                        <option value="GL">Greenland</option>
                        <option value="GD">Grenada</option>
                        <option value="GP">Guadeloupe</option>
                        <option value="GU">Guam</option>
                        <option value="GT">Guatemala</option>
                        <option value="GN">Guinea</option>
                        <option value="GW">Guinea-Bissau</option>
                        <option value="GY">Guyana</option>
                        <option value="HT">Haiti</option>
                        <option value="HN">Honduras</option>
                        <option value="HK">Hong Kong, China</option>
                        <option value="HU">Hungary</option>
                        <option value="IS">Iceland</option>
                        <option value="IN">India</option>
                        <option value="ID">INDONESIA</option>
                        <option value="IR">Iran</option>
                        <option value="IQ">Iraq</option>
                        <option value="IE">Ireland</option>
                        <option value="IL">Israel</option>
                        <option value="IT">ITALY</option>
                        <option value="JM">Jamaica</option>
                        <option value="JP">JAPAN</option>
                        <option value="JO">Jordan</option>
                        <option value="KZ">Kazakhstan</option>
                        <option value="KE">Kenya</option>
                        <option value="KI">Kiribati</option>
                        <option value="KP">Korea, Democratic Peoples
                          Republic</option>
                        <option value="KR">Korea, Republic of</option>
                        <option value="KW">Kuwait</option>
                        <option value="KG">Kyrgyzstan</option>
                        <option value="LA">Lao People's Democratic
                          Republic</option>
                        <option value="LV">Latvia</option>
                        <option value="LB">Lebanon</option>
                        <option value="LS">Lesotho</option>
                        <option value="LR">Liberia</option>
                        <option value="LY">Libyan Arab Jamahiriya</option>
                        <option value="LT">Lithuania</option>
                        <option value="LU">Luxembourg</option>
                        <option value="MO">Macau, China</option>
                        <option value="MK">Macedonia</option>
                        <option value="MG">Madagascar</option>
                        <option value="MW">Malawi</option>
                        <option value="MY">Malaysia</option>
                        <option value="MV">Maldives</option>
                        <option value="ML">Mali</option>
                        <option value="MT">Malta</option>
                        <option value="MP">Mariana Islands, Northern</option>
                        <option value="MH">Marshall Islands</option>
                        <option value="MQ">Martinique</option>
                        <option value="MR">Mauritania</option>
                        <option value="MU">Mauritius</option>
                        <option value="YT">Mayotte</option>
                        <option value="MX">Mexico</option>
                        <option value="FM">Micronesia</option>
                        <option value="MD">Moldavia</option>
                        <option value="MC">Monaco</option>
                        <option value="MN">Mongolia</option>
                        <option value="MS">Montserrat</option>
                        <option value="MA">Morocco</option>
                        <option value="MZ">Mozambique</option>
                        <option value="NA">Namibia</option>
                        <option value="NR">Nauru Island</option>
                        <option value="NP">Nepal</option>
                        <option value="AN">Netherlands Antilles</option>
                        <option value="NL">Netherlands</option>
                        <option value="NC">New Caledonia</option>
                        <option value="NZ">New Zealand</option>
                        <option value="NI">Nicaragua</option>
                        <option value="NE">Niger</option>
                        <option value="NG">Nigeria</option>
                        <option value="NU">Niue</option>
                        <option value="NF">Norfolk Island</option>
                        <option value="NO">Norway</option>
                        <option value="OM">Oman</option>
                        <option value="PK">Pakistan</option>
                        <option value="PW">Palau Islands</option>
                        <option value="PA">Panama</option>
                        <option value="PG">Papua New Guinea</option>
                        <option value="PY">Paraguay</option>
                        <option value="PE">Peru</option>
                        <option value="PH">Philippines</option>
                        <option value="PL">Poland</option>
                        <option value="PT">Portugal</option>
                        <option value="PR">Puerto Rico</option>
                        <option value="QA">Qatar</option>
                        <option value="RE">Reunion Island</option>
                        <option value="RO">Romania</option>
                        <option value="RU">Russian Federation</option>
                        <option value="XU">Russian within Asia</option>
                        <option value="RW">Rwanda</option>
                        <option value="WS">Samoa</option>
                        <option value="SM">San Marino</option>
                        <option value="ST">Sao Tome</option>
                        <option value="SA">Saudi Arabia</option>
                        <option value="SN">Senegal</option>
                        <option value="SC">Seychelles</option>
                        <option value="SL">Sierra Leone</option>
                        <option value="SG">Singapore</option>
                        <option value="SK">Slovakia</option>
                        <option value="SI">Slovenia</option>
                        <option value="SB">Solomon Islands</option>
                        <option value="SO">Somalia</option>
                        <option value="ZA">South Africa</option>
                        <option value="ES">Spain</option>
                        <option value="LK">Sri Lanka</option>
                        <option value="SH">St Helena</option>
                        <option value="KN">St Kitts</option>
                        <option value="LC">St Lucia</option>
                        <option value="PM">St Pierre</option>
                        <option value="VC">St Vincent</option>
                        <option value="SD">Sudan</option>
                        <option value="SR">Suriname</option>
                        <option value="SZ">Swaziland</option>
                        <option value="SE">Sweden</option>
                        <option value="CH">Switzerland</option>
                        <option value="SY">Syrian Arab Republic</option>
                        <option value="TW">Taiwan, China</option>
                        <option value="TJ">Tajikistan</option>
                        <option value="TZ">Tanzania</option>
                        <option value="TH">Thailand</option>
                        <option value="TG">Togo</option>
                        <option value="TO">Tonga</option>
                        <option value="TT">Trinidad &amp; Tobago</option>
                        <option value="TN">Tunisia</option>
                        <option value="TR">Turkey</option>
                        <option value="TM">Turkmenistan</option>
                        <option value="TC">Turks And Caicos Islands</option>
                        <option value="TV">Tuvalu</option>
                        <option value="UG">Uganda</option>
                        <option value="UA">Ukraine</option>
                        <option value="MM">Union Of Myanmar</option>
                        <option value="AE">United Arab Emirates</option>
                        <option value="GB">UNITED KINGDOM</option>
                        <option value="UY">Uruguay</option>
                        <option value="UM">US Minor Outlying Islands</option>
                        <option value="US">United States of America</option>
                        <option value="UZ">Uzbekistan</option>
                        <option value="VU">Vanuatu</option>
                        <option value="VE">Venezuela</option>
                        <option value="VN">Vietnam</option>
                        <option value="VG">Virgin Islands (GB)</option>
                        <option value="VI">Virgin Islands (US)</option>
                        <option value="WF">Wallis And Futuna Islands</option>
                        <option value="YE">Yemen</option>
                        <option value="ZR">Zaire</option>
                        <option value="ZM">Zambia</option>
                        <option value="ZW">Zimbabwe</option>
                      </select>
                    </td>
                  </tr>

                  <tr class="billInfo_tr">
                    <td colspan="4" style="font-size:20px;color:#0093D0">&nbsp;&nbsp;&nbsp;账单地址<center>
                        <hr style="border:1px #cccccc dashed ;width:90%;" />
                      </center>
                    </td>
                  </tr>
                  <!-- WDPCYBS CardNum -->

                  <!-- WDPCYBS -->
                  <tr class="billInfo_tr">
                    <td class="title">街道地址 1&nbsp;<span class="redstar">*</span></td>
                    <td class="content"><input type="text" name="address1" id="address1" autocomplete="off" value=""
                        maxLength="128" tabindex="8" /></td>

                    <td class="title" style="text-indent: 2em;line-height:15px">街道地址 2<br /><small>(可选)</small>&nbsp;
                    </td>
                    <td class="content"><input type="text" name="address2" id="address2" value="" autocomplete="off"
                        maxLength="128" tabindex="9" /></td>


                  </tr>
                  <!-- WDPCYBS -->

                  <!-- WDPCYBS -->
                  <tr class="billInfo_tr">
                    <td class="title">城市&nbsp;<span class="redstar">*</span></td>
                    <td class="content"><input type="text" name="City" id="City" value="" maxLength="128"
                        tabindex="13" /></td>
                    <td class="title">邮政编码&nbsp;<span class="redstar">*</span></td>
                    <td class="content"><input type="text" name="PostalCode" id="PostalCode" style="ime-mode: disabled"
                        tabindex="10" autocomplete="off" value=""
                        onkeyup="this.value=this.value.replace(/[^A-Za-z0-9]+/g,'')"
                        onafterpaste="this.value=this.value.replace(/[^A-Za-z0-9]+/g,'')" /></td>
                    <!-- 						<td class="title">CVV&nbsp;</td>
						<td class="content"><input type="password" name="cvv" id="cvv" tabindex="6" maxLength="4" value="" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"/></td> -->
                  </tr>
                  <!-- WDPCYBS -->

                  <!-- WDPCYBS -->
                  <tr id="Province_grandfather" class="billInfo_tr">
                    <td class="title">州/省&nbsp;<span class="redstar">*</span></td>
                    <td class="content" id="Province_father">
                      <!-- 		<input type="text" name="Province" value="" maxLength="128" tabindex="12"/> -->
                      <select name="Province" id="Province" value="" maxLength="128"></select>
                    </td>
                    <td class="title">&nbsp;</td>
                    <td class="content">&nbsp;</td>
                  </tr>
                  <tr>
                    <td colspan="4" style="font-size:20px;color:#0093D0">&nbsp;&nbsp;&nbsp;联系信息<center>
                        <hr style="border:1px #cccccc dashed ;width:90%;" />
                      </center>
                    </td>
                  </tr>
                  <tr>
                    <td class="title">邮箱&nbsp;<span class="redstar">*</span></td>
                    <!-- 测试自动填充 email这个email是cybs提供   cybs根据这个email 确定是测试数据  melody要求  如果是测试生产接口email用 test@cybersource.com 只有调用测试的jsp才会显示，否则显示 -->
                    <td class="content"><input type="text" name="email" id="email" value="" tabindex="14"></td>

                    <td class="title">电话号码&nbsp;<span class="redstar">*</span></td>
                    <td class="content">
                      <!-- 						<input type="text" name="PhoneNumber" id="PhoneNumber" value=""  tabindex="15"/> -->
                      <select id="phoneCode" name="phoneCode" style="width:122px;">
                        <option value="00">请选择</option>
                        <option value="+93"> Afghanistan +93</option>
                        <option value="+355"> Albania +355</option>
                        <option value="+213"> Algeria +213</option>
                        <option value="+1"> American Samoa +1</option>
                        <option value="+376"> Andorra +376</option>
                        <option value="+244"> Angola +244</option>
                        <option value="+1"> Anguilla +1</option>
                        <option value="+672"> Antarctica +672</option>
                        <option value="+1"> Antigua and Barbuda +1</option>
                        <option value="+54"> Argentina +54</option>
                        <option value="+374"> Armenia +374</option>
                        <option value="+297"> Aruba +297</option>
                        <option value="+61"> Australia +61</option>
                        <option value="+43"> Austria +43</option>
                        <option value="+994"> Azerbaijan +994</option>
                        <option value="+1"> Bahamas +1</option>
                        <option value="+973"> Bahrain +973</option>
                        <option value="+880"> Bangladesh +880</option>
                        <option value="+1"> Barbados +1</option>
                        <option value="+375"> Belarus +375</option>
                        <option value="+32"> Belgium +32</option>
                        <option value="+501"> Beoptionze +501</option>
                        <option value="+229"> Benin +229</option>
                        <option value="+1"> Bermuda +1</option>
                        <option value="+975"> Bhutan +975</option>
                        <option value="+591"> Booptionvia +591</option>
                        <option value="+387"> Bosnia and Herzegovina +387</option>
                        <option value="+267"> Botswana +267</option>
                        <option value="+55"> Brazil +55</option>
                        <option value="+1"> British Virgin Islands +1</option>
                        <option value="+673"> Brunei +673</option>
                        <option value="+359"> Bulgaria +359</option>
                        <option value="+226"> Burkina Faso +226</option>
                        <option value="+257"> Burundi +257</option>
                        <option value="+855"> Cambodia +855</option>
                        <option value="+237"> Cameroon +237</option>
                        <option value="+1"> Canada +1</option>
                        <option value="+238"> Cape Verde +238</option>
                        <option value="+1"> Cayman Islands +1</option>
                        <option value="+236"> Central African Repuboptionc +236</option>
                        <option value="+235"> Chad +235</option>
                        <option value="+56"> Chile +56</option>
                        <option value="+86"> China +86</option>
                        <option value="+61"> Christmas Island +61</option>
                        <option value="+61"> Cocos Islands +61</option>
                        <option value="+57"> Colombia +57</option>
                        <option value="+269"> Comoros +269</option>
                        <option value="+682"> Cook Islands +682</option>
                        <option value="+506"> Costa Rica +506</option>
                        <option value="+225"> Cote D'ivoire +225</option>
                        <option value="+385"> Croatia +385</option>
                        <option value="+599"> Curacao +599</option>
                        <option value="+357"> Cyprus +357</option>
                        <option value="+420"> Czech Repuboptionc +420</option>
                        <option value="+243"> Democratic Repuboptionc of the Congo +243</option>
                        <option value="+45"> Denmark +45</option>
                        <option value="+253"> Djibouti +253</option>
                        <option value="+1"> Dominica +1</option>
                        <option value="+1"> Dominican Repuboptionc +1</option>
                        <option value="+670"> East Timor +670</option>
                        <option value="+593"> Ecuador +593</option>
                        <option value="+20"> Egypt +20</option>
                        <option value="+503"> El Salvador +503</option>
                        <option value="+224"> Equatorial Guinea +224</option>
                        <option value="+291"> Eritrea +291</option>
                        <option value="+372"> Estonia +372</option>
                        <option value="+251"> Ethiopia +251</option>
                        <option value="+500"> Falkland Islands +500</option>
                        <option value="+298"> Faroe Islands +298</option>
                        <option value="+252"> Federal Repuboptionc of Somaoptiona +252</option>
                        <option value="+691"> Federated States of Micronesia +691</option>
                        <option value="+679"> Fiji +679</option>
                        <option value="+358"> Finland +358</option>
                        <option value="+33"> France +33</option>
                        <option value="+594"> French Guiana +594</option>
                        <option value="+689"> French Polynesia +689</option>
                        <option value="+241"> Gabon +241</option>
                        <option value="+220"> Gambia +220</option>
                        <option value="+995"> Georgia +995</option>
                        <option value="+49"> Germany +49</option>
                        <option value="+233"> Ghana +233</option>
                        <option value="+350"> Gibraltar +350</option>
                        <option value="+30"> Greece +30</option>
                        <option value="+299"> Greenland +299</option>
                        <option value="+1"> Grenada +1</option>
                        <option value="+502"> Guadeloupe +502</option>
                        <option value="+1"> Guam +1</option>
                        <option value="+502"> Guatemala +502</option>
                        <option value="+224"> Guinea +224</option>
                        <option value="+245"> Guinea-Bissau +245</option>
                        <option value="+592"> Guyana +592</option>
                        <option value="+509"> Haiti +509</option>
                        <option value="+504"> Honduras +504</option>
                        <option value="+852"> Hong Kong, China +852</option>
                        <option value="+36"> Hungary +36</option>
                        <option value="+354"> Iceland +354</option>
                        <option value="+91"> India +91</option>
                        <option value="+62"> Indonesia +62</option>
                        <option value="+98"> Iran +98</option>
                        <option value="+964"> Iraq +964</option>
                        <option value="+353"> Ireland +353</option>
                        <option value="+972"> Israel +972</option>
                        <option value="+39"> Italy +39</option>
                        <option value="+1"> Jamaica +1</option>
                        <option value="+81"> Japan +81</option>
                        <option value="+962"> Jordan +962</option>
                        <option value="+7"> Kazakhstan +7</option>
                        <option value="+254"> Kenya +254</option>
                        <option value="+686"> Kiribati +686</option>
                        <option value="+965"> Kuwait +965</option>
                        <option value="+996"> Kyrgyzstan +996</option>
                        <option value="+856"> Laos +856</option>
                        <option value="+371"> Latvia +371</option>
                        <option value="+961"> Lebanon +961</option>
                        <option value="+266"> Lesotho +266</option>
                        <option value="+231"> optionberia +231</option>
                        <option value="+218"> optionbya +218</option>
                        <option value="+423"> optionechtenstein +423</option>
                        <option value="+370"> optionthuania +370</option>
                        <option value="+352"> Luxembourg +352</option>
                        <option value="+853"> Macau, China +853</option>
                        <option value="+389"> Macedonia +389</option>
                        <option value="+261"> Madagascar +261</option>
                        <option value="+265"> Malawi +265</option>
                        <option value="+60"> Malaysia +60</option>
                        <option value="+960"> Maldives +960</option>
                        <option value="+223"> Maoption +223</option>
                        <option value="+356"> Malta +356</option>
                        <option value="+692"> Marshall Islands +692</option>
                        <option value="+596"> Martinique +596</option>
                        <option value="+222"> Mauritania +222</option>
                        <option value="+230"> Mauritius +230</option>
                        <option value="+269"> Mayotte +269</option>
                        <option value="+52"> Mexico +52</option>
                        <option value="+373"> Moldova +373</option>
                        <option value="+377"> Monaco +377</option>
                        <option value="+976"> Mongooptiona +976</option>
                        <option value="+382"> Montenegro +382</option>
                        <option value="+1"> Montserrat +1</option>
                        <option value="+212"> Morocco +212</option>
                        <option value="+258"> Mozambique +258</option>
                        <option value="+95"> Myanmar +95</option>
                        <option value="+264"> Namibia +264</option>
                        <option value="+674"> Nauru +674</option>
                        <option value="+977"> Nepal +977</option>
                        <option value="+31"> Netherlands +31</option>
                        <option value="+599"> Netherlands Antilles +599</option>
                        <option value="+687"> New Caledonia +687</option>
                        <option value="+64"> New Zealand +64</option>
                        <option value="+505"> Nicaragua +505</option>
                        <option value="+227"> Niger +227</option>
                        <option value="+234"> Nigeria +234</option>
                        <option value="+683"> Niue +683</option>
                        <option value="+672"> Norfolk Island +672</option>
                        <option value="+850"> North Korea +850</option>
                        <option value="+1"> Northern Mariana Islands +1</option>
                        <option value="+47"> Norway +47</option>
                        <option value="+968"> Oman +968</option>
                        <option value="+92"> Pakistan +92</option>
                        <option value="+680"> Palau +680</option>
                        <option value="+507"> Panama +507</option>
                        <option value="+675"> Papua New Guinea +675</option>
                        <option value="+595"> Paraguay +595</option>
                        <option value="+51"> Peru +51</option>
                        <option value="+63"> Phioptionppines +63</option>
                        <option value="+48"> Poland +48</option>
                        <option value="+351"> Portugal +351</option>
                        <option value="+1"> Puerto Rico +1</option>
                        <option value="+974"> Qatar +974</option>
                        <option value="+242"> Repuboptionc of the Congo +242</option>
                        <option value="+262"> Reunion +262</option>
                        <option value="+40"> Romania +40</option>
                        <option value="+7"> Russia +7</option>
                        <option value="+250"> Rwanda +250</option>
                        <option value="+685"> Samoa +685</option>
                        <option value="+378"> San Marino +378</option>
                        <option value="+239"> Sao Tome and Principe +239</option>
                        <option value="+966"> Saudi Arabia +966</option>
                        <option value="+221"> Senegal +221</option>
                        <option value="+381"> Serbia +381</option>
                        <option value="+248"> Seychelles +248</option>
                        <option value="+232"> Sierra Leone +232</option>
                        <option value="+65"> Singapore +65</option>
                        <option value="+1"> Sint Maarten +1</option>
                        <option value="+421"> Slovakia +421</option>
                        <option value="+386"> Slovenia +386</option>
                        <option value="+677"> Solomon Islands +677</option>
                        <option value="+27"> South Africa +27</option>
                        <option value="+82"> South Korea +82</option>
                        <option value="+34"> Spain +34</option>
                        <option value="+94"> Sri Lanka +94</option>
                        <option value="+290"> St. Helena +290</option>
                        <option value="+1"> St. Kitts and Nevis +1</option>
                        <option value="+1"> St. Lucia +1</option>
                        <option value="+508"> St. Pierre and Miquelon +508</option>
                        <option value="+1"> St. Vincent and the Grenadines +1</option>
                        <option value="+249"> Sudan +249</option>
                        <option value="+597"> Suriname +597</option>
                        <option value="+268"> Swaziland +268</option>
                        <option value="+46"> Sweden +46</option>
                        <option value="+41"> Switzerland +41</option>
                        <option value="+963"> Syria +963</option>
                        <option value="+886"> Taiwan, China +886</option>
                        <option value="+992"> Tajikistan +992</option>
                        <option value="+255"> Tanzania +255</option>
                        <option value="+66"> Thailand +66</option>
                        <option value="+228"> Togo +228</option>
                        <option value="+690"> Tokelau +690</option>
                        <option value="+676"> Tonga +676</option>
                        <option value="+1"> Trinidad and Tobago +1</option>
                        <option value="+216"> Tunisia +216</option>
                        <option value="+90"> Turkey +90</option>
                        <option value="+993"> Turkmenistan +993</option>
                        <option value="+1"> Turks and Caicos +1</option>
                        <option value="+688"> Tuvalu +688</option>
                        <option value="+1"> U.S. Virgin Islands +1</option>
                        <option value="+256"> Uganda +256</option>
                        <option value="+380"> Ukraine +380</option>
                        <option value="+971"> United Arab Emirates +971</option>
                        <option value="+44"> United Kingdom +44</option>
                        <option value="+1"> United States of America +1</option>
                        <option value="+598"> Uruguay +598</option>
                        <option value="+998"> Uzbekistan +998</option>
                        <option value="+678"> Vanuatu +678</option>
                        <option value="+39"> Vatican City +39</option>
                        <option value="+58"> Venezuela +58</option>
                        <option value="+84"> Vietnam +84</option>
                        <option value="+681"> Waloptions and Futuna +681</option>
                        <option value="+967"> Yemen +967</option>
                        <option value="+260"> Zambia +260</option>
                        <option value="+263"> Zimbabwe +263</option>
                      </select>
                      <input type="text" name="mobilePhone" id="mobilePhone" style="width:95px;" value="" />
                      <input type="hidden" name="PhoneNumber" id="PhoneNumber" />
                    </td>
                  </tr>
                  <!-- WDPCYBS -->
                </tbody>
              </table>

              <!-- WDPCYBS table -->
              <div>
                <ul class="payItemList clearfix onePay" id="onePayList" style="display:block;">
                </ul>
              </div>
              <div class="remind oneKey-grey">
                <h3>提示：</h3>
                <p>1.您的交易或者退款可能会收取一定费用。如果您的银行卡记账货币与本次预订的付款货币不同，您的银行将以普通汇率进行相应的兑换，并且可能会收取手续费。有关详细信息，请咨询您的发卡行。</p>
                <p>2.因为南航是全球性网站，您的交易可能被发卡行收取跨境交易手续费。有关详细信息，请咨询您的发卡行。</p>
                <p>3.您的银行及信用卡信息将在支付过程中加密。我们确保您的个人及财务信息是安全及保密的。</p>
                <p>4.如果如有问题，请拨打我们的客服热线：4006695539（中国大陆） 或+86-4008695539 (国际)。</p>
              </div>
              <div class="couponmsg" style="float: left;text-align: left;">
                <a style="color: red;" href="javascript:void(0);" class="remark1"></a><br>
                <a style="color: red;" href="javascript:void(0);" class="remark2"></a><br>
                <a style="color: red;" href="javascript:void(0);" class="remark3"></a><br>
              </div>
            </div>
          </div>

          <!-- WDPCYBS 外卡支付  直连 结束  2016/05/23 -->


          <!-- 保证金冲抵支付 -->


          <!-- 线下pos支付 START-->

          <!-- 线下pos支付END -->











        </ul>





        <ul data-value="5">


















          <!--WDPCYBS 外卡支付  直连 开始  2016/05/23 -->

          <!-- WDPCYBS 外卡支付  直连 结束  2016/05/23 -->


          <!-- 保证金冲抵支付 -->


          <!-- 线下pos支付 START-->

          <!-- 线下pos支付END -->











        </ul>



        <div class="upp_pay_sub">
          <div class="anotherpay-tipbox hide" id="anotherpayTipBox">
            <p class="tip" style="text-align:left;padding-right: 10px;">为避免风险，建议您通过电话确认代付申请人是您的亲友本人，不要为陌生人付款。</p>
            <div id="df-checkbox" class="checkbox" style="text-align:left;"><input type="hidden"
                id="terms">我知道是为他人代付，商品或服务不归我所有。若发生退款，将返回支付账户。</div>
          </div>
          <input type="hidden" name="encodeMsg"
            value="B70F4C8105DA9E1AAE13F30B77FE3760719A5D6FA4F3E3026BD516CB4414EEF599DF1049A5089AAC30C022EF0AF64C0BF252D17A06B675A51DA5F8FDF52CD12BC217CF065C2EC0ACF0422577C5A8A8DB02AF098D0C5C3F67A90A4979A1BD5A20BCB73F613D89E912DD059FC996B85B244A3DF1C3CBE73040772A6FE7282B23005920CD72F12910BF5D3D21CD94CD1ADA9FCB38A937AD326F2F40D88E10C241BB2033369EF25940A269DAEABAE5CE3B1D438284F28634329C3235539ED9F86C08890A566ABA7BEA398E524E74E9445D2A8DF29BC000EBA5D3CC5CE353B669D593A6EA3D31348D417A9F18764C3F40B9C57B8FF72217ACD7F5B64F63E1B9D693C00766CDE02F223C900343C72147A94D52B519E9B83AAA384CD596569E6D9CEE71470B46EC61FC3CE9F4D5804EE41FE9FDF74EC4FF1A23549E2EE4633E0B2BF996D0551FDB4DE5D56EEEC83786D4F5D26642431161C38058F3A7384D55053311FC7A4F6660DC318744FEFC10DFD8ED01EFE6AB2299620234A0B28C3F94D1042C20A66CC0B58994676F3C470DD72E2C95105D9BB2287A8497DD16B8CF592631F297E0A8130D0FF7699DC30D2EA0EAB5B0007F0276B215A8420689FB06D3F1451566D955BE287006AE5C2941C7F8CC8057AE2D933EC56AD42C0B8D5575EEC4FBFEA116323544CFC7A0AC5C6E2E9E659453888A1905B7644CFD3893E278CA64EFA3B58F8C7C8BE57B667D1A9131D5E6FD31CD2F2032BADEDB9F799E9736E88968B06DF4D4706FA083BA782B39AA0997A911C3B70FAA8ECDB019624019C28AB3D81EFD42CC930FFBD4B8F47C10CD4D6D5DA2046D2A70753D4CA49B3E6393CF89C1837D7D4C0ED24195BAA3EA1DF14431225D07640C987E87917877290E2BAEF9B7DD00D124D973FFA9DC3CF71BEE00C5FCA83ACB8EC62A42B89A531BC1D3E5899F7A0C6032B0184A98E328EAE0F8071850360BD216074965B71679A45C8AEC6AD23C3CD56653AFCB0D75E8D4E6891635424F10078B209DBBA7AAEAADDBADABFBF92E2F645C56002762629FED45E604824FE9ADF713F469527CDFAD4213AD4C06679F3F9D827BF9A8FC23BD49F4FFF84A23A7A94306977DE15EB66687601616DA29AF0ADE48CC490028F428C1C4CE10DA425BC06F2F15359CF5262B2B267B6EFB0769F7A8956C76BCBAC0216BADBBCCA1EE05CA3D1949B233C7C3A4A58BE10EE7ED7CC40715EEA3F33ADBE8A8A19A3C75BFEE82A93959230AC79846B825C79CCE08D5C883D767FDE0DD54CF2B2001639A89261D146B746459697835FB9A0C280981167D33E15C38305F5F1247297A0E29C207128C1AC73A9E7402399CE0C8B9B65C56ADABEDC2EBF59D1280ED5999B024C8DAFCC5085D1C6C14C73690E0E61579E40CC639B492F5B15BB259C60919DBD3B8EE427DF4AF06D900171043BF748505EA371545269C17A7E0733D80F46AE4ECDFE109DF55CEF5C02E2BC22024CA4B41B28B9511A2A720CE3DC6BE785205A2FC33D904F4098EBCFC40A0DBEDE807186D41D4F2E9BAC161A01435F26E647E8B40C6121A15D4087079AC5151C0EDBEAF19327920517448DD621A33EF15D7090DE86EB384D34F0C0BCF8648777647D1264FBE8D43CD5E0A4474326FA4FAF08B22F1BAFD521356DFA31A17D6CDD583FA54F7EEDE01C437EB6D3AE108826B79901FBE640E7BBD4C7BEDE6C210CC9DE91066E9C53E9F1C21C6EC8CC37A79731337B45F149CB4E6C73F2B2C3D494C95571C4244BF4FFB5A29CC6E517DFDE25BFEFE6D5915DCE8F3976628AB13F4DE447DF8ADF5048B195694F60F5A64DEE62D2FF9FC16FF1605E53EB10E7C3E47743CB15DF0F1FE82576C77B4050A25D04E66856D2129D8E936B940866651B50A24C7C0B89C602851520102021127195E37EA4B5A15DDC75831DF79D6D0CE349D2B33D880BEC50DCF8A12B4AC10F84762272E08710985588C872A44DDA2B16142B516DDD50CBE961AFB9D3DCA032C9B48B8428380A0510992DEA7FE58C0D25B65E40BEC2AF299F8D86A863012CE28C86B598761C7D27DE38D92" />
          <input type="hidden" name="signMsg"
            value="f802f5bbf146f68e6e5fbde42f41b5900bc54c01dd3a00a6c8cc5cd274a25245" /> <input type="hidden"
            name="merAppId" value="101" /> <input type="hidden" name="merId" value="100" /> <input type="hidden"
            name="locale" value="ZH_CN" /> <input type="hidden" name="ordertime" value="2019-12-23 15:21:47" />
          <div id="pro" style="padding-bottom:20px;display:none"><img
              src='/upp_payment/themes/images/gateway/pro.gif' /></div>
          <div id="payDiv">
            <input type="button" otype="button" otitle="预订流程-生成订单-收银台执行支付" class="payButton" style="margin-left:50px;"
              name="upp_pay_btn" value="执行支付" onclick="gotoPay();" />
          </div>
          <!-- 
						<div id="timeoutDiv" style="display: none">
							<input type="button" class="upp_pay_btn" name="upp_home_btn" value="返回首页" onclick="returnHome();" />
						</div>
						 
						<span style="color: red">请在30分钟内完成付款, </span>
						超时系统将自动取消订单。
						<br />
						支付中如遇到问题请致电：1899-5539
						-->
        </div>
        <div style="clear: both; display: block;"></div>
      </div>
    </div>
    <div id="hiddenBtnBox" class="submit-btn-box hide" style="margin-bottom: 30px;"><input type="button"
        class="btn-next" id="reOrderNo" style="background-color:#ee1b2f;" value="重新下单"></div>

    </div>
    <div class="graydivBox" id="graydivBox" style="display: none; top: 200px;">
      <div class="graydivBoxClose" style="display: block;">
        <span>新增绑定信用卡:</span>
        <!-- <a href="#">&times;</a> -->
      </div>
      <div id="graydivBoxWin" style="height: 340px;">
        <div>
          <div style="float: left; margin-left: 50px;">
            <div>
              <span></span>
            </div>
            <table class="graytable">
              <tr height="40">
                <td>姓名</td>
                <td><label><input type="text" name="one_name" class="txt inw ibg" disabled="" value=""></label></td>
              </tr>
              <tr>
                <td>身份证号</td>
                <td><label><input type="text" name="one_id" class="txt inw ibg" maxlength="18" readonly="readonly"
                      disabled="" value=""></label></td>
              </tr>
              <tr>
                <td>信用卡号</td>
                <td><label><input type="text" name="one_carid" class="txt inw" maxlength="28" value=""></label></td>
              </tr>
              <tr>
                <td>有效期</td>
                <td>
                  <label>
                    <select name="one_moth" style="width:105px;">
                      <option value="0">月</option>
                      <option value="01">01</option>
                      <option value="02">02</option>
                      <option value="03">03</option>
                      <option value="04">04</option>
                      <option value="05">05</option>
                      <option value="06">06</option>
                      <option value="07">07</option>
                      <option value="08">08</option>
                      <option value="09">09</option>
                      <option value="10">10</option>
                      <option value="11">11</option>
                      <option value="12">12</option>
                    </select>
                  </label>
                  <label>
                    <select name="one_year" style="width:105px;margin-left:10px;">
                      <option value="0">年</option>
                      <!-- <option value="15">2015</option>
											<option value="16">2016</option>
											<option value="17">2017</option>
											<option value="18">2018</option>
											<option value="19">2019</option>
											<option value="20">2020</option>
											<option value="21">2021</option>
											<option value="22">2022</option>
											<option value="23">2023</option>
											<option value="24">2024</option>
											<option value="25">2025</option> -->
                    </select>
                  </label></td>
              </tr>
              <tr>
                <td>卡验证码</td>
                <td><label><input type="text" name="one_carcode" class="txt inw" maxlength="3" placeholder="即卡背面末三位数字"
                      value=""></label></td>
              </tr>
              <tr>
                <td>手机号码</td>
                <td><label><input type="text" name="one_tel" class="txt inw" maxlength="11" placeholder="此卡在银行预留的手机"
                      value=""></label></td>
              </tr>
              <tr>
                <td>验证码</td>
                <td><label><input type="text" name="one_telcode" maxlength="6" class="txt inw2"
                      style="width:105px"></label><input type="button" value="获取验证码" class="onePayMsend"><label
                    class="onePayMsno"></label></td>
              </tr>
              <tr>
                <td></td>
                <td>
                  <span id="error" name="error"></span>
                </td>
                </td>
              </tr>

            </table>
          </div>
          <div style="float:right;margin-right: 50px;">
            <img src="/upp_payment/pay/common/images/card_tip.png" style="height: 370px;">
          </div>
        </div>
      </div>
      <div class="oneclick-btn-div">
        <a class="oneclick-btn-pre onePaysubmit" id="addNewPsg" href="javascript:void()">绑定</a>
        <a class="oneclick-btn-pre" id="onePayColse" href="javascript:void()">关闭窗口</a>
      </div>

    </div>
    <div class="graydiv" id="graydiv" style="display:none;"></div>
  </form>
  <div class="confirm-window-box hide" id="alert_box"><iframe class="shadow-bg"></iframe>
    <div class="confirm-window">
      <div class="left img"></div>
      <div class="right confirm-info">
        <p>请勾选协议</p>
      </div>
      <div class="a-center"><button class="btn btn-primary" id="alert_box_goon"
          otype="popupWindow">继&nbsp;&nbsp;续</button></div>
    </div>
  </div>
  <div class="b2b-confirm-window-box hide" id="b2b-alert_box"><iframe class="shadow-bg"></iframe>
    <div class="confirm-window">
      <div class="left img"></div>
      <div class="right confirm-info">
        <p>申请编号：</p>
        <p>初始PNR：</p>
        <p>已支付保证金：</p>
        <p>将扣减的保证金：</p>
        <p>剩余保证金信息：</p>



        <p></p>


      </div>
      <div class="a-center">



        <button class="btn btn-primary" id="errorButton" otype="popupWindow">确认</button>


      </div>
    </div>
  </div>
  <div class="hide" id="confirm_window_box">
    <iframe class="shadow-bg"></iframe>
    <div id="confirm-window" class="confirm-window ">
      <p class="confirm-title" id="pos_billNo">请在新打开的网页上完成支付</p>
      <div class="a-center" id="btnstype">
        <input type="hidden" id="checkOrderNo" value="GO1912230068226" />
        <button otitle="预订流程-生成订单-已完成支付" otype="button" id="succeed_btn"
          class="btn btn-primary">已完成支付</button>&nbsp;&nbsp;&nbsp;
        <button otitle="预订流程-生成订单-支付失败，继续支付" otype="button" id="failure_btn" class="btn close-w">支付失败，继续支付</button>
      </div>
      <div class="confirm-info">
        <h4><img src="../pay/common/images/core.jpg">支付提示</h4>
        <p>（1）支付完成前，请不要关闭此支付验证窗口。<br>
        </p>
      </div>
      <p></p>
    </div>
  </div>
  </div>
  <div class="hide" id="confirm_window_box_mile">
    <iframe class="shadow-bg"></iframe>
    <div id="confirm-window" class="confirm-window ">
      <p class="confirm-title">
        <h3><img src="../pay/common/images/red.png">支付失败！</h3>
      </p>
      <div class="confirm-info">
        <p id="failure_mile_msg"></p>
      </div>
      <div class="a-center">
        <button otype="button" id="failure_mile_btn" class="btn close-w">关闭窗口</button>
      </div>
    </div>
  </div>
  </div>
  <div id="sendMsgBox" class="sendMsgBox hide">
    <div class="shadow-bg"></div>
    <div class="sendmsg-box"><a id="anotherPaySMSClose" class="close-window close-w"></a>
      <div class="SMScontent">
        <p>请输入你小伙伴的手机号码,然后确认发送。</p>
        <p style="height:30px;"><span>电话号码:</span><input maxlength="11" id="sendPhone"></p>
        <div class="error"></div>
        <p></p>
        <div class="submit-btn-box btnbox" style="margin-top: 20px;"><button id="sendMsgButton"
            class="btn btn-next">确认发送</button></div>
      </div>
    </div>
  </div>
  <div id="successSendMsgBox" class="sendMsgBox hide">
    <div class="shadow-bg"></div>
    <div class="sendmsg-box"><a id="successPaySMSClose" class="close-window close-w"></a>
      <div class="SMScontent sendsuccess">
        <p>发送成功！</p>
      </div>
      <div class="submit-btn-box btnbox"><button id="success_confirm" class="btn btn-next">确认</button></div>
    </div>
  </div>
  <div class="popbox hide" id="popbox" style="z-index: 10;">
    <iframe class="shadow-bg"></iframe>
    <div class="cubox">
      <div class="titmsg" style="height: 70px;">
        <span class="info2">支付失败！</span>
      </div>
      <div class="infodt">请确认是否已扣款，如已扣款，<br>请通过<br>查询客票状态或联系网站服务专线4006695539处理，<br>
      </div>
      <div class="ubtn">
        <a otype="popupWindow" id="btnsty1" class="btnsty1" href="#">关闭窗口</a>
      </div>
    </div>
  </div>
  <div class="tip-bluesimple3">
    <div class="tip-inner tip-bg-image">
    </div>
    <div class="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left"></div>
  </div>

  <!-- 微信扫码弹出框 -->
  <div class="window-bg hide" style="z-index: 10;">
    <iframe class="shadow-bg"></iframe>
    <div class="confirm-window" id="confirm-window-wx">
      <a class="close-window close-w" onclick="javascript:closewxsm();"></a>
      <div class="phoPic"></div>
      <div id="btnstype" class="a-center">
        <div class="imgBox">
          <!-- <img src="/upp_payment/pay/uppwxsm.upp?orderNo=GO1912230068226&amount=10" alt=""> -->
        </div>
        <div class="imgTips">
          <div class="sk_icon">
          </div>
          <div class="tips_cont">请使用微信扫描<br>二维码以完成支付</div>
        </div>
        <div class="cartBox">
          <hr class="hr_s">
          <div class="cart"></div>
        </div>
        <div class="amount_s">10</div>
        <hr class="hr_s">
        <div class="company_name">中国南方航空公司</div>
        <hr class="hr_s">
        <div class="info_s">
          <div class="fl">交易单号</div>
          <div class="fr">GO1912230068226</div><br>
          <div class="fl">创建时间</div>
          <div class="fr">2019-12-23 15:21:47</div>
        </div>
        <hr class="hr_s">
        <div class="btnBox"><button class="btn btn-primary" id="succeed_wxbtn" otype="button"
            otitle="预订流程-生成订单-已完成支付">已完成支付</button>&nbsp;&nbsp;&nbsp;<button class="btn close-w" id="failure_wxbtn"
            otype="button" otitle="预订流程-生成订单-支付失败，继续支付">支付失败，继续支付</button></div>
      </div>
      <div class="confirm-info"></div>
    </div>
  </div>
  <!-- WDPCYBS DIV -->
  <div class="hide" id="LOADINGDIV">

    <iframe class="shadow-bg"></iframe>
    <div id="confirm-window" class="confirm-window ">
      <center><img src='/upp_payment/themes/images/gateway/pro.gif' /></center><br />
      <center>&nbsp;&nbsp;&nbsp;<b><span style="color:#888888;">支付中，请耐心等待</span></b>&nbsp;&nbsp;&nbsp;</center>

    </div>
  </div>


  <!-- 失败提示 -->
  <div class="hide" id="wcPayFail">

    <iframe class="shadow-bg"></iframe>
    <div id="confirm-window" class="confirm-window ">
      <center><span style="font-size:20px"><b>支付失败！</b></span></center><br />
      <p><span style="font-size:16px">请确认你的银行卡是否已扣款，如已扣款，</span></p>
      <p>
        <span style="font-size:16px">请通过订单管理查询客票状态或联系网站服务专线4006695539处理。
          请勿重复购票。<span>
      </p>
      <div class="a-center" id="btnstype">
        <input type="hidden" id="checkOrderNo" value="GO1912230068226" />
        <button onclick="closeWCPayFail();" otype="button" id="succeed_btn" class="btn btn-primary">关闭窗口
          <!--已完成支付--></button>&nbsp;&nbsp;&nbsp;
      </div>
    </div>
  </div>
  <!-- WDPCYBS DIV -->

  <!-- 余额支付点击开通后弹出页面    -->
  <div class="hide" id="openblance">

    <iframe class="shadow-bg"></iframe>
    <div id="confirm-window" class="confirm-window " style="width: 450px">
      <p class="confirm-title">如果您已完成钱包注册，请点击下面的“已注册，立即刷新”按钮。</p>
      <div class="a-center" id="btnstype">
        <input type="hidden" id="checkOrderNo" value="GO1912230068226" />
        <button style="color:FFFFFF;background-color: red" otitle="已经主粗，立即刷新" otype="button" id="blance_succeed_btn"
          onclick="blanceLoad();" class="btn btn-primary">已经注册，立即刷新</button>&nbsp;&nbsp;&nbsp;
        <button style="color:FFFFFF;background-color: #AAAAAA" otitle="稍后注册，关闭" otype="button" id="blance_failure_btn"
          onclick="blanceClose();" class="btn close-w">稍后注册，关闭</button>
      </div>
      <p></p>
    </div>
  </div>

  <!-- 余额支付点击开通后弹出页面    -->
  <div class="hide" id="openblanceError">

    <iframe class="shadow-bg"></iframe>
    <div id="confirm-window" class="confirm-window ">
      <p class="confirm-title" style="text-align: center;">余额不足，无法进行支付，请进行充值</p>
      <div class="a-center" id="btnstype">
        <button style="color:FFFFFF;background-color: #AAAAAA" otitle="稍后注册，关闭" otype="button" id="blance_failure_btn"
          onclick="walletblanceClose();" class="btn close-w">关闭窗口</button>
      </div>
      <p></p>
    </div>
  </div>

  <!-- 新增快捷支付一键支付[银联2.0]  START  -->

  <div id="alertmsgDiv" align="center"
    style="display:none;border: 1px solid rgb(51, 102, 153); position: fixed; left: 50%; top: 30%; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: 25px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; margin-left: -225px; width: 550px; height: 150px; text-align: center; z-index: 10001; background: white;">
    <p id="msgTxt" style="margin: 16px 0px;"> <span></span>
      <br>
      <br>
      <button id="button_ok" style="margin-bottom:5px;width:60px;height:26px;">
        确定
      </button>
    </p>
  </div>

  <div id="msgboxbody" style="display:none"></div>

  <!-- 新增快捷支付一键支付[银联2.0]  END  -->

  <div id="ffpConfirm" class="confirm-window confirm-window-passager hide" tabindex="0">
    <div class="right confirm-info" style="width: 100%">
      <div class="left img"></div>
      <p style="padding-left: 78px;font-size: 14px">本次交易所需里程是<span id="ffpSumlcConfirm"></span>公里,你确定要支付吗？</p>
    </div>
    <a class="close-window close-w" role="button" onclick="closeFfpWindow()"><span class="sr-only">关闭</span></a>
    <div class="a-center top10">
      <button class="btn btn-primary" id="milSure" onclick="gotoPay()">确定</button>
      <button class="btn btn-del" onclick="closeFfpWindow()" id="milCancel">取消</button>
    </div>
  </div>

</body>

</html>